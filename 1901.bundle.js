/*! For license information please see 1901.bundle.js.LICENSE.txt */
(()=>{"use strict";var e={8168:(e,t,r)=>{e.exports=r.p+"4fb34c1567962ff5a6c9.wasm"}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,r.u=e=>e+".bundle.js",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=self.location+"",(()=>{var e,t=(e="file:///home/mmom/src/rlayers/node_modules/sqlite-wasm-http/deps/dist/sqlite3-bundler-friendly.mjs",function(t={}){var n,s,i=t;i.ready=new Promise(((e,t)=>{n=e,s=t})),["_malloc","_free","_realloc","_sqlite3_aggregate_context","_sqlite3_auto_extension","_sqlite3_bind_blob","_sqlite3_bind_double","_sqlite3_bind_int","_sqlite3_bind_int64","_sqlite3_bind_null","_sqlite3_bind_parameter_count","_sqlite3_bind_parameter_index","_sqlite3_bind_pointer","_sqlite3_bind_text","_sqlite3_busy_handler","_sqlite3_busy_timeout","_sqlite3_cancel_auto_extension","_sqlite3_changes","_sqlite3_changes64","_sqlite3_clear_bindings","_sqlite3_close_v2","_sqlite3_collation_needed","_sqlite3_column_blob","_sqlite3_column_bytes","_sqlite3_column_count","_sqlite3_column_double","_sqlite3_column_int","_sqlite3_column_int64","_sqlite3_column_name","_sqlite3_column_text","_sqlite3_column_type","_sqlite3_column_value","_sqlite3_commit_hook","_sqlite3_compileoption_get","_sqlite3_compileoption_used","_sqlite3_complete","_sqlite3_context_db_handle","_sqlite3_create_collation","_sqlite3_create_collation_v2","_sqlite3_create_function","_sqlite3_create_function_v2","_sqlite3_create_module","_sqlite3_create_module_v2","_sqlite3_create_window_function","_sqlite3_data_count","_sqlite3_db_filename","_sqlite3_db_handle","_sqlite3_db_name","_sqlite3_db_status","_sqlite3_declare_vtab","_sqlite3_deserialize","_sqlite3_drop_modules","_sqlite3_errcode","_sqlite3_errmsg","_sqlite3_error_offset","_sqlite3_errstr","_sqlite3_exec","_sqlite3_expanded_sql","_sqlite3_extended_errcode","_sqlite3_extended_result_codes","_sqlite3_file_control","_sqlite3_finalize","_sqlite3_free","_sqlite3_get_auxdata","_sqlite3_initialize","_sqlite3_keyword_count","_sqlite3_keyword_name","_sqlite3_keyword_check","_sqlite3_last_insert_rowid","_sqlite3_libversion","_sqlite3_libversion_number","_sqlite3_limit","_sqlite3_malloc","_sqlite3_malloc64","_sqlite3_msize","_sqlite3_open","_sqlite3_open_v2","_sqlite3_overload_function","_sqlite3_prepare_v2","_sqlite3_prepare_v3","_sqlite3_preupdate_blobwrite","_sqlite3_preupdate_count","_sqlite3_preupdate_depth","_sqlite3_preupdate_hook","_sqlite3_preupdate_new","_sqlite3_preupdate_old","_sqlite3_progress_handler","_sqlite3_randomness","_sqlite3_realloc","_sqlite3_realloc64","_sqlite3_reset","_sqlite3_reset_auto_extension","_sqlite3_result_blob","_sqlite3_result_double","_sqlite3_result_error","_sqlite3_result_error_code","_sqlite3_result_error_nomem","_sqlite3_result_error_toobig","_sqlite3_result_int","_sqlite3_result_int64","_sqlite3_result_null","_sqlite3_result_pointer","_sqlite3_result_subtype","_sqlite3_result_text","_sqlite3_result_zeroblob","_sqlite3_result_zeroblob64","_sqlite3_rollback_hook","_sqlite3_serialize","_sqlite3_set_authorizer","_sqlite3_set_auxdata","_sqlite3_set_last_insert_rowid","_sqlite3_shutdown","_sqlite3_sourceid","_sqlite3_sql","_sqlite3_status","_sqlite3_status64","_sqlite3_step","_sqlite3_stmt_isexplain","_sqlite3_stmt_readonly","_sqlite3_stmt_status","_sqlite3_strglob","_sqlite3_stricmp","_sqlite3_strlike","_sqlite3_strnicmp","_sqlite3_table_column_metadata","_sqlite3_total_changes","_sqlite3_total_changes64","_sqlite3_trace_v2","_sqlite3_txn_state","_sqlite3_update_hook","_sqlite3_uri_boolean","_sqlite3_uri_int64","_sqlite3_uri_key","_sqlite3_uri_parameter","_sqlite3_user_data","_sqlite3_value_blob","_sqlite3_value_bytes","_sqlite3_value_double","_sqlite3_value_dup","_sqlite3_value_free","_sqlite3_value_frombind","_sqlite3_value_int","_sqlite3_value_int64","_sqlite3_value_nochange","_sqlite3_value_numeric_type","_sqlite3_value_pointer","_sqlite3_value_subtype","_sqlite3_value_text","_sqlite3_value_type","_sqlite3_vfs_find","_sqlite3_vfs_register","_sqlite3_vfs_unregister","_sqlite3_vtab_collation","_sqlite3_vtab_distinct","_sqlite3_vtab_in","_sqlite3_vtab_in_first","_sqlite3_vtab_in_next","_sqlite3_vtab_nochange","_sqlite3_vtab_on_conflict","_sqlite3_vtab_rhs_value","_sqlite3changegroup_add","_sqlite3changegroup_add_strm","_sqlite3changegroup_delete","_sqlite3changegroup_new","_sqlite3changegroup_output","_sqlite3changegroup_output_strm","_sqlite3changeset_apply","_sqlite3changeset_apply_strm","_sqlite3changeset_apply_v2","_sqlite3changeset_apply_v2_strm","_sqlite3changeset_concat","_sqlite3changeset_concat_strm","_sqlite3changeset_conflict","_sqlite3changeset_finalize","_sqlite3changeset_fk_conflicts","_sqlite3changeset_invert","_sqlite3changeset_invert_strm","_sqlite3changeset_new","_sqlite3changeset_next","_sqlite3changeset_old","_sqlite3changeset_op","_sqlite3changeset_pk","_sqlite3changeset_start","_sqlite3changeset_start_strm","_sqlite3changeset_start_v2","_sqlite3changeset_start_v2_strm","_sqlite3session_attach","_sqlite3session_changeset","_sqlite3session_changeset_size","_sqlite3session_changeset_strm","_sqlite3session_config","_sqlite3session_create","_sqlite3session_delete","_sqlite3session_diff","_sqlite3session_enable","_sqlite3session_indirect","_sqlite3session_isempty","_sqlite3session_memory_used","_sqlite3session_object_config","_sqlite3session_patchset","_sqlite3session_patchset_strm","_sqlite3session_table_filter","_sqlite3_wasm_pstack_ptr","_sqlite3_wasm_pstack_restore","_sqlite3_wasm_pstack_alloc","_sqlite3_wasm_pstack_remaining","_sqlite3_wasm_pstack_quota","_sqlite3_wasm_db_error","_sqlite3_wasm_test_struct","_sqlite3_wasm_enum_json","_sqlite3_wasm_vfs_unlink","_sqlite3_wasm_db_vfs","_sqlite3_wasm_db_reset","_sqlite3_wasm_db_export_chunked","_sqlite3_wasm_db_serialize","_sqlite3_wasm_vfs_create_file","_sqlite3_wasm_posix_create_file","_sqlite3_wasm_kvvfsMakeKeyOnPstack","_sqlite3_wasm_kvvfs_methods","_sqlite3_wasm_vtab_config","_sqlite3_wasm_db_config_ip","_sqlite3_wasm_db_config_pii","_sqlite3_wasm_db_config_s","_sqlite3_wasm_config_i","_sqlite3_wasm_config_ii","_sqlite3_wasm_config_j","_sqlite3_wasm_init_wasmfs","_sqlite3_wasm_test_intptr","_sqlite3_wasm_test_voidptr","_sqlite3_wasm_test_int64_max","_sqlite3_wasm_test_int64_min","_sqlite3_wasm_test_int64_times2","_sqlite3_wasm_test_int64_minmax","_sqlite3_wasm_test_int64ptr","_sqlite3_wasm_test_stack_overflow","_sqlite3_wasm_test_str_hello","_sqlite3_wasm_SQLTester_strglob","___indirect_function_table","_fflush","onRuntimeInitialized"].forEach((e=>{Object.getOwnPropertyDescriptor(i.ready,e)||Object.defineProperty(i.ready,e,{get:()=>G("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>G("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));const o=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,o.debugModule("globalThis.location =",globalThis.location);const a="emscripten-bug-17951";i[a]=function e(t,r){t.env.foo=function(){};const n=i.locateFile(e.uri,void 0===g?"":g);o.debugModule("instantiateWasm() uri =",n);const s=()=>fetch(n,{credentials:"same-origin"});return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(s(),t).then((e=>r(e.instance,e.module))):async()=>s().then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,t))).then((e=>r(e.instance,e.module))))(),{}},i[a].uri="sqlite3.wasm";var l=Object.assign({},i),c="./this.program",_="object"==typeof window,u="function"==typeof importScripts,d="object"==typeof{env:{RLAYERS_DEBUG:void 0}}.versions&&"string"==typeof{env:{RLAYERS_DEBUG:void 0}}.versions.node,f=!_&&!d&&!u;if(i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var p,m,h,g="";if(f){if("function"==typeof require||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&(p=read),h=e=>{if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));let t=read(e,"binary");return O("object"==typeof t),t},m=(e,t,r)=>{setTimeout((()=>t(h(e))))},"undefined"==typeof clearTimeout&&(globalThis.clearTimeout=e=>{}),"undefined"==typeof setTimeout&&(globalThis.setTimeout=e=>"function"==typeof e?e():G()),"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!_&&!u)throw new Error("environment detection error");if(u?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),m=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}}var b,y,q,w=i.print||console.log.bind(console),E=i.printErr||console.error.bind(console);Object.assign(i,l),l=null,b="fetchSettings",Object.getOwnPropertyDescriptor(i,b)&&G(`\`Module.${b}\` was supplied but \`${b}\` not included in INCOMING_MODULE_JS_API`),i.arguments&&i.arguments,Z("arguments","arguments_"),i.thisProgram&&(c=i.thisProgram),Z("thisProgram","thisProgram"),i.quit&&i.quit,Z("quit","quit_"),O(void 0===i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),O(void 0===i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),O(void 0===i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),O(void 0===i.read,"Module.read option was removed (modify read_ in JS)"),O(void 0===i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),O(void 0===i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),O(void 0===i.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),O(void 0===i.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),Z("asm","wasmExports"),Z("read","read_"),Z("readAsync","readAsync"),Z("readBinary","readBinary"),Z("setWindowTitle","setWindowTitle"),O(!d,"node environment detected but not enabled at build time.  Add 'node' to `-sENVIRONMENT` to enable."),O(!f,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),i.wasmBinary&&(y=i.wasmBinary),Z("wasmBinary","wasmBinary"),i.noExitRuntime,Z("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&G("no native wasm support detected");var S,A,x,T,I,k,F=!1;function O(e,t){e||G("Assertion failed"+(t?": "+t:""))}function P(){var e=q.buffer;i.HEAP8=S=new Int8Array(e),i.HEAP16=x=new Int16Array(e),i.HEAPU8=A=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=T=new Int32Array(e),i.HEAPU32=I=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e),i.HEAP64=k=new BigInt64Array(e),i.HEAPU64=new BigUint64Array(e)}O(!i.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),O("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support");var L=i.INITIAL_MEMORY||16777216;function C(){if(!F){var e=We();0==e&&(e+=4);var t=I[e>>2],r=I[e+4>>2];34821223==t&&2310721022==r||G(`Stack overflow! Stack cookie has been overwritten at ${se(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${se(r)} ${se(t)}`),1668509029!=I[0]&&G("Runtime error: The application has corrupted its heap memory area (address zero)!")}}Z("INITIAL_MEMORY","INITIAL_MEMORY"),O(L>=524288,"INITIAL_MEMORY should be larger than STACK_SIZE, was "+L+"! (STACK_SIZE=524288)"),q=i.wasmMemory?i.wasmMemory:new WebAssembly.Memory({initial:L/65536,maximum:32768}),P(),O((L=q.buffer.byteLength)%65536==0),function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"}();var N=[],D=[],R=[],M=!1;O(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),O(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var j=0,U=null,B=null,z={};function W(e){for(var t=e;;){if(!z[e])return e;e=t+Math.random()}}function H(e){j++,i.monitorRunDependencies&&i.monitorRunDependencies(j),e?(O(!z[e]),z[e]=1,null===U&&"undefined"!=typeof setInterval&&(U=setInterval((()=>{if(F)return clearInterval(U),void(U=null);var e=!1;for(var t in z)e||(e=!0,E("still waiting on run dependencies:")),E(`dependency: ${t}`);e&&E("(end of list)")}),1e4))):E("warning: run dependency added without ID")}function Q(e){if(j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),e?(O(z[e]),delete z[e]):E("warning: run dependency removed without ID"),0==j&&(null!==U&&(clearInterval(U),U=null),B)){var t=B;B=null,t()}}function G(e){i.onAbort&&i.onAbort(e),E(e="Aborted("+e+")"),F=!0;var t=new WebAssembly.RuntimeError(e);throw s(t),t}var V,$;function K(e){return e.startsWith("data:application/octet-stream;base64,")}function J(e){return function(){O(M,`native function \`${e}\` called before runtime initialization`);var t=Re[e];return O(t,`exported native function \`${e}\` not found`),t.apply(null,arguments)}}function Y(e){if(e==V&&y)return new Uint8Array(y);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}function X(e,t,r){return function(e){return y||!_&&!u||"function"!=typeof fetch?Promise.resolve().then((()=>Y(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>Y(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{E(`failed to asynchronously prepare wasm: ${e}`),V.startsWith("file://")&&E(`warning: Loading from a file URI (${V}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),G(e)}))}function Z(e,t,r=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){G(`\`Module.${e}\` has been replaced by \`${t}\``+(r?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function ee(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function te(e,t){"undefined"!=typeof globalThis&&Object.defineProperty(globalThis,e,{configurable:!0,get(){ie("`"+e+"` is not longer defined by emscripten. "+t)}})}function re(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)";ee(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),G(t)}})}i.locateFile?K(V="sqlite3.wasm")||($=V,V=i.locateFile?i.locateFile($,g):g+$):V=new URL(r(8168),r.b).href,te("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),te("asm","Please use wasmExports instead");var ne=e=>{for(;e.length>0;)e.shift()(i)},se=e=>(O("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0")),ie=e=>{ie.shown||(ie.shown={}),ie.shown[e]||(ie.shown[e]=1,E(e))},oe={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,n=e.length-1;n>=0;n--){var s=e[n];"."===s?e.splice(n,1):".."===s?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=oe.isAbs(e),r="/"===e.substr(-1);return(e=oe.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=oe.splitPath(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=oe.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return oe.normalize(e.join("/"))},join2:(e,t)=>oe.normalize(e+"/"+t)},ae=e=>(ae=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);G("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")})())(e),le={resolve:function(){for(var e="",t=!1,r=arguments.length-1;r>=-1&&!t;r--){var n=r>=0?arguments[r]:Ee.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=oe.isAbs(n)}return(t?"/":"")+(e=oe.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=le.resolve(e).substr(1),t=le.resolve(t).substr(1);for(var n=r(e.split("/")),s=r(t.split("/")),i=Math.min(n.length,s.length),o=i,a=0;a<i;a++)if(n[a]!==s[a]){o=a;break}var l=[];for(a=o;a<n.length;a++)l.push("..");return(l=l.concat(s.slice(o))).join("/")}},ce="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,_e=(e,t,r)=>{for(var n=t+r,s=t;e[s]&&!(s>=n);)++s;if(s-t>16&&e.buffer&&ce)return ce.decode(e.subarray(t,s));for(var i="";t<s;){var o=e[t++];if(128&o){var a=63&e[t++];if(192!=(224&o)){var l=63&e[t++];if(224==(240&o)?o=(15&o)<<12|a<<6|l:(240!=(248&o)&&ie("Invalid UTF-8 leading byte "+se(o)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),o=(7&o)<<18|a<<12|l<<6|63&e[t++]),o<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|a)}else i+=String.fromCharCode(o)}return i},ue=[],de=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},fe=(e,t,r,n)=>{if(O("string"==typeof e),!(n>0))return 0;for(var s=r,i=r+n-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(r>=i)break;t[r++]=a}else if(a<=2047){if(r+1>=i)break;t[r++]=192|a>>6,t[r++]=128|63&a}else if(a<=65535){if(r+2>=i)break;t[r++]=224|a>>12,t[r++]=128|a>>6&63,t[r++]=128|63&a}else{if(r+3>=i)break;a>1114111&&ie("Invalid Unicode code point "+se(a)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|a>>18,t[r++]=128|a>>12&63,t[r++]=128|a>>6&63,t[r++]=128|63&a}}return t[r]=0,r-s};function pe(e,t,r){var n=r>0?r:de(e)+1,s=new Array(n),i=fe(e,s,0,s.length);return t&&(s.length=i),s}var me,he={ttys:[],init(){},shutdown(){},register(e,t){he.ttys[e]={input:[],output:[],ops:t},Ee.registerDevice(e,he.stream_ops)},stream_ops:{open(e){var t=he.ttys[e.node.rdev];if(!t)throw new Ee.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,r,n,s){if(!e.tty||!e.tty.ops.get_char)throw new Ee.ErrnoError(60);for(var i=0,o=0;o<n;o++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new Ee.ErrnoError(29)}if(void 0===a&&0===i)throw new Ee.ErrnoError(6);if(null==a)break;i++,t[r+o]=a}return i&&(e.node.timestamp=Date.now()),i},write(e,t,r,n,s){if(!e.tty||!e.tty.ops.put_char)throw new Ee.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(e){throw new Ee.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:e=>(()=>{if(!ue.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&null!==(e=readline())&&(e+="\n"),!e)return null;ue=pe(e,!0)}return ue.shift()})(),put_char(e,t){null===t||10===t?(w(_e(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(w(_e(e.output,0)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,r)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(E(_e(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(E(_e(e.output,0)),e.output=[])}}},ge=e=>{e=((e,t)=>(O(t,"alignment argument is required"),Math.ceil(e/t)*t))(e,65536);var t=Be(65536,e);return t?((e,t)=>(A.fill(0,e,e+t),e))(t,e):0},be={ops_table:null,mount:e=>be.createNode(null,"/",16895,0),createNode(e,t,r,n){if(Ee.isBlkdev(r)||Ee.isFIFO(r))throw new Ee.ErrnoError(63);be.ops_table||(be.ops_table={dir:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr,lookup:be.node_ops.lookup,mknod:be.node_ops.mknod,rename:be.node_ops.rename,unlink:be.node_ops.unlink,rmdir:be.node_ops.rmdir,readdir:be.node_ops.readdir,symlink:be.node_ops.symlink},stream:{llseek:be.stream_ops.llseek}},file:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr},stream:{llseek:be.stream_ops.llseek,read:be.stream_ops.read,write:be.stream_ops.write,allocate:be.stream_ops.allocate,mmap:be.stream_ops.mmap,msync:be.stream_ops.msync}},link:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr,readlink:be.node_ops.readlink},stream:{}},chrdev:{node:{getattr:be.node_ops.getattr,setattr:be.node_ops.setattr},stream:Ee.chrdev_stream_ops}});var s=Ee.createNode(e,t,r,n);return Ee.isDir(s.mode)?(s.node_ops=be.ops_table.dir.node,s.stream_ops=be.ops_table.dir.stream,s.contents={}):Ee.isFile(s.mode)?(s.node_ops=be.ops_table.file.node,s.stream_ops=be.ops_table.file.stream,s.usedBytes=0,s.contents=null):Ee.isLink(s.mode)?(s.node_ops=be.ops_table.link.node,s.stream_ops=be.ops_table.link.stream):Ee.isChrdev(s.mode)&&(s.node_ops=be.ops_table.chrdev.node,s.stream_ops=be.ops_table.chrdev.stream),s.timestamp=Date.now(),e&&(e.contents[t]=s,e.timestamp=s.timestamp),s},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){var r=e.contents?e.contents.length:0;if(!(r>=t)){t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));var n=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var r=e.contents;e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=Ee.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Ee.isDir(e.mode)?t.size=4096:Ee.isFile(e.mode)?t.size=e.usedBytes:Ee.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&be.resizeFileStorage(e,t.size)},lookup(e,t){throw Ee.genericErrors[44]},mknod:(e,t,r,n)=>be.createNode(e,t,r,n),rename(e,t,r){if(Ee.isDir(e.mode)){var n;try{n=Ee.lookupNode(t,r)}catch(e){}if(n)for(var s in n.contents)throw new Ee.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var r=Ee.lookupNode(e,t);for(var n in r.contents)throw new Ee.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var r in e.contents)e.contents.hasOwnProperty(r)&&t.push(r);return t},symlink(e,t,r){var n=be.createNode(e,t,41471,0);return n.link=r,n},readlink(e){if(!Ee.isLink(e.mode))throw new Ee.ErrnoError(28);return e.link}},stream_ops:{read(e,t,r,n,s){var i=e.node.contents;if(s>=e.node.usedBytes)return 0;var o=Math.min(e.node.usedBytes-s,n);if(O(o>=0),o>8&&i.subarray)t.set(i.subarray(s,s+o),r);else for(var a=0;a<o;a++)t[r+a]=i[s+a];return o},write(e,t,r,n,s,i){if(O(!(t instanceof ArrayBuffer)),t.buffer===S.buffer&&(i=!1),!n)return 0;var o=e.node;if(o.timestamp=Date.now(),t.subarray&&(!o.contents||o.contents.subarray)){if(i)return O(0===s,"canOwn must imply no weird position inside the file"),o.contents=t.subarray(r,r+n),o.usedBytes=n,n;if(0===o.usedBytes&&0===s)return o.contents=t.slice(r,r+n),o.usedBytes=n,n;if(s+n<=o.usedBytes)return o.contents.set(t.subarray(r,r+n),s),n}if(be.expandFileStorage(o,s+n),o.contents.subarray&&t.subarray)o.contents.set(t.subarray(r,r+n),s);else for(var a=0;a<n;a++)o.contents[s+a]=t[r+a];return o.usedBytes=Math.max(o.usedBytes,s+n),n},llseek(e,t,r){var n=t;if(1===r?n+=e.position:2===r&&Ee.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new Ee.ErrnoError(28);return n},allocate(e,t,r){be.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap(e,t,r,n,s){if(!Ee.isFile(e.node.mode))throw new Ee.ErrnoError(43);var i,o,a=e.node.contents;if(2&s||a.buffer!==S.buffer){if((r>0||r+t<a.length)&&(a=a.subarray?a.subarray(r,r+t):Array.prototype.slice.call(a,r,r+t)),o=!0,!(i=ge(t)))throw new Ee.ErrnoError(48);S.set(a,i)}else o=!1,i=a.byteOffset;return{ptr:i,allocated:o}},msync:(e,t,r,n,s)=>(be.stream_ops.write(e,t,0,n,r,!1),0)}},ye=i.preloadPlugins||[],qe=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},ve={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},we={},Ee={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(e,t={}){if(!(e=le.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Ee.ErrnoError(32);for(var r=e.split("/").filter((e=>!!e)),n=Ee.root,s="/",i=0;i<r.length;i++){var o=i===r.length-1;if(o&&t.parent)break;if(n=Ee.lookupNode(n,r[i]),s=oe.join2(s,r[i]),Ee.isMountpoint(n)&&(!o||o&&t.follow_mount)&&(n=n.mounted.root),!o||t.follow)for(var a=0;Ee.isLink(n.mode);){var l=Ee.readlink(s);if(s=le.resolve(oe.dirname(s),l),n=Ee.lookupPath(s,{recurse_count:t.recurse_count+1}).node,a++>40)throw new Ee.ErrnoError(32)}}return{path:s,node:n}},getPath(e){for(var t;;){if(Ee.isRoot(e)){var r=e.mount.mountpoint;return t?"/"!==r[r.length-1]?`${r}/${t}`:r+t:r}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%Ee.nameTable.length},hashAddNode(e){var t=Ee.hashName(e.parent.id,e.name);e.name_next=Ee.nameTable[t],Ee.nameTable[t]=e},hashRemoveNode(e){var t=Ee.hashName(e.parent.id,e.name);if(Ee.nameTable[t]===e)Ee.nameTable[t]=e.name_next;else for(var r=Ee.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode(e,t){var r=Ee.mayLookup(e);if(r)throw new Ee.ErrnoError(r,e);for(var n=Ee.hashName(e.id,t),s=Ee.nameTable[n];s;s=s.name_next){var i=s.name;if(s.parent.id===e.id&&i===t)return s}return Ee.lookup(e,t)},createNode(e,t,r,n){O("object"==typeof e);var s=new Ee.FSNode(e,t,r,n);return Ee.hashAddNode(s),s},destroyNode(e){Ee.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Ee.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>Ee.nodePermissions(e,"x")||(e.node_ops.lookup?0:2),mayCreate(e,t){try{return Ee.lookupNode(e,t),20}catch(e){}return Ee.nodePermissions(e,"wx")},mayDelete(e,t,r){var n;try{n=Ee.lookupNode(e,t)}catch(e){return e.errno}var s=Ee.nodePermissions(e,"wx");if(s)return s;if(r){if(!Ee.isDir(n.mode))return 54;if(Ee.isRoot(n)||Ee.getPath(n)===Ee.cwd())return 10}else if(Ee.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?Ee.isLink(e.mode)?32:Ee.isDir(e.mode)&&("r"!==Ee.flagsToPermissionString(t)||512&t)?31:Ee.nodePermissions(e,Ee.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=Ee.MAX_OPEN_FDS;e++)if(!Ee.streams[e])return e;throw new Ee.ErrnoError(33)},getStreamChecked(e){var t=Ee.getStream(e);if(!t)throw new Ee.ErrnoError(8);return t},getStream:e=>Ee.streams[e],createStream:(e,t=-1)=>(Ee.FSStream||(Ee.FSStream=function(){this.shared={}},Ee.FSStream.prototype={},Object.defineProperties(Ee.FSStream.prototype,{object:{get(){return this.node},set(e){this.node=e}},isRead:{get(){return 1!=(2097155&this.flags)}},isWrite:{get(){return!!(2097155&this.flags)}},isAppend:{get(){return 1024&this.flags}},flags:{get(){return this.shared.flags},set(e){this.shared.flags=e}},position:{get(){return this.shared.position},set(e){this.shared.position=e}}})),e=Object.assign(new Ee.FSStream,e),-1==t&&(t=Ee.nextfd()),e.fd=t,Ee.streams[t]=e,e),closeStream(e){Ee.streams[e]=null},chrdev_stream_ops:{open(e){var t=Ee.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek(){throw new Ee.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){Ee.devices[e]={stream_ops:t}},getDevice:e=>Ee.devices[e],getMounts(e){for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),Ee.syncFSRequests++,Ee.syncFSRequests>1&&E(`warning: ${Ee.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var r=Ee.getMounts(Ee.root.mount),n=0;function s(e){return O(Ee.syncFSRequests>0),Ee.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,s(e));++n>=r.length&&s(null)}r.forEach((t=>{if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount(e,t,r){if("string"==typeof e)throw e;var n,s="/"===r,i=!r;if(s&&Ee.root)throw new Ee.ErrnoError(10);if(!s&&!i){var o=Ee.lookupPath(r,{follow_mount:!1});if(r=o.path,n=o.node,Ee.isMountpoint(n))throw new Ee.ErrnoError(10);if(!Ee.isDir(n.mode))throw new Ee.ErrnoError(54)}var a={type:e,opts:t,mountpoint:r,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,s?Ee.root=l:n&&(n.mounted=a,n.mount&&n.mount.mounts.push(a)),l},unmount(e){var t=Ee.lookupPath(e,{follow_mount:!1});if(!Ee.isMountpoint(t.node))throw new Ee.ErrnoError(28);var r=t.node,n=r.mounted,s=Ee.getMounts(n);Object.keys(Ee.nameTable).forEach((e=>{for(var t=Ee.nameTable[e];t;){var r=t.name_next;s.includes(t.mount)&&Ee.destroyNode(t),t=r}})),r.mounted=null;var i=r.mount.mounts.indexOf(n);O(-1!==i),r.mount.mounts.splice(i,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,r){var n=Ee.lookupPath(e,{parent:!0}).node,s=oe.basename(e);if(!s||"."===s||".."===s)throw new Ee.ErrnoError(28);var i=Ee.mayCreate(n,s);if(i)throw new Ee.ErrnoError(i);if(!n.node_ops.mknod)throw new Ee.ErrnoError(63);return n.node_ops.mknod(n,s,t,r)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Ee.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Ee.mknod(e,t,0)),mkdirTree(e,t){for(var r=e.split("/"),n="",s=0;s<r.length;++s)if(r[s]){n+="/"+r[s];try{Ee.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),t|=8192,Ee.mknod(e,t,r)),symlink(e,t){if(!le.resolve(e))throw new Ee.ErrnoError(44);var r=Ee.lookupPath(t,{parent:!0}).node;if(!r)throw new Ee.ErrnoError(44);var n=oe.basename(t),s=Ee.mayCreate(r,n);if(s)throw new Ee.ErrnoError(s);if(!r.node_ops.symlink)throw new Ee.ErrnoError(63);return r.node_ops.symlink(r,n,e)},rename(e,t){var r,n,s=oe.dirname(e),i=oe.dirname(t),o=oe.basename(e),a=oe.basename(t);if(r=Ee.lookupPath(e,{parent:!0}).node,n=Ee.lookupPath(t,{parent:!0}).node,!r||!n)throw new Ee.ErrnoError(44);if(r.mount!==n.mount)throw new Ee.ErrnoError(75);var l,c=Ee.lookupNode(r,o),_=le.relative(e,i);if("."!==_.charAt(0))throw new Ee.ErrnoError(28);if("."!==(_=le.relative(t,s)).charAt(0))throw new Ee.ErrnoError(55);try{l=Ee.lookupNode(n,a)}catch(e){}if(c!==l){var u=Ee.isDir(c.mode),d=Ee.mayDelete(r,o,u);if(d)throw new Ee.ErrnoError(d);if(d=l?Ee.mayDelete(n,a,u):Ee.mayCreate(n,a))throw new Ee.ErrnoError(d);if(!r.node_ops.rename)throw new Ee.ErrnoError(63);if(Ee.isMountpoint(c)||l&&Ee.isMountpoint(l))throw new Ee.ErrnoError(10);if(n!==r&&(d=Ee.nodePermissions(r,"w")))throw new Ee.ErrnoError(d);Ee.hashRemoveNode(c);try{r.node_ops.rename(c,n,a)}catch(e){throw e}finally{Ee.hashAddNode(c)}}},rmdir(e){var t=Ee.lookupPath(e,{parent:!0}).node,r=oe.basename(e),n=Ee.lookupNode(t,r),s=Ee.mayDelete(t,r,!0);if(s)throw new Ee.ErrnoError(s);if(!t.node_ops.rmdir)throw new Ee.ErrnoError(63);if(Ee.isMountpoint(n))throw new Ee.ErrnoError(10);t.node_ops.rmdir(t,r),Ee.destroyNode(n)},readdir(e){var t=Ee.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Ee.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=Ee.lookupPath(e,{parent:!0}).node;if(!t)throw new Ee.ErrnoError(44);var r=oe.basename(e),n=Ee.lookupNode(t,r),s=Ee.mayDelete(t,r,!1);if(s)throw new Ee.ErrnoError(s);if(!t.node_ops.unlink)throw new Ee.ErrnoError(63);if(Ee.isMountpoint(n))throw new Ee.ErrnoError(10);t.node_ops.unlink(t,r),Ee.destroyNode(n)},readlink(e){var t=Ee.lookupPath(e).node;if(!t)throw new Ee.ErrnoError(44);if(!t.node_ops.readlink)throw new Ee.ErrnoError(28);return le.resolve(Ee.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var r=Ee.lookupPath(e,{follow:!t}).node;if(!r)throw new Ee.ErrnoError(44);if(!r.node_ops.getattr)throw new Ee.ErrnoError(63);return r.node_ops.getattr(r)},lstat:e=>Ee.stat(e,!0),chmod(e,t,r){var n;if(!(n="string"==typeof e?Ee.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Ee.ErrnoError(63);n.node_ops.setattr(n,{mode:4095&t|-4096&n.mode,timestamp:Date.now()})},lchmod(e,t){Ee.chmod(e,t,!0)},fchmod(e,t){var r=Ee.getStreamChecked(e);Ee.chmod(r.node,t)},chown(e,t,r,n){var s;if(!(s="string"==typeof e?Ee.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Ee.ErrnoError(63);s.node_ops.setattr(s,{timestamp:Date.now()})},lchown(e,t,r){Ee.chown(e,t,r,!0)},fchown(e,t,r){var n=Ee.getStreamChecked(e);Ee.chown(n.node,t,r)},truncate(e,t){if(t<0)throw new Ee.ErrnoError(28);var r;if(!(r="string"==typeof e?Ee.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Ee.ErrnoError(63);if(Ee.isDir(r.mode))throw new Ee.ErrnoError(31);if(!Ee.isFile(r.mode))throw new Ee.ErrnoError(28);var n=Ee.nodePermissions(r,"w");if(n)throw new Ee.ErrnoError(n);r.node_ops.setattr(r,{size:t,timestamp:Date.now()})},ftruncate(e,t){var r=Ee.getStreamChecked(e);if(!(2097155&r.flags))throw new Ee.ErrnoError(28);Ee.truncate(r.node,t)},utime(e,t,r){var n=Ee.lookupPath(e,{follow:!0}).node;n.node_ops.setattr(n,{timestamp:Math.max(t,r)})},open(e,t,r){if(""===e)throw new Ee.ErrnoError(44);var n;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&r|32768:0,"object"==typeof e)n=e;else{e=oe.normalize(e);try{n=Ee.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var s=!1;if(64&t)if(n){if(128&t)throw new Ee.ErrnoError(20)}else n=Ee.mknod(e,r,0),s=!0;if(!n)throw new Ee.ErrnoError(44);if(Ee.isChrdev(n.mode)&&(t&=-513),65536&t&&!Ee.isDir(n.mode))throw new Ee.ErrnoError(54);if(!s){var o=Ee.mayOpen(n,t);if(o)throw new Ee.ErrnoError(o)}512&t&&!s&&Ee.truncate(n,0),t&=-131713;var a=Ee.createStream({node:n,path:Ee.getPath(n),flags:t,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!i.logReadFiles||1&t||(Ee.readFiles||(Ee.readFiles={}),e in Ee.readFiles||(Ee.readFiles[e]=1)),a},close(e){if(Ee.isClosed(e))throw new Ee.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Ee.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,r){if(Ee.isClosed(e))throw new Ee.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Ee.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new Ee.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read(e,t,r,n,s){if(O(r>=0),n<0||s<0)throw new Ee.ErrnoError(28);if(Ee.isClosed(e))throw new Ee.ErrnoError(8);if(1==(2097155&e.flags))throw new Ee.ErrnoError(8);if(Ee.isDir(e.node.mode))throw new Ee.ErrnoError(31);if(!e.stream_ops.read)throw new Ee.ErrnoError(28);var i=void 0!==s;if(i){if(!e.seekable)throw new Ee.ErrnoError(70)}else s=e.position;var o=e.stream_ops.read(e,t,r,n,s);return i||(e.position+=o),o},write(e,t,r,n,s,i){if(O(r>=0),n<0||s<0)throw new Ee.ErrnoError(28);if(Ee.isClosed(e))throw new Ee.ErrnoError(8);if(!(2097155&e.flags))throw new Ee.ErrnoError(8);if(Ee.isDir(e.node.mode))throw new Ee.ErrnoError(31);if(!e.stream_ops.write)throw new Ee.ErrnoError(28);e.seekable&&1024&e.flags&&Ee.llseek(e,0,2);var o=void 0!==s;if(o){if(!e.seekable)throw new Ee.ErrnoError(70)}else s=e.position;var a=e.stream_ops.write(e,t,r,n,s,i);return o||(e.position+=a),a},allocate(e,t,r){if(Ee.isClosed(e))throw new Ee.ErrnoError(8);if(t<0||r<=0)throw new Ee.ErrnoError(28);if(!(2097155&e.flags))throw new Ee.ErrnoError(8);if(!Ee.isFile(e.node.mode)&&!Ee.isDir(e.node.mode))throw new Ee.ErrnoError(43);if(!e.stream_ops.allocate)throw new Ee.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap(e,t,r,n,s){if(2&n&&!(2&s)&&2!=(2097155&e.flags))throw new Ee.ErrnoError(2);if(1==(2097155&e.flags))throw new Ee.ErrnoError(2);if(!e.stream_ops.mmap)throw new Ee.ErrnoError(43);return e.stream_ops.mmap(e,t,r,n,s)},msync:(e,t,r,n,s)=>(O(r>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,s):0),munmap:e=>0,ioctl(e,t,r){if(!e.stream_ops.ioctl)throw new Ee.ErrnoError(59);return e.stream_ops.ioctl(e,t,r)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error(`Invalid encoding type "${t.encoding}"`);var r,n=Ee.open(e,t.flags),s=Ee.stat(e).size,i=new Uint8Array(s);return Ee.read(n,i,0,s,0),"utf8"===t.encoding?r=_e(i,0):"binary"===t.encoding&&(r=i),Ee.close(n),r},writeFile(e,t,r={}){r.flags=r.flags||577;var n=Ee.open(e,r.flags,r.mode);if("string"==typeof t){var s=new Uint8Array(de(t)+1),i=fe(t,s,0,s.length);Ee.write(n,s,0,i,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Ee.write(n,t,0,t.byteLength,void 0,r.canOwn)}Ee.close(n)},cwd:()=>Ee.currentPath,chdir(e){var t=Ee.lookupPath(e,{follow:!0});if(null===t.node)throw new Ee.ErrnoError(44);if(!Ee.isDir(t.node.mode))throw new Ee.ErrnoError(54);var r=Ee.nodePermissions(t.node,"x");if(r)throw new Ee.ErrnoError(r);Ee.currentPath=t.path},createDefaultDirectories(){Ee.mkdir("/tmp"),Ee.mkdir("/home"),Ee.mkdir("/home/web_user")},createDefaultDevices(){Ee.mkdir("/dev"),Ee.registerDevice(Ee.makedev(1,3),{read:()=>0,write:(e,t,r,n,s)=>n}),Ee.mkdev("/dev/null",Ee.makedev(1,3)),he.register(Ee.makedev(5,0),he.default_tty_ops),he.register(Ee.makedev(6,0),he.default_tty1_ops),Ee.mkdev("/dev/tty",Ee.makedev(5,0)),Ee.mkdev("/dev/tty1",Ee.makedev(6,0));var e=new Uint8Array(1024),t=0,r=()=>(0===t&&(t=ae(e).byteLength),e[--t]);Ee.createDevice("/dev","random",r),Ee.createDevice("/dev","urandom",r),Ee.mkdir("/dev/shm"),Ee.mkdir("/dev/shm/tmp")},createSpecialDirectories(){Ee.mkdir("/proc");var e=Ee.mkdir("/proc/self");Ee.mkdir("/proc/self/fd"),Ee.mount({mount(){var t=Ee.createNode(e,"fd",16895,73);return t.node_ops={lookup(e,t){var r=+t,n=Ee.getStreamChecked(r),s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path}};return s.parent=s,s}},t}},{},"/proc/self/fd")},createStandardStreams(){i.stdin?Ee.createDevice("/dev","stdin",i.stdin):Ee.symlink("/dev/tty","/dev/stdin"),i.stdout?Ee.createDevice("/dev","stdout",null,i.stdout):Ee.symlink("/dev/tty","/dev/stdout"),i.stderr?Ee.createDevice("/dev","stderr",null,i.stderr):Ee.symlink("/dev/tty1","/dev/stderr");var e=Ee.open("/dev/stdin",0),t=Ee.open("/dev/stdout",1),r=Ee.open("/dev/stderr",1);O(0===e.fd,`invalid handle for stdin (${e.fd})`),O(1===t.fd,`invalid handle for stdout (${t.fd})`),O(2===r.fd,`invalid handle for stderr (${r.fd})`)},ensureErrnoError(){Ee.ErrnoError||(Ee.ErrnoError=function(e,t){this.name="ErrnoError",this.node=t,this.setErrno=function(e){for(var t in this.errno=e,we)if(we[t]===e){this.code=t;break}},this.setErrno(e),this.message=ve[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=this.stack.replace(/\b_Z[\w\d_]+/g,(function(e){var t,r=(t=e,ie("warning: build with -sDEMANGLE_SUPPORT to link in libcxxabi demangling"),t);return e===r?e:r+" ["+e+"]"})))},Ee.ErrnoError.prototype=new Error,Ee.ErrnoError.prototype.constructor=Ee.ErrnoError,[44].forEach((e=>{Ee.genericErrors[e]=new Ee.ErrnoError(e),Ee.genericErrors[e].stack="<generic error, no stack>"})))},staticInit(){Ee.ensureErrnoError(),Ee.nameTable=new Array(4096),Ee.mount(be,{},"/"),Ee.createDefaultDirectories(),Ee.createDefaultDevices(),Ee.createSpecialDirectories(),Ee.filesystems={MEMFS:be}},init(e,t,r){O(!Ee.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Ee.init.initialized=!0,Ee.ensureErrnoError(),i.stdin=e||i.stdin,i.stdout=t||i.stdout,i.stderr=r||i.stderr,Ee.createStandardStreams()},quit(){Ee.init.initialized=!1,Ue(0);for(var e=0;e<Ee.streams.length;e++){var t=Ee.streams[e];t&&Ee.close(t)}},findObject(e,t){var r=Ee.analyzePath(e,t);return r.exists?r.object:null},analyzePath(e,t){try{e=(n=Ee.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=Ee.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=oe.basename(e),n=Ee.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath(e,t,r,n){e="string"==typeof e?e:Ee.getPath(e);for(var s=t.split("/").reverse();s.length;){var i=s.pop();if(i){var o=oe.join2(e,i);try{Ee.mkdir(o)}catch(e){}e=o}}return o},createFile(e,t,r,n,s){var i=oe.join2("string"==typeof e?e:Ee.getPath(e),t),o=qe(n,s);return Ee.create(i,o)},createDataFile(e,t,r,n,s,i){var o=t;e&&(e="string"==typeof e?e:Ee.getPath(e),o=t?oe.join2(e,t):e);var a=qe(n,s),l=Ee.create(o,a);if(r){if("string"==typeof r){for(var c=new Array(r.length),_=0,u=r.length;_<u;++_)c[_]=r.charCodeAt(_);r=c}Ee.chmod(l,146|a);var d=Ee.open(l,577);Ee.write(d,r,0,r.length,0,i),Ee.close(d),Ee.chmod(l,a)}return l},createDevice(e,t,r,n){var s=oe.join2("string"==typeof e?e:Ee.getPath(e),t),i=qe(!!r,!!n);Ee.createDevice.major||(Ee.createDevice.major=64);var o=Ee.makedev(Ee.createDevice.major++,0);return Ee.registerDevice(o,{open(e){e.seekable=!1},close(e){n&&n.buffer&&n.buffer.length&&n(10)},read(e,t,n,s,i){for(var o=0,a=0;a<s;a++){var l;try{l=r()}catch(e){throw new Ee.ErrnoError(29)}if(void 0===l&&0===o)throw new Ee.ErrnoError(6);if(null==l)break;o++,t[n+a]=l}return o&&(e.node.timestamp=Date.now()),o},write(e,t,r,s,i){for(var o=0;o<s;o++)try{n(t[r+o])}catch(e){throw new Ee.ErrnoError(29)}return s&&(e.node.timestamp=Date.now()),o}}),Ee.mkdev(s,i,o)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!p)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=pe(p(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new Ee.ErrnoError(29)}},createLazyFile(e,t,r,n,s){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,r=e/this.chunkSize|0;return this.getter(r)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+r+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),s=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576;s||(o=n);var a=this;a.setDataGetter((e=>{var t=e*o,s=(e+1)*o-1;if(s=Math.min(s,n-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>n-1)throw new Error("only "+n+" bytes available! programmer error!");var s=new XMLHttpRequest;if(s.open("GET",r,!1),n!==o&&s.setRequestHeader("Range","bytes="+e+"-"+t),s.responseType="arraybuffer",s.overrideMimeType&&s.overrideMimeType("text/plain; charset=x-user-defined"),s.send(null),!(s.status>=200&&s.status<300||304===s.status))throw new Error("Couldn't load "+r+". Status: "+s.status);return void 0!==s.response?new Uint8Array(s.response||[]):pe(s.responseText||"",!0)})(t,s)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!i&&n||(o=n=1,n=this.getter(0).length,o=n,w("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var o=new i;Object.defineProperties(o,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var a={isDevice:!1,contents:o}}else a={isDevice:!1,url:r};var l=Ee.createFile(e,t,a,n,s);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var c={};function _(e,t,r,n,s){var i=e.node.contents;if(s>=i.length)return 0;var o=Math.min(i.length-s,n);if(O(o>=0),i.slice)for(var a=0;a<o;a++)t[r+a]=i[s+a];else for(a=0;a<o;a++)t[r+a]=i.get(s+a);return o}return Object.keys(l.stream_ops).forEach((e=>{var t=l.stream_ops[e];c[e]=function(){return Ee.forceLoadFile(l),t.apply(null,arguments)}})),c.read=(e,t,r,n,s)=>(Ee.forceLoadFile(l),_(e,t,r,n,s)),c.mmap=(e,t,r,n,s)=>{Ee.forceLoadFile(l);var i=ge(t);if(!i)throw new Ee.ErrnoError(48);return _(e,S,i,t,r),{ptr:i,allocated:!0}},l.stream_ops=c,l},absolutePath(){G("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){G("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){G("FS.createLink has been removed; use FS.symlink instead")},joinPath(){G("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){G("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){G("FS.standardizePath has been removed; use PATH.normalize instead")}},Se={DEFAULT_POLLMASK:5,calculateAt(e,t,r){if(oe.isAbs(t))return t;var n;if(n=-100===e?Ee.cwd():Se.getStreamFromFD(e).path,0==t.length){if(!r)throw new Ee.ErrnoError(44);return n}return oe.join2(n,t)},doStat(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&oe.normalize(t)!==oe.normalize(Ee.getPath(e.node)))return-54;throw e}T[r>>2]=n.dev,T[r+4>>2]=n.mode,I[r+8>>2]=n.nlink,T[r+12>>2]=n.uid,T[r+16>>2]=n.gid,T[r+20>>2]=n.rdev,k[r+24>>3]=BigInt(n.size),T[r+32>>2]=4096,T[r+36>>2]=n.blocks;var s=n.atime.getTime(),i=n.mtime.getTime(),o=n.ctime.getTime();return k[r+40>>3]=BigInt(Math.floor(s/1e3)),I[r+48>>2]=s%1e3*1e3,k[r+56>>3]=BigInt(Math.floor(i/1e3)),I[r+64>>2]=i%1e3*1e3,k[r+72>>3]=BigInt(Math.floor(o/1e3)),I[r+80>>2]=o%1e3*1e3,k[r+88>>3]=BigInt(n.ino),0},doMsync(e,t,r,n,s){if(!Ee.isFile(t.node.mode))throw new Ee.ErrnoError(43);if(2&n)return 0;var i=A.slice(e,e+r);Ee.msync(t,i,s,r,n)},varargs:void 0,get(){O(null!=Se.varargs);var e=T[+Se.varargs>>2];return Se.varargs+=4,e},getp:()=>Se.get(),getStr(e){var t=((e,t)=>(O("number"==typeof e),e?_e(A,e,void 0):""))(e);return t},getStreamFromFD:e=>Ee.getStreamChecked(e)},Ae=e=>e<-9007199254740992||e>9007199254740992?NaN:Number(e),xe=(e,t,r)=>(O("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),fe(e,A,t,r)),Te=e=>I[e>>2]+4294967296*T[e+4>>2],Ie=[0,31,60,91,121,152,182,213,244,274,305,335],ke=[0,31,59,90,120,151,181,212,243,273,304,334],Fe=e=>{var t=de(e)+1,r=je(t);return r&&xe(e,r,t),r};me=()=>performance.now();var Oe=e=>{var t=q.buffer,r=(e-t.byteLength+65535)/65536;try{return q.grow(r),P(),1}catch(r){E(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${r}`)}},Pe={},Le=()=>{if(!Le.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var t in Pe)void 0===Pe[t]?delete e[t]:e[t]=Pe[t];var r=[];for(var t in e)r.push(`${t}=${e[t]}`);Le.strings=r}return Le.strings},Ce=function(e,t,r,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Ee.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n};Object.defineProperties(Ce.prototype,{read:{get:function(){return!(365&~this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return!(146&~this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return Ee.isDir(this.mode)}},isDevice:{get:function(){return Ee.isChrdev(this.mode)}}}),Ee.FSNode=Ce,Ee.createPreloadedFile=(e,t,r,n,s,i,o,a,l,c)=>{var _=t?le.resolve(oe.join2(e,t)):e,u=W(`cp ${_}`);function d(r){function d(r){c&&c(),a||((e,t,r,n,s,i)=>{Ee.createDataFile(e,t,r,n,s,i)})(e,t,r,n,s,l),i&&i(),Q(u)}((e,t,r,n)=>{"undefined"!=typeof Browser&&Browser.init();var s=!1;return ye.forEach((i=>{s||i.canHandle(t)&&(i.handle(e,t,r,n),s=!0)})),s})(r,_,d,(()=>{o&&o(),Q(u)}))||d(r)}H(u),"string"==typeof r?((e,t,r,n)=>{var s=W(`al ${e}`);m(e,(t=>{O(t,`Loading data file "${e}" failed (no arrayBuffer).`),d(new Uint8Array(t)),s&&Q(s)}),(t=>{if(!r)throw`Loading data file "${e}" failed.`;r()})),s&&H(s)})(r,0,o):d(r)},Ee.staticInit(),we={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135};var Ne,De={__syscall_chmod:function(e,t){try{return e=Se.getStr(e),Ee.chmod(e,t),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_faccessat:function(e,t,r,n){try{if(t=Se.getStr(t),O(0===n),t=Se.calculateAt(e,t),-8&r)return-28;var s=Ee.lookupPath(t,{follow:!0}).node;if(!s)return-44;var i="";return 4&r&&(i+="r"),2&r&&(i+="w"),1&r&&(i+="x"),i&&Ee.nodePermissions(s,i)?-2:0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fchmod:function(e,t){try{return Ee.fchmod(e,t),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fchown32:function(e,t,r){try{return Ee.fchown(e,t,r),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fcntl64:function(e,t,r){Se.varargs=r;try{var n=Se.getStreamFromFD(e);switch(t){case 0:if((s=Se.get())<0)return-28;for(;Ee.streams[s];)s++;return Ee.createStream(n,s).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var s=Se.get();return n.flags|=s,0;case 5:return s=Se.getp(),x[s+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return 28,T[Me()>>2]=28,-1}}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fstat64:function(e,t){try{var r=Se.getStreamFromFD(e);return Se.doStat(Ee.stat,r.path,t)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ftruncate64:function(e,t){t=Ae(t);try{return isNaN(t)?61:(Ee.ftruncate(e,t),0)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_getcwd:function(e,t){try{if(0===t)return-28;var r=Ee.cwd(),n=de(r)+1;return t<n?-68:(xe(r,e,t),n)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ioctl:function(e,t,r){Se.varargs=r;try{var n=Se.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return n.tty?0:-59;case 21505:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcgets){var s=n.tty.ops.ioctl_tcgets(n),i=Se.getp();T[i>>2]=s.c_iflag||0,T[i+4>>2]=s.c_oflag||0,T[i+8>>2]=s.c_cflag||0,T[i+12>>2]=s.c_lflag||0;for(var o=0;o<32;o++)S[i+o+17|0]=s.c_cc[o]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!n.tty)return-59;if(n.tty.ops.ioctl_tcsets){i=Se.getp();var a=T[i>>2],l=T[i+4>>2],c=T[i+8>>2],_=T[i+12>>2],u=[];for(o=0;o<32;o++)u.push(S[i+o+17|0]);return n.tty.ops.ioctl_tcsets(n.tty,t,{c_iflag:a,c_oflag:l,c_cflag:c,c_lflag:_,c_cc:u})}return 0;case 21519:return n.tty?(i=Se.getp(),T[i>>2]=0,0):-59;case 21520:return n.tty?-28:-59;case 21531:return i=Se.getp(),Ee.ioctl(n,t,i);case 21523:if(!n.tty)return-59;if(n.tty.ops.ioctl_tiocgwinsz){var d=n.tty.ops.ioctl_tiocgwinsz(n.tty);i=Se.getp(),x[i>>1]=d[0],x[i+2>>1]=d[1]}return 0;default:return-28}}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_lstat64:function(e,t){try{return e=Se.getStr(e),Se.doStat(Ee.lstat,e,t)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_mkdirat:function(e,t,r){try{return t=Se.getStr(t),t=Se.calculateAt(e,t),"/"===(t=oe.normalize(t))[t.length-1]&&(t=t.substr(0,t.length-1)),Ee.mkdir(t,r,0),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_newfstatat:function(e,t,r,n){try{t=Se.getStr(t);var s=256&n,i=4096&n;return O(!(n&=-6401),`unknown flags in __syscall_newfstatat: ${n}`),t=Se.calculateAt(e,t,i),Se.doStat(s?Ee.lstat:Ee.stat,t,r)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_openat:function(e,t,r,n){Se.varargs=n;try{t=Se.getStr(t),t=Se.calculateAt(e,t);var s=n?Se.get():0;return Ee.open(t,r,s).fd}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_readlinkat:function(e,t,r,n){try{if(t=Se.getStr(t),t=Se.calculateAt(e,t),n<=0)return-28;var s=Ee.readlink(t),i=Math.min(n,de(s)),o=S[r+i];return xe(s,r,n+1),S[r+i]=o,i}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_rmdir:function(e){try{return e=Se.getStr(e),Ee.rmdir(e),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_stat64:function(e,t){try{return e=Se.getStr(e),Se.doStat(Ee.stat,e,t)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_unlinkat:function(e,t,r){try{return t=Se.getStr(t),t=Se.calculateAt(e,t),0===r?Ee.unlink(t):512===r?Ee.rmdir(t):G("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_utimensat:function(e,t,r,n){try{if(t=Se.getStr(t),O(0===n),t=Se.calculateAt(e,t,!0),r){var s=Te(r),i=T[r+8>>2];o=1e3*s+i/1e6,a=1e3*(s=Te(r+=16))+(i=T[r+8>>2])/1e6}else var o=Date.now(),a=o;return Ee.utime(t,o,a),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},_emscripten_get_now_is_monotonic:()=>!0,_localtime_js:function(e,t){e=Ae(e);var r=new Date(1e3*e);T[t>>2]=r.getSeconds(),T[t+4>>2]=r.getMinutes(),T[t+8>>2]=r.getHours(),T[t+12>>2]=r.getDate(),T[t+16>>2]=r.getMonth(),T[t+20>>2]=r.getFullYear()-1900,T[t+24>>2]=r.getDay();var n=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?ke:Ie)[e.getMonth()]+e.getDate()-1})(r);T[t+28>>2]=n,T[t+36>>2]=-60*r.getTimezoneOffset();var s=new Date(r.getFullYear(),0,1),i=new Date(r.getFullYear(),6,1).getTimezoneOffset(),o=s.getTimezoneOffset(),a=0|(i!=o&&r.getTimezoneOffset()==Math.min(o,i));T[t+32>>2]=a},_mmap_js:function(e,t,r,n,s,i,o){s=Ae(s);try{if(isNaN(s))return 61;var a=Se.getStreamFromFD(n),l=Ee.mmap(a,e,s,t,r),c=l.ptr;return T[i>>2]=l.allocated,I[o>>2]=c,0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},_munmap_js:function(e,t,r,n,s,i){i=Ae(i);try{if(isNaN(i))return 61;var o=Se.getStreamFromFD(s);2&r&&Se.doMsync(e,o,t,n,i),Ee.munmap(o)}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return-e.errno}},_tzset_js:(e,t,r)=>{var n=(new Date).getFullYear(),s=new Date(n,0,1),i=new Date(n,6,1),o=s.getTimezoneOffset(),a=i.getTimezoneOffset(),l=Math.max(o,a);function c(e){var t=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}I[e>>2]=60*l,T[t>>2]=Number(o!=a);var _=c(s),u=c(i),d=Fe(_),f=Fe(u);a<o?(I[r>>2]=d,I[r+4>>2]=f):(I[r>>2]=f,I[r+4>>2]=d)},emscripten_date_now:()=>Date.now(),emscripten_get_now:me,emscripten_memcpy_js:(e,t,r)=>A.copyWithin(e,t,t+r),emscripten_resize_heap:e=>{var t=A.length;O((e>>>=0)>t);var r=2147483648;if(e>r)return E(`Cannot enlarge memory, requested ${e} bytes, but the limit is 2147483648 bytes!`),!1;for(var n,s=1;s<=4;s*=2){var i=t*(1+.2/s);i=Math.min(i,e+100663296);var o=Math.min(r,(n=Math.max(e,i))+(65536-n%65536)%65536);if(Oe(o))return!0}return E(`Failed to grow the heap from ${t} bytes to ${o} bytes, not enough memory!`),!1},environ_get:(e,t)=>{var r=0;return Le().forEach(((n,s)=>{var i=t+r;I[e+4*s>>2]=i,((e,t)=>{for(var r=0;r<e.length;++r)O(e.charCodeAt(r)===(255&e.charCodeAt(r))),S[0|t++]=e.charCodeAt(r);S[0|t]=0})(n,i),r+=n.length+1})),0},environ_sizes_get:(e,t)=>{var r=Le();I[e>>2]=r.length;var n=0;return r.forEach((e=>n+=e.length+1)),I[t>>2]=n,0},fd_close:function(e){try{var t=Se.getStreamFromFD(e);return Ee.close(t),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},fd_fdstat_get:function(e,t){try{var r=Se.getStreamFromFD(e),n=r.tty?2:Ee.isDir(r.mode)?3:Ee.isLink(r.mode)?7:4;return S[0|t]=n,x[t+2>>1]=0,k[t+8>>3]=BigInt(0),k[t+16>>3]=BigInt(0),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},fd_read:function(e,t,r,n){try{var s=((e,t,r,n)=>{for(var s=0,i=0;i<r;i++){var o=I[t>>2],a=I[t+4>>2];t+=8;var l=Ee.read(e,S,o,a,n);if(l<0)return-1;if(s+=l,l<a)break;void 0!==n&&(n+=l)}return s})(Se.getStreamFromFD(e),t,r);return I[n>>2]=s,0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},fd_seek:function(e,t,r,n){t=Ae(t);try{if(isNaN(t))return 61;var s=Se.getStreamFromFD(e);return Ee.llseek(s,t,r),k[n>>3]=BigInt(s.position),s.getdents&&0===t&&0===r&&(s.getdents=null),0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},fd_sync:function(e){try{var t=Se.getStreamFromFD(e);return t.stream_ops&&t.stream_ops.fsync?t.stream_ops.fsync(t):0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},fd_write:function(e,t,r,n){try{var s=((e,t,r,n)=>{for(var s=0,i=0;i<r;i++){var o=I[t>>2],a=I[t+4>>2];t+=8;var l=Ee.write(e,S,o,a,n);if(l<0)return-1;s+=l,void 0!==n&&(n+=l)}return s})(Se.getStreamFromFD(e),t,r);return I[n>>2]=s,0}catch(e){if(void 0===Ee||"ErrnoError"!==e.name)throw e;return e.errno}},memory:q},Re=function(){var e={env:De,wasi_snapshot_preview1:De};function t(e,t){var r;return r=(Re=e.exports).__wasm_call_ctors,D.unshift(r),Q("wasm-instantiate"),Re}H("wasm-instantiate");var r,n,o,a,l=i;if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){E(`Module.instantiateWasm callback failed with error: ${e}`),s(e)}return(r=y,n=V,o=e,a=function(e){O(i===l,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),l=null,t(e.instance)},r||"function"!=typeof WebAssembly.instantiateStreaming||K(n)||"function"!=typeof fetch?X(n,o,a):fetch(n,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,o).then(a,(function(e){return E(`wasm streaming compile failed: ${e}`),E("falling back to ArrayBuffer instantiation"),X(n,o,a)}))))).catch(s),{}}(),Me=(J("__wasm_call_ctors"),i._sqlite3_status64=J("sqlite3_status64"),i._sqlite3_status=J("sqlite3_status"),i._sqlite3_db_status=J("sqlite3_db_status"),i._sqlite3_msize=J("sqlite3_msize"),i._sqlite3_vfs_find=J("sqlite3_vfs_find"),i._sqlite3_initialize=J("sqlite3_initialize"),i._sqlite3_vfs_register=J("sqlite3_vfs_register"),i._sqlite3_vfs_unregister=J("sqlite3_vfs_unregister"),i._sqlite3_malloc=J("sqlite3_malloc"),i._sqlite3_malloc64=J("sqlite3_malloc64"),i._sqlite3_free=J("sqlite3_free"),i._sqlite3_realloc=J("sqlite3_realloc"),i._sqlite3_realloc64=J("sqlite3_realloc64"),i._sqlite3_value_int64=J("sqlite3_value_int64"),i._sqlite3_value_double=J("sqlite3_value_double"),i._sqlite3_value_text=J("sqlite3_value_text"),i._sqlite3_randomness=J("sqlite3_randomness"),i._sqlite3_stricmp=J("sqlite3_stricmp"),i._sqlite3_strnicmp=J("sqlite3_strnicmp"),J("__errno_location")),je=(i._sqlite3_serialize=J("sqlite3_serialize"),i._sqlite3_prepare_v2=J("sqlite3_prepare_v2"),i._sqlite3_step=J("sqlite3_step"),i._sqlite3_column_int64=J("sqlite3_column_int64"),i._sqlite3_column_int=J("sqlite3_column_int"),i._sqlite3_finalize=J("sqlite3_finalize"),i._sqlite3_file_control=J("sqlite3_file_control"),i._sqlite3_reset=J("sqlite3_reset"),i._sqlite3_value_int=J("sqlite3_value_int"),i._sqlite3_deserialize=J("sqlite3_deserialize"),i._sqlite3_clear_bindings=J("sqlite3_clear_bindings"),i._sqlite3_value_blob=J("sqlite3_value_blob"),i._sqlite3_value_bytes=J("sqlite3_value_bytes"),i._sqlite3_value_subtype=J("sqlite3_value_subtype"),i._sqlite3_value_pointer=J("sqlite3_value_pointer"),i._sqlite3_value_type=J("sqlite3_value_type"),i._sqlite3_value_nochange=J("sqlite3_value_nochange"),i._sqlite3_value_frombind=J("sqlite3_value_frombind"),i._sqlite3_value_dup=J("sqlite3_value_dup"),i._sqlite3_value_free=J("sqlite3_value_free"),i._sqlite3_result_blob=J("sqlite3_result_blob"),i._sqlite3_result_error_toobig=J("sqlite3_result_error_toobig"),i._sqlite3_result_error_nomem=J("sqlite3_result_error_nomem"),i._sqlite3_result_double=J("sqlite3_result_double"),i._sqlite3_result_error=J("sqlite3_result_error"),i._sqlite3_result_int=J("sqlite3_result_int"),i._sqlite3_result_int64=J("sqlite3_result_int64"),i._sqlite3_result_null=J("sqlite3_result_null"),i._sqlite3_result_pointer=J("sqlite3_result_pointer"),i._sqlite3_result_subtype=J("sqlite3_result_subtype"),i._sqlite3_result_text=J("sqlite3_result_text"),i._sqlite3_result_zeroblob=J("sqlite3_result_zeroblob"),i._sqlite3_result_zeroblob64=J("sqlite3_result_zeroblob64"),i._sqlite3_result_error_code=J("sqlite3_result_error_code"),i._sqlite3_sql=J("sqlite3_sql"),i._sqlite3_user_data=J("sqlite3_user_data"),i._sqlite3_context_db_handle=J("sqlite3_context_db_handle"),i._sqlite3_vtab_nochange=J("sqlite3_vtab_nochange"),i._sqlite3_vtab_in_first=J("sqlite3_vtab_in_first"),i._sqlite3_vtab_in_next=J("sqlite3_vtab_in_next"),i._sqlite3_aggregate_context=J("sqlite3_aggregate_context"),i._sqlite3_get_auxdata=J("sqlite3_get_auxdata"),i._sqlite3_set_auxdata=J("sqlite3_set_auxdata"),i._sqlite3_column_count=J("sqlite3_column_count"),i._sqlite3_data_count=J("sqlite3_data_count"),i._sqlite3_column_blob=J("sqlite3_column_blob"),i._sqlite3_column_bytes=J("sqlite3_column_bytes"),i._sqlite3_column_double=J("sqlite3_column_double"),i._sqlite3_column_text=J("sqlite3_column_text"),i._sqlite3_column_value=J("sqlite3_column_value"),i._sqlite3_column_type=J("sqlite3_column_type"),i._sqlite3_column_name=J("sqlite3_column_name"),i._sqlite3_bind_blob=J("sqlite3_bind_blob"),i._sqlite3_bind_double=J("sqlite3_bind_double"),i._sqlite3_bind_int=J("sqlite3_bind_int"),i._sqlite3_bind_int64=J("sqlite3_bind_int64"),i._sqlite3_bind_null=J("sqlite3_bind_null"),i._sqlite3_bind_pointer=J("sqlite3_bind_pointer"),i._sqlite3_bind_text=J("sqlite3_bind_text"),i._sqlite3_bind_parameter_count=J("sqlite3_bind_parameter_count"),i._sqlite3_bind_parameter_index=J("sqlite3_bind_parameter_index"),i._sqlite3_db_handle=J("sqlite3_db_handle"),i._sqlite3_stmt_readonly=J("sqlite3_stmt_readonly"),i._sqlite3_stmt_isexplain=J("sqlite3_stmt_isexplain"),i._sqlite3_stmt_status=J("sqlite3_stmt_status"),i._sqlite3_expanded_sql=J("sqlite3_expanded_sql"),i._sqlite3_preupdate_old=J("sqlite3_preupdate_old"),i._sqlite3_preupdate_count=J("sqlite3_preupdate_count"),i._sqlite3_preupdate_depth=J("sqlite3_preupdate_depth"),i._sqlite3_preupdate_blobwrite=J("sqlite3_preupdate_blobwrite"),i._sqlite3_preupdate_new=J("sqlite3_preupdate_new"),i._sqlite3_value_numeric_type=J("sqlite3_value_numeric_type"),i._sqlite3_errmsg=J("sqlite3_errmsg"),i._sqlite3_set_authorizer=J("sqlite3_set_authorizer"),i._sqlite3_strglob=J("sqlite3_strglob"),i._sqlite3_strlike=J("sqlite3_strlike"),i._sqlite3_exec=J("sqlite3_exec"),i._sqlite3_auto_extension=J("sqlite3_auto_extension"),i._sqlite3_cancel_auto_extension=J("sqlite3_cancel_auto_extension"),i._sqlite3_reset_auto_extension=J("sqlite3_reset_auto_extension"),i._sqlite3_prepare_v3=J("sqlite3_prepare_v3"),i._sqlite3_create_module=J("sqlite3_create_module"),i._sqlite3_create_module_v2=J("sqlite3_create_module_v2"),i._sqlite3_drop_modules=J("sqlite3_drop_modules"),i._sqlite3_declare_vtab=J("sqlite3_declare_vtab"),i._sqlite3_vtab_on_conflict=J("sqlite3_vtab_on_conflict"),i._sqlite3_vtab_collation=J("sqlite3_vtab_collation"),i._sqlite3_vtab_in=J("sqlite3_vtab_in"),i._sqlite3_vtab_rhs_value=J("sqlite3_vtab_rhs_value"),i._sqlite3_vtab_distinct=J("sqlite3_vtab_distinct"),i._sqlite3_keyword_name=J("sqlite3_keyword_name"),i._sqlite3_keyword_count=J("sqlite3_keyword_count"),i._sqlite3_keyword_check=J("sqlite3_keyword_check"),i._sqlite3_complete=J("sqlite3_complete"),i._sqlite3_libversion=J("sqlite3_libversion"),i._sqlite3_libversion_number=J("sqlite3_libversion_number"),i._sqlite3_shutdown=J("sqlite3_shutdown"),i._sqlite3_last_insert_rowid=J("sqlite3_last_insert_rowid"),i._sqlite3_set_last_insert_rowid=J("sqlite3_set_last_insert_rowid"),i._sqlite3_changes64=J("sqlite3_changes64"),i._sqlite3_changes=J("sqlite3_changes"),i._sqlite3_total_changes64=J("sqlite3_total_changes64"),i._sqlite3_total_changes=J("sqlite3_total_changes"),i._sqlite3_txn_state=J("sqlite3_txn_state"),i._sqlite3_close_v2=J("sqlite3_close_v2"),i._sqlite3_busy_handler=J("sqlite3_busy_handler"),i._sqlite3_progress_handler=J("sqlite3_progress_handler"),i._sqlite3_busy_timeout=J("sqlite3_busy_timeout"),i._sqlite3_create_function=J("sqlite3_create_function"),i._sqlite3_create_function_v2=J("sqlite3_create_function_v2"),i._sqlite3_create_window_function=J("sqlite3_create_window_function"),i._sqlite3_overload_function=J("sqlite3_overload_function"),i._sqlite3_trace_v2=J("sqlite3_trace_v2"),i._sqlite3_commit_hook=J("sqlite3_commit_hook"),i._sqlite3_update_hook=J("sqlite3_update_hook"),i._sqlite3_rollback_hook=J("sqlite3_rollback_hook"),i._sqlite3_preupdate_hook=J("sqlite3_preupdate_hook"),i._sqlite3_error_offset=J("sqlite3_error_offset"),i._sqlite3_errcode=J("sqlite3_errcode"),i._sqlite3_extended_errcode=J("sqlite3_extended_errcode"),i._sqlite3_errstr=J("sqlite3_errstr"),i._sqlite3_limit=J("sqlite3_limit"),i._sqlite3_open=J("sqlite3_open"),i._sqlite3_open_v2=J("sqlite3_open_v2"),i._sqlite3_create_collation=J("sqlite3_create_collation"),i._sqlite3_create_collation_v2=J("sqlite3_create_collation_v2"),i._sqlite3_collation_needed=J("sqlite3_collation_needed"),i._sqlite3_table_column_metadata=J("sqlite3_table_column_metadata"),i._sqlite3_extended_result_codes=J("sqlite3_extended_result_codes"),i._sqlite3_uri_parameter=J("sqlite3_uri_parameter"),i._sqlite3_uri_key=J("sqlite3_uri_key"),i._sqlite3_uri_boolean=J("sqlite3_uri_boolean"),i._sqlite3_uri_int64=J("sqlite3_uri_int64"),i._sqlite3_db_name=J("sqlite3_db_name"),i._sqlite3_db_filename=J("sqlite3_db_filename"),i._sqlite3_compileoption_used=J("sqlite3_compileoption_used"),i._sqlite3_compileoption_get=J("sqlite3_compileoption_get"),i._sqlite3session_diff=J("sqlite3session_diff"),i._sqlite3session_attach=J("sqlite3session_attach"),i._sqlite3session_create=J("sqlite3session_create"),i._sqlite3session_delete=J("sqlite3session_delete"),i._sqlite3session_table_filter=J("sqlite3session_table_filter"),i._sqlite3session_changeset=J("sqlite3session_changeset"),i._sqlite3session_changeset_strm=J("sqlite3session_changeset_strm"),i._sqlite3session_patchset_strm=J("sqlite3session_patchset_strm"),i._sqlite3session_patchset=J("sqlite3session_patchset"),i._sqlite3session_enable=J("sqlite3session_enable"),i._sqlite3session_indirect=J("sqlite3session_indirect"),i._sqlite3session_isempty=J("sqlite3session_isempty"),i._sqlite3session_memory_used=J("sqlite3session_memory_used"),i._sqlite3session_object_config=J("sqlite3session_object_config"),i._sqlite3session_changeset_size=J("sqlite3session_changeset_size"),i._sqlite3changeset_start=J("sqlite3changeset_start"),i._sqlite3changeset_start_v2=J("sqlite3changeset_start_v2"),i._sqlite3changeset_start_strm=J("sqlite3changeset_start_strm"),i._sqlite3changeset_start_v2_strm=J("sqlite3changeset_start_v2_strm"),i._sqlite3changeset_next=J("sqlite3changeset_next"),i._sqlite3changeset_op=J("sqlite3changeset_op"),i._sqlite3changeset_pk=J("sqlite3changeset_pk"),i._sqlite3changeset_old=J("sqlite3changeset_old"),i._sqlite3changeset_new=J("sqlite3changeset_new"),i._sqlite3changeset_conflict=J("sqlite3changeset_conflict"),i._sqlite3changeset_fk_conflicts=J("sqlite3changeset_fk_conflicts"),i._sqlite3changeset_finalize=J("sqlite3changeset_finalize"),i._sqlite3changeset_invert=J("sqlite3changeset_invert"),i._sqlite3changeset_invert_strm=J("sqlite3changeset_invert_strm"),i._sqlite3changeset_apply_v2=J("sqlite3changeset_apply_v2"),i._sqlite3changeset_apply=J("sqlite3changeset_apply"),i._sqlite3changeset_apply_v2_strm=J("sqlite3changeset_apply_v2_strm"),i._sqlite3changeset_apply_strm=J("sqlite3changeset_apply_strm"),i._sqlite3changegroup_new=J("sqlite3changegroup_new"),i._sqlite3changegroup_add=J("sqlite3changegroup_add"),i._sqlite3changegroup_output=J("sqlite3changegroup_output"),i._sqlite3changegroup_add_strm=J("sqlite3changegroup_add_strm"),i._sqlite3changegroup_output_strm=J("sqlite3changegroup_output_strm"),i._sqlite3changegroup_delete=J("sqlite3changegroup_delete"),i._sqlite3changeset_concat=J("sqlite3changeset_concat"),i._sqlite3changeset_concat_strm=J("sqlite3changeset_concat_strm"),i._sqlite3session_config=J("sqlite3session_config"),i._sqlite3_sourceid=J("sqlite3_sourceid"),i._sqlite3_wasm_pstack_ptr=J("sqlite3_wasm_pstack_ptr"),i._sqlite3_wasm_pstack_restore=J("sqlite3_wasm_pstack_restore"),i._sqlite3_wasm_pstack_alloc=J("sqlite3_wasm_pstack_alloc"),i._sqlite3_wasm_pstack_remaining=J("sqlite3_wasm_pstack_remaining"),i._sqlite3_wasm_pstack_quota=J("sqlite3_wasm_pstack_quota"),i._sqlite3_wasm_db_error=J("sqlite3_wasm_db_error"),i._sqlite3_wasm_test_struct=J("sqlite3_wasm_test_struct"),i._sqlite3_wasm_enum_json=J("sqlite3_wasm_enum_json"),i._sqlite3_wasm_vfs_unlink=J("sqlite3_wasm_vfs_unlink"),i._sqlite3_wasm_db_vfs=J("sqlite3_wasm_db_vfs"),i._sqlite3_wasm_db_reset=J("sqlite3_wasm_db_reset"),i._sqlite3_wasm_db_export_chunked=J("sqlite3_wasm_db_export_chunked"),i._sqlite3_wasm_db_serialize=J("sqlite3_wasm_db_serialize"),i._sqlite3_wasm_vfs_create_file=J("sqlite3_wasm_vfs_create_file"),i._sqlite3_wasm_posix_create_file=J("sqlite3_wasm_posix_create_file"),i._sqlite3_wasm_kvvfsMakeKeyOnPstack=J("sqlite3_wasm_kvvfsMakeKeyOnPstack"),i._sqlite3_wasm_kvvfs_methods=J("sqlite3_wasm_kvvfs_methods"),i._sqlite3_wasm_vtab_config=J("sqlite3_wasm_vtab_config"),i._sqlite3_wasm_db_config_ip=J("sqlite3_wasm_db_config_ip"),i._sqlite3_wasm_db_config_pii=J("sqlite3_wasm_db_config_pii"),i._sqlite3_wasm_db_config_s=J("sqlite3_wasm_db_config_s"),i._sqlite3_wasm_config_i=J("sqlite3_wasm_config_i"),i._sqlite3_wasm_config_ii=J("sqlite3_wasm_config_ii"),i._sqlite3_wasm_config_j=J("sqlite3_wasm_config_j"),i._sqlite3_wasm_init_wasmfs=J("sqlite3_wasm_init_wasmfs"),i._sqlite3_wasm_test_intptr=J("sqlite3_wasm_test_intptr"),i._sqlite3_wasm_test_voidptr=J("sqlite3_wasm_test_voidptr"),i._sqlite3_wasm_test_int64_max=J("sqlite3_wasm_test_int64_max"),i._sqlite3_wasm_test_int64_min=J("sqlite3_wasm_test_int64_min"),i._sqlite3_wasm_test_int64_times2=J("sqlite3_wasm_test_int64_times2"),i._sqlite3_wasm_test_int64_minmax=J("sqlite3_wasm_test_int64_minmax"),i._sqlite3_wasm_test_int64ptr=J("sqlite3_wasm_test_int64ptr"),i._sqlite3_wasm_test_stack_overflow=J("sqlite3_wasm_test_stack_overflow"),i._sqlite3_wasm_test_str_hello=J("sqlite3_wasm_test_str_hello"),i._sqlite3_wasm_SQLTester_strglob=J("sqlite3_wasm_SQLTester_strglob"),i._malloc=J("malloc")),Ue=(i._free=J("free"),i._realloc=J("realloc"),i._fflush=J("fflush")),Be=J("emscripten_builtin_memalign"),ze=()=>(ze=Re.emscripten_stack_init)(),We=()=>(We=Re.emscripten_stack_get_end)();function He(){function e(){Ne||(Ne=!0,i.calledRun=!0,F||(O(!M),M=!0,C(),i.noFSInit||Ee.init.initialized||Ee.init(),Ee.ignorePermissions=!1,he.init(),ne(D),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),O(!i._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(C(),i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),R.unshift(e);var e;ne(R)}()))}var t;j>0||(ze(),O(!(3&(t=We()))),0==t&&(t+=4),I[t>>2]=34821223,I[t+4>>2]=2310721022,I[0]=1668509029,function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),N.unshift(e);var e;ne(N)}(),j>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e(),C()))}if(J("stackSave"),J("stackRestore"),J("stackAlloc"),i.wasmMemory=q,["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","exitJS","arraySum","addDays","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","getHostByName","getCallstack","emscriptenLog","convertPCtoSourceLocation","readEmAsmArgs","jstoi_q","jstoi_s","listenOnce","autoResumeAudioContext","getDynCaller","dynCall","handleException","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","safeSetTimeout","asmjsMangle","handleAllocatorInit","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","getCFunc","ccall","cwrap","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToUTF8OnStack","writeArrayToMemory","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","findCanvasEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","stackTrace","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","setMainLoop","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","heapAccessShiftForWebGLHeap","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","__glGenObject","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","SDL_unicode","SDL_ttfContext","SDL_audio","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory"].forEach((function(e){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){var t="`"+e+"` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line",r=e;r.startsWith("_")||(r="$"+e),t+=" (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='"+r+"')",ee(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ie(t)}}),re(e)})),["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","FS_createFolder","FS_createPath","FS_createLazyFile","FS_createLink","FS_createDevice","FS_readFile","out","err","callMain","abort","keepRuntimeAlive","wasmExports","stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0","writeStackCookie","checkStackCookie","readI53FromI64","MAX_INT53","MIN_INT53","bigintToI53Checked","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","ERRNO_CODES","ERRNO_MESSAGES","setErrNo","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","UNWIND_CACHE","readEmAsmArgsArray","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","freeTableIndexes","functionsInTableMap","setValue","getValue","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","UTF8ToString","stringToUTF8Array","stringToUTF8","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToNewUTF8","JSEvents","specialHTMLTargets","currentFullscreenStrategy","restoreOldWindowedStyle","demangle","demangleAll","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","wget","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS","FS_createDataFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","emscripten_webgl_power_preferences","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack"].forEach(re),B=function e(){Ne||He(),Ne||(B=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();return He(),i.postRun||(i.postRun=[]),i.postRun.push((function(e){if(globalThis.sqlite3ApiBootstrap=function t(r=globalThis.sqlite3ApiConfig||t.defaultConfig){if(t.sqlite3)return console.warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),t.sqlite3;const n=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:void 0!==e?!!e.HEAPU64:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},r||{});Object.assign(n,{allocExportName:n.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:n.useStdAlloc?"free":"sqlite3_free",reallocExportName:n.useStdAlloc?"realloc":"sqlite3_realloc"},n),["exports","memory","wasmfsOpfsDir"].forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e]())}));const s=Object.create(null),i=Object.create(null),o=e=>s.sqlite3_js_rc_str&&s.sqlite3_js_rc_str(e)||"Unknown result code #"+e;class a extends Error{constructor(...e){let t;if(e.length)if("number"==typeof(r=e[0])&&r===(0|r))if(t=e[0],1===e.length)super(o(e[0]));else{const r=o(t);"object"==typeof e[1]?super(r,e[1]):(e[0]=r+":",super(e.join(" ")))}else 2===e.length&&"object"==typeof e[1]?super(...e):super(e.join(" "));var r;this.resultCode=t||s.SQLITE_ERROR,this.name="SQLite3Error"}}a.toss=(...e)=>{throw new a(...e)};const l=a.toss;n.wasmfsOpfsDir&&!/^\/[^/]+$/.test(n.wasmfsOpfsDir)&&l("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const c=e=>"bigint"!=typeof e&&!!(e===(0|e)&&e<=2147483647&&e>=-2147483648),_="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,u=e=>e.buffer instanceof _,d=(e,t,r)=>u(e)?e.slice(t,r):e.subarray(t,r),f=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),p=e=>e&&(e instanceof Uint8Array||e instanceof Int8Array||e instanceof ArrayBuffer),m=e=>f(e)||l("Value is not of a supported TypedArray type."),h=new TextDecoder("utf-8"),g=function(e,t,r){return h.decode(d(e,t,r))},b=function(e){return p(e)?g(e instanceof ArrayBuffer?new Uint8Array(e):e):Array.isArray(e)?e.join(""):(i.isPtr(e)&&(e=i.cstrToJs(e)),e)};class y extends Error{constructor(...e){2===e.length&&"object"==typeof e[1]?super(...e):e.length?super(e.join(" ")):super("Allocation failed."),this.resultCode=s.SQLITE_NOMEM,this.name="WasmAllocError"}}y.toss=(...e)=>{throw new y(...e)},Object.assign(s,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(e,t,r,n,s,i,o,a,l)=>{},sqlite3_create_function:(e,t,r,n,s,i,o,a)=>{},sqlite3_create_window_function:(e,t,r,n,s,i,o,a,l,c)=>{},sqlite3_prepare_v3:(e,t,r,n,s,i)=>{},sqlite3_prepare_v2:(e,t,r,n,s)=>{},sqlite3_exec:(e,t,r,n,s)=>{},sqlite3_randomness:(e,t)=>{}});const q={affirmBindableTypedArray:m,flexibleString:b,bigIntFits32:e=>e>=-2147483648n&&e<=0x7fffffffn,bigIntFits64:function e(t){return e._max||(e._max=BigInt("0x7fffffffffffffff"),e._min=~e._max),t>=e._min&&t<=e._max},bigIntFitsDouble:function e(t){return e._min||(e._min=Number.MIN_SAFE_INTEGER,e._max=Number.MAX_SAFE_INTEGER),t>=e._min&&t<=e._max},isBindableTypedArray:f,isInt32:c,isSQLableTypedArray:p,isTypedArray:e=>!!(e&&e.constructor&&c(e.constructor.BYTES_PER_ELEMENT))&&e,typedArrayToString:g,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:u,toss:function(...e){throw new Error(e.join(" "))},toss3:l,typedArrayPart:d,affirmDbHeader:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));15>e.byteLength&&l("Input does not contain an SQLite3 database header.");for(let t=0;t<15;++t)"SQLite format 3".charCodeAt(t)!==e[t]&&l("Input does not contain an SQLite3 database header.")},affirmIsDb:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));const t=e.byteLength;(t<512||t%512!=0)&&l("Byte array size",t,"is invalid for an SQLite3 db."),q.affirmDbHeader(e)}};Object.assign(i,{ptrSizeof:n.wasmPtrSizeof||4,ptrIR:n.wasmPtrIR||"i32",bigIntEnabled:!!n.bigIntEnabled,exports:n.exports||l("Missing API config.exports (WASM module exports)."),memory:n.memory||n.exports.memory||l("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),i.allocFromTypedArray=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e)),m(e);const t=i.alloc(e.byteLength||1);return i.heapForSize(e.constructor).set(e.byteLength?e:[0],t),t};{const e=n.allocExportName,t=n.deallocExportName,r=n.reallocExportName;for(const n of[e,t,r])i.exports[n]instanceof Function||l("Missing required exports[",n,"] function.");i.alloc=function e(t){return e.impl(t)||y.toss("Failed to allocate",t," bytes.")},i.alloc.impl=i.exports[e],i.realloc=function e(t,r){const n=e.impl(t,r);return r?n||y.toss("Failed to reallocate",r," bytes."):0},i.realloc.impl=i.exports[r],i.dealloc=i.exports[t]}let w;if(i.compileOptionUsed=function e(t){if(!arguments.length){if(e._result)return e._result;e._opt||(e._rx=/^([^=]+)=(.+)/,e._rxInt=/^-?\d+$/,e._opt=function(t,r){const n=e._rx.exec(t);r[0]=n?n[1]:t,r[1]=!n||(e._rxInt.test(n[2])?+n[2]:n[2])});const t={},r=[0,0];let n,i=0;for(;n=s.sqlite3_compileoption_get(i++);)e._opt(n,r),t[r[0]]=r[1];return e._result=t}if(Array.isArray(t)){const e={};return t.forEach((t=>{e[t]=s.sqlite3_compileoption_used(t)})),e}return"object"==typeof t?(Object.keys(t).forEach((e=>{t[e]=s.sqlite3_compileoption_used(e)})),t):"string"==typeof t&&!!s.sqlite3_compileoption_used(t)},i.pstack=Object.assign(Object.create(null),{restore:i.exports.sqlite3_wasm_pstack_restore,alloc:function(e){return"string"!=typeof e||(e=i.sizeofIR(e))||y.toss("Invalid value for pstack.alloc(",arguments[0],")"),i.exports.sqlite3_wasm_pstack_alloc(e)||y.toss("Could not allocate",e,"bytes from the pstack.")},allocChunks:function(e,t){"string"!=typeof t||(t=i.sizeofIR(t))||y.toss("Invalid size value for allocChunks(",arguments[1],")");const r=i.pstack.alloc(e*t),n=[];let s=0,o=0;for(;s<e;++s,o+=t)n.push(r+o);return n},allocPtr:(e=1,t=!0)=>1===e?i.pstack.alloc(t?8:i.ptrSizeof):i.pstack.allocChunks(e,t?8:i.ptrSizeof),call:function(e){const t=i.pstack.pointer;try{return e(S)}finally{i.pstack.restore(t)}}}),Object.defineProperties(i.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:i.exports.sqlite3_wasm_pstack_remaining}}),s.sqlite3_randomness=(...e)=>{if(1===e.length&&q.isTypedArray(e[0])&&1===e[0].BYTES_PER_ELEMENT){const t=e[0];if(0===t.byteLength)return i.exports.sqlite3_randomness(0,0),t;const r=i.pstack.pointer;try{let e=t.byteLength,r=0;const n=i.exports.sqlite3_randomness,s=i.heap8u(),o=e<512?e:512,a=i.pstack.alloc(o);do{const i=e>o?o:e;n(i,a),t.set(d(s,a,a+i),r),e-=i,r+=i}while(e>0)}catch(e){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",e)}finally{i.pstack.restore(r)}return t}i.exports.sqlite3_randomness(...e)},s.sqlite3_wasmfs_opfs_dir=function(){if(void 0!==w)return w;const e=n.wasmfsOpfsDir;if(!(e&&globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle))return w="";try{return w=e&&0===i.xCallWrapped("sqlite3_wasm_init_wasmfs","i32",["string"],e)?e:""}catch(e){return w=""}},s.sqlite3_wasmfs_filename_is_persistent=function(e){const t=s.sqlite3_wasmfs_opfs_dir();return!(!t||!e)&&e.startsWith(t+"/")},s.sqlite3_js_db_uses_vfs=function(e,t,r=0){try{const n=s.sqlite3_vfs_find(t);return!!n&&(e?n===s.sqlite3_js_db_vfs(e,r)&&n:n===s.sqlite3_vfs_find(0)&&n)}catch(e){return!1}},s.sqlite3_js_vfs_list=function(){const e=[];let t=s.sqlite3_vfs_find(0);for(;t;){const r=new s.sqlite3_vfs(t);e.push(i.cstrToJs(r.$zName)),t=r.$pNext,r.dispose()}return e},s.sqlite3_js_db_export=function(e,t=0){(e=i.xWrap.testConvertArg("sqlite3*",e))||l("Invalid sqlite3* argument."),i.bigIntEnabled||l("BigInt64 support is not enabled.");const r=i.scopedAllocPush();let n;try{const r=i.scopedAlloc(8+i.ptrSizeof),s=r+8,o=t?i.isPtr(t)?t:i.scopedAllocCString(""+t):0;let a=i.exports.sqlite3_wasm_db_serialize(e,o,s,r,0);a&&l("Database serialization failed with code",S.capi.sqlite3_js_rc_str(a)),n=i.peekPtr(s);const c=i.peek(r,"i64");return a=c?i.heap8u().slice(n,n+Number(c)):new Uint8Array,a}finally{n&&i.exports.sqlite3_free(n),i.scopedAllocPop(r)}},s.sqlite3_js_db_vfs=(e,t=0)=>i.sqlite3_wasm_db_vfs(e,t),s.sqlite3_js_aggregate_context=(e,t)=>s.sqlite3_aggregate_context(e,t)||(t?y.toss("Cannot allocate",t,"bytes for sqlite3_aggregate_context()"):0),s.sqlite3_js_posix_create_file=function(e,t,r){let n;t&&i.isPtr(t)?n=t:t instanceof ArrayBuffer||t instanceof Uint8Array?(n=i.allocFromTypedArray(t),(arguments.length<3||!q.isInt32(r)||r<0)&&(r=t.byteLength)):a.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!q.isInt32(r)||r<0)&&a.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const t=i.sqlite3_wasm_posix_create_file(e,n,r);t&&a.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(t))}finally{i.dealloc(n)}},s.sqlite3_js_vfs_create_file=function(e,t,r,o){let l;n.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options."),r?(i.isPtr(r)?l=r:r instanceof ArrayBuffer&&(r=new Uint8Array(r)),r instanceof Uint8Array?(l=i.allocFromTypedArray(r),(arguments.length<4||!q.isInt32(o)||o<0)&&(o=r.byteLength)):a.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):l=0,(!q.isInt32(o)||o<0)&&(i.dealloc(l),a.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const r=i.sqlite3_wasm_vfs_create_file(e,t,l,o);r&&a.toss("Creation of file failed with sqlite3 result code",s.sqlite3_js_rc_str(r))}finally{i.dealloc(l)}},s.sqlite3_js_sql_to_string=e=>{if("string"==typeof e)return e;const t=b(v);return t===v?void 0:t},q.isUIThread()){const e=function(e){const t=Object.create(null);return t.prefix="kvvfs-"+e,t.stores=[],"session"!==e&&""!==e||t.stores.push(globalThis.sessionStorage),"local"!==e&&""!==e||t.stores.push(globalThis.localStorage),t};s.sqlite3_js_kvvfs_clear=function(t=""){let r=0;const n=e(t);return n.stores.forEach((e=>{const t=[];let s;for(s=0;s<e.length;++s){const r=e.key(s);r.startsWith(n.prefix)&&t.push(r)}t.forEach((t=>e.removeItem(t))),r+=t.length})),r},s.sqlite3_js_kvvfs_size=function(t=""){let r=0;const n=e(t);return n.stores.forEach((e=>{let t;for(t=0;t<e.length;++t){const s=e.key(t);s.startsWith(n.prefix)&&(r+=s.length,r+=e.getItem(s).length)}})),2*r}}s.sqlite3_db_config=function(e,t,...r){switch(this.s||(this.s=i.xWrap("sqlite3_wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=i.xWrap("sqlite3_wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=i.xWrap("sqlite3_wasm_db_config_ip","int",["sqlite3*","int","int","*"])),t){case s.SQLITE_DBCONFIG_ENABLE_FKEY:case s.SQLITE_DBCONFIG_ENABLE_TRIGGER:case s.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case s.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case s.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case s.SQLITE_DBCONFIG_ENABLE_QPSG:case s.SQLITE_DBCONFIG_TRIGGER_EQP:case s.SQLITE_DBCONFIG_RESET_DATABASE:case s.SQLITE_DBCONFIG_DEFENSIVE:case s.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case s.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case s.SQLITE_DBCONFIG_DQS_DML:case s.SQLITE_DBCONFIG_DQS_DDL:case s.SQLITE_DBCONFIG_ENABLE_VIEW:case s.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case s.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case s.SQLITE_DBCONFIG_STMT_SCANSTATUS:case s.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(e,t,r[0],r[1]||0);case s.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(e,t,r[0],r[1],r[2]);case s.SQLITE_DBCONFIG_MAINDBNAME:return this.s(e,t,r[0]);default:return s.SQLITE_MISUSE}}.bind(Object.create(null)),s.sqlite3_value_to_js=function(e,t=!0){let r;const n=s.sqlite3_value_type(e);switch(n){case s.SQLITE_INTEGER:i.bigIntEnabled?(r=s.sqlite3_value_int64(e),q.bigIntFitsDouble(r)&&(r=Number(r))):r=s.sqlite3_value_double(e);break;case s.SQLITE_FLOAT:r=s.sqlite3_value_double(e);break;case s.SQLITE_TEXT:r=s.sqlite3_value_text(e);break;case s.SQLITE_BLOB:{const t=s.sqlite3_value_bytes(e),n=s.sqlite3_value_blob(e);t&&!n&&S.WasmAllocError.toss("Cannot allocate memory for blob argument of",t,"byte(s)"),r=t?i.heap8u().slice(n,n+Number(t)):null;break}case s.SQLITE_NULL:r=null;break;default:t&&l(s.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",n),r=void 0}return r},s.sqlite3_values_to_js=function(e,t,r=!0){let n;const o=[];for(n=0;n<e;++n)o.push(s.sqlite3_value_to_js(i.peekPtr(t+i.ptrSizeof*n),r));return o},s.sqlite3_result_error_js=function(e,t){t instanceof y?s.sqlite3_result_error_nomem(e):s.sqlite3_result_error(e,""+t,-1)},s.sqlite3_result_js=function(e,t){if(t instanceof Error)s.sqlite3_result_error_js(e,t);else try{switch(typeof t){case"undefined":break;case"boolean":s.sqlite3_result_int(e,t?1:0);break;case"bigint":q.bigIntFits32(t)?s.sqlite3_result_int(e,Number(t)):q.bigIntFitsDouble(t)?s.sqlite3_result_double(e,Number(t)):i.bigIntEnabled?q.bigIntFits64(t)?s.sqlite3_result_int64(e,t):l("BigInt value",t.toString(),"is too BigInt for int64."):l("BigInt value",t.toString(),"is too BigInt.");break;case"number":{let r;r=q.isInt32(t)?s.sqlite3_result_int:i.bigIntEnabled&&Number.isInteger(t)&&q.bigIntFits64(BigInt(t))?s.sqlite3_result_int64:s.sqlite3_result_double,r(e,t);break}case"string":{const[r,n]=i.allocCString(t,!0);s.sqlite3_result_text(e,r,n,s.SQLITE_WASM_DEALLOC);break}case"object":if(null===t){s.sqlite3_result_null(e);break}if(q.isBindableTypedArray(t)){const r=i.allocFromTypedArray(t);s.sqlite3_result_blob(e,r,t.byteLength,s.SQLITE_WASM_DEALLOC);break}default:l("Don't not how to handle this UDF result value:",typeof t,t)}}catch(t){s.sqlite3_result_error_js(e,t)}},s.sqlite3_column_js=function(e,t,r=!0){const n=s.sqlite3_column_value(e,t);return 0===n?void 0:s.sqlite3_value_to_js(n,r)};const E=function(e,t,r){r=s[r],this.ptr?i.pokePtr(this.ptr,0):this.ptr=i.allocPtr();const n=r(e,t,this.ptr);if(n)return a.toss(n,arguments[2]+"() failed with code "+n);const o=i.peekPtr(this.ptr);return o?s.sqlite3_value_to_js(o,!0):void 0}.bind(Object.create(null));s.sqlite3_preupdate_new_js=(e,t)=>E(e,t,"sqlite3_preupdate_new"),s.sqlite3_preupdate_old_js=(e,t)=>E(e,t,"sqlite3_preupdate_old"),s.sqlite3changeset_new_js=(e,t)=>E(e,t,"sqlite3changeset_new"),s.sqlite3changeset_old_js=(e,t)=>E(e,t,"sqlite3changeset_old");const S={WasmAllocError:y,SQLite3Error:a,capi:s,util:q,wasm:i,config:n,version:Object.create(null),client:void 0,asyncPostInit:async function e(){if(e.isReady instanceof Promise)return e.isReady;let r=t.initializersAsync;delete t.initializersAsync;const s=async()=>(S.__isUnderTest||(delete S.util,delete S.StructBinder),S),i=e=>{throw n.error("an async sqlite3 initializer failed:",e),e};if(!r||!r.length)return e.isReady=s().catch(i);r=r.map((e=>e instanceof Function?async t=>e(S):e)),r.push(s);let o=Promise.resolve(S);for(;r.length;)o=o.then(r.shift());return e.isReady=o.catch(i)},scriptInfo:void 0};try{t.initializers.forEach((e=>{e(S)}))}catch(e){throw console.error("sqlite3 bootstrap initializer threw:",e),e}return delete t.initializers,t.sqlite3=S,S},globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){void 0===e.bigIntEnabled&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const t=(...e)=>{throw new Error(e.join(" "))};e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",n=e.ptrSizeof="i32"===r?4:"i64"===r?8:t("Unhandled ptrSizeof:",r),s=Object.create(null);s.heapSize=0,s.memory=null,s.freeFuncIndexes=[],s.scopedAlloc=[],s.utf8Decoder=new TextDecoder,s.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=e=>{switch(e){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return n;default:return(""+e).endsWith("*")?n:void 0}};const i=function(){if(s.memory){if(s.heapSize===s.memory.buffer.byteLength)return s}else s.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;const t=s.memory.buffer;return s.HEAP8=new Int8Array(t),s.HEAP8U=new Uint8Array(t),s.HEAP16=new Int16Array(t),s.HEAP16U=new Uint16Array(t),s.HEAP32=new Int32Array(t),s.HEAP32U=new Uint32Array(t),e.bigIntEnabled&&(s.HEAP64=new BigInt64Array(t),s.HEAP64U=new BigUint64Array(t)),s.HEAP32F=new Float32Array(t),s.HEAP64F=new Float64Array(t),s.heapSize=t.byteLength,s};e.heap8=()=>i().HEAP8,e.heap8u=()=>i().HEAP8U,e.heap16=()=>i().HEAP16,e.heap16u=()=>i().HEAP16U,e.heap32=()=>i().HEAP32,e.heap32u=()=>i().HEAP32U,e.heapForSize=function(r,n=!0){const o=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:i();switch(r){case Int8Array:return o.HEAP8;case Uint8Array:return o.HEAP8U;case Int16Array:return o.HEAP16;case Uint16Array:return o.HEAP16U;case Int32Array:return o.HEAP32;case Uint32Array:return o.HEAP32U;case 8:return n?o.HEAP8U:o.HEAP8;case 16:return n?o.HEAP16U:o.HEAP16;case 32:return n?o.HEAP32U:o.HEAP32;case 64:if(o.HEAP64)return n?o.HEAP64U:o.HEAP64;break;default:if(e.bigIntEnabled){if(r===globalThis.BigUint64Array)return o.HEAP64U;if(r===globalThis.BigInt64Array)return o.HEAP64;break}}t("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(t){const r=e.functionTable();return t<r.length?r.get(t):void 0},e.jsFuncToWasm=function e(r,n){if(e._||(e._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(e,t,r){r<128?e[t](r):e[t](r%128|128,r>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(t){const r=e._.rxJSig.exec(t);return r?r[2]:t.substr(1)},letterType:r=>e._.sigTypes[r]||t("Invalid signature letter:",r),pushSigType:(t,r)=>t.push(e._.typeCodes[e._.letterType(r)])}),"string"==typeof r){const e=n;n=r,r=e}const s=e._.sigParams(n),i=[1,96];e._.uleb128Encode(i,"push",s.length);for(const t of s)e._.pushSigType(i,t);return"v"===n[0]?i.push(0):(i.push(1),e._.pushSigType(i,n[0])),e._.uleb128Encode(i,"unshift",i.length),i.unshift(0,97,115,109,1,0,0,0,1),i.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(i)),{e:{f:r}}).exports.f};const o=function(r,n,i){if(i&&!s.scopedAlloc.length&&t("No scopedAllocPush() scope is active."),"string"==typeof r){const e=n;n=r,r=e}"string"==typeof n&&r instanceof Function||t("Invalid arguments: expecting (function,signature) or (signature,function).");const o=e.functionTable(),a=o.length;let l;for(;s.freeFuncIndexes.length&&(l=s.freeFuncIndexes.pop(),o.get(l));)l=null;l||(l=a,o.grow(1));try{return o.set(l,r),i&&s.scopedAlloc[s.scopedAlloc.length-1].push(l),l}catch(e){if(!(e instanceof TypeError))throw l===a&&s.freeFuncIndexes.push(a),e}try{const t=e.jsFuncToWasm(r,n);o.set(l,t),i&&s.scopedAlloc[s.scopedAlloc.length-1].push(l)}catch(e){throw l===a&&s.freeFuncIndexes.push(a),e}return l};e.installFunction=(e,t)=>o(e,t,!1),e.scopedInstallFunction=(e,t)=>o(e,t,!0),e.uninstallFunction=function(t){if(!t&&0!==t)return;const r=s.freeFuncIndexes,n=e.functionTable();r.push(t);const i=n.get(t);return n.set(t,null),i},e.peek=function(n,o="i8"){o.endsWith("*")&&(o=r);const a=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:i(),l=Array.isArray(n)?[]:void 0;let c;do{switch(l&&(n=arguments[0].shift()),o){case"i1":case"i8":c=a.HEAP8[0|n];break;case"i16":c=a.HEAP16[n>>1];break;case"i32":c=a.HEAP32[n>>2];break;case"float":case"f32":c=a.HEAP32F[n>>2];break;case"double":case"f64":c=Number(a.HEAP64F[n>>3]);break;case"i64":if(e.bigIntEnabled){c=BigInt(a.HEAP64[n>>3]);break}default:t("Invalid type for peek():",o)}l&&l.push(c)}while(l&&arguments[0].length);return l||c},e.poke=function(e,n,o="i8"){o.endsWith("*")&&(o=r);const a=s.memory&&s.heapSize===s.memory.buffer.byteLength?s:i();for(const r of Array.isArray(e)?e:[e])switch(o){case"i1":case"i8":a.HEAP8[0|r]=n;continue;case"i16":a.HEAP16[r>>1]=n;continue;case"i32":a.HEAP32[r>>2]=n;continue;case"float":case"f32":a.HEAP32F[r>>2]=n;continue;case"double":case"f64":a.HEAP64F[r>>3]=n;continue;case"i64":if(a.HEAP64){a.HEAP64[r>>3]=BigInt(n);continue}default:t("Invalid type for poke(): "+o)}return this},e.peekPtr=(...t)=>e.peek(1===t.length?t[0]:t,r),e.pokePtr=(t,n=0)=>e.poke(t,n,r),e.peek8=(...t)=>e.peek(1===t.length?t[0]:t,"i8"),e.poke8=(t,r)=>e.poke(t,r,"i8"),e.peek16=(...t)=>e.peek(1===t.length?t[0]:t,"i16"),e.poke16=(t,r)=>e.poke(t,r,"i16"),e.peek32=(...t)=>e.peek(1===t.length?t[0]:t,"i32"),e.poke32=(t,r)=>e.poke(t,r,"i32"),e.peek64=(...t)=>e.peek(1===t.length?t[0]:t,"i64"),e.poke64=(t,r)=>e.poke(t,r,"i64"),e.peek32f=(...t)=>e.peek(1===t.length?t[0]:t,"f32"),e.poke32f=(t,r)=>e.poke(t,r,"f32"),e.peek64f=(...t)=>e.peek(1===t.length?t[0]:t,"f64"),e.poke64f=(t,r)=>e.poke(t,r,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=e=>"number"==typeof e&&e===(0|e)&&e>=0,e.isPtr=e.isPtr32,e.cstrlen=function(t){if(!t||!e.isPtr(t))return null;const r=i().HEAP8U;let n=t;for(;0!==r[n];++n);return n-t};const a="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer;e.cstrToJs=function(t){const r=e.cstrlen(t);return r?(n=i().HEAP8U,o=t,l=t+r,s.utf8Decoder.decode(n.buffer instanceof a?n.slice(o,l):n.subarray(o,l))):null===r?r:"";var n,o,l},e.jstrlen=function(e){if("string"!=typeof e)return null;const t=e.length;let r=0;for(let n=0;n<t;++n){let t=e.charCodeAt(n);t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++n)),t<=127?++r:r+=t<=2047?2:t<=65535?3:4}return r},e.jstrcpy=function(e,r,n=0,s=-1,i=!0){if(r&&(r instanceof Int8Array||r instanceof Uint8Array)||t("jstrcpy() target must be an Int8Array or Uint8Array."),s<0&&(s=r.length-n),!(s>0&&n>=0))return 0;let o=0,a=e.length;const l=n,c=n+s-(i?1:0);for(;o<a&&n<c;++o){let t=e.charCodeAt(o);if(t>=55296&&t<=57343&&(t=65536+((1023&t)<<10)|1023&e.charCodeAt(++o)),t<=127){if(n>=c)break;r[n++]=t}else if(t<=2047){if(n+1>=c)break;r[n++]=192|t>>6,r[n++]=128|63&t}else if(t<=65535){if(n+2>=c)break;r[n++]=224|t>>12,r[n++]=128|t>>6&63,r[n++]=128|63&t}else{if(n+3>=c)break;r[n++]=240|t>>18,r[n++]=128|t>>12&63,r[n++]=128|t>>6&63,r[n++]=128|63&t}}return i&&(r[n++]=0),n-l},e.cstrncpy=function(r,n,s){if(r&&n||t("cstrncpy() does not accept NULL strings."),s<0)s=e.cstrlen(strPtr)+1;else if(!(s>0))return 0;const i=e.heap8u();let o,a=0;for(;a<s&&(o=i[n+a]);++a)i[r+a]=o;return a<s&&(i[r+a++]=0),a},e.jstrToUintArray=(e,t=!1)=>s.utf8Encoder.encode(t?e+"\0":e);const l=(e,r)=>{e.alloc instanceof Function&&e.dealloc instanceof Function||t("Object is missing alloc() and/or dealloc() function(s)","required by",r+"().")},c=function(t,r,n,o){if(l(e,o),"string"!=typeof t)return null;{const e=s.utf8Encoder.encode(t),o=n(e.length+1),a=i().HEAP8U;return a.set(e,o),a[o+e.length]=0,r?[o,e.length]:o}};e.allocCString=(t,r=!1)=>c(t,r,e.alloc,"allocCString()"),e.scopedAllocPush=function(){l(e,"scopedAllocPush");const t=[];return s.scopedAlloc.push(t),t},e.scopedAllocPop=function(r){l(e,"scopedAllocPop");const n=arguments.length?s.scopedAlloc.indexOf(r):s.scopedAlloc.length-1;n<0&&t("Invalid state object for scopedAllocPop()."),0===arguments.length&&(r=s.scopedAlloc[n]),s.scopedAlloc.splice(n,1);for(let t;t=r.pop();)e.functionEntry(t)?e.uninstallFunction(t):e.dealloc(t)},e.scopedAlloc=function(r){s.scopedAlloc.length||t("No scopedAllocPush() scope is active.");const n=e.alloc(r);return s.scopedAlloc[s.scopedAlloc.length-1].push(n),n},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>s.scopedAlloc.length,set:()=>t("The 'active' property is read-only.")}),e.scopedAllocCString=(t,r=!1)=>c(t,r,e.scopedAlloc,"scopedAllocCString()");const _=function(t,r){const n=e[t?"scopedAlloc":"alloc"]((r.length+1)*e.ptrSizeof);let s=0;return r.forEach((r=>{e.pokePtr(n+e.ptrSizeof*s++,e[t?"scopedAllocCString":"allocCString"](""+r))})),e.pokePtr(n+e.ptrSizeof*s,0),n};e.scopedAllocMainArgv=e=>_(!0,e),e.allocMainArgv=e=>_(!1,e),e.cArgvToJs=(t,r)=>{const n=[];for(let s=0;s<t;++s){const t=e.peekPtr(r+e.ptrSizeof*s);n.push(t?e.cstrToJs(t):null)}return n},e.scopedAllocCall=function(t){e.scopedAllocPush();try{return t()}finally{e.scopedAllocPop()}};const u=function(t,s,i){l(e,i);const o=s?"i64":r;let a=e[i](t*(s?8:n));if(e.poke(a,0,o),1===t)return a;const c=[a];for(let r=1;r<t;++r)a+=s?8:n,c[r]=a,e.poke(a,0,o);return c};e.allocPtr=(e=1,t=!0)=>u(e,t,"alloc"),e.scopedAllocPtr=(e=1,t=!0)=>u(e,t,"scopedAlloc"),e.xGet=function(r){return e.exports[r]||t("Cannot find exported symbol:",r)};const d=(e,r)=>t(e+"() requires",r,"argument(s).");e.xCall=function(r,...n){const s=e.xGet(r);return s instanceof Function||t("Exported symbol",r,"is not a function."),s.length!==n.length&&d(r,s.length),2===arguments.length&&Array.isArray(arguments[1])?s.apply(null,arguments[1]):s.apply(null,n)},s.xWrap=Object.create(null),s.xWrap.convert=Object.create(null),s.xWrap.convert.arg=new Map,s.xWrap.convert.result=new Map;const f=s.xWrap.convert.arg,p=s.xWrap.convert.result;e.bigIntEnabled&&f.set("i64",(e=>BigInt(e)));const m="i32"===r?e=>0|e:e=>BigInt(e)|BigInt(0);f.set("i32",m).set("i16",(e=>65535&e)).set("i8",(e=>255&e)).set("f32",(e=>Number(e).valueOf())).set("float",f.get("f32")).set("f64",f.get("f32")).set("double",f.get("f64")).set("int",f.get("i32")).set("null",(e=>e)).set(null,f.get("null")).set("**",m).set("*",m),p.set("*",m).set("pointer",m).set("number",(e=>Number(e))).set("void",(e=>{})).set("null",(e=>e)).set(null,p.get("null"));{const n=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&n.push("i64");const s=f.get(r);for(const e of n)f.set(e+"*",s),p.set(e+"*",s),p.set(e,f.get(e)||t("Missing arg converter:",e))}const h=function(t){return"string"==typeof t?e.scopedAllocCString(t):t?m(t):null};f.set("string",h).set("utf8",h).set("pointer",h),p.set("string",(t=>e.cstrToJs(t))).set("utf8",p.get("string")).set("string:dealloc",(t=>{try{return t?e.cstrToJs(t):null}finally{e.dealloc(t)}})).set("utf8:dealloc",p.get("string:dealloc")).set("json",(t=>JSON.parse(e.cstrToJs(t)))).set("json:dealloc",(t=>{try{return t?JSON.parse(e.cstrToJs(t)):null}finally{e.dealloc(t)}}));const g=class{constructor(e){this.name=e.name||"unnamed adapter"}convertArg(e,r,n){t("AbstractArgAdapter must be subclassed.")}};f.FuncPtrAdapter=class r extends g{constructor(e){super(e),f.FuncPtrAdapter.warnOnUse&&console.warn("xArg.FuncPtrAdapter is an internal-only API","and is not intended to be invoked from","client-level code. Invoked with:",e),this.name=e.name||"unnamed",this.signature=e.signature,e.contextKey instanceof Function&&(this.contextKey=e.contextKey,e.bindScope||(e.bindScope="context")),this.bindScope=e.bindScope||t("FuncPtrAdapter options requires a bindScope (explicit or implied)."),r.bindScopes.indexOf(e.bindScope)<0&&t("Invalid options.bindScope ("+e.bindMod+") for FuncPtrAdapter. Expecting one of: ("+r.bindScopes.join(", ")+")"),this.isTransient="transient"===this.bindScope,this.isContext="context"===this.bindScope,this.isPermanent="permanent"===this.bindScope,this.singleton="singleton"===this.bindScope?[]:void 0,this.callProxy=e.callProxy instanceof Function?e.callProxy:void 0}contextKey(e,t){return this}contextMap(e){const t=this.__cmap||(this.__cmap=new Map);let r=t.get(e);return void 0===r&&t.set(e,r=[]),r}convertArg(t,n,i){let a=this.singleton;if(!a&&this.isContext&&(a=this.contextMap(this.contextKey(n,i))),a&&a[0]===t)return a[1];if(t instanceof Function){this.callProxy&&(t=this.callProxy(t));const e=o(t,this.signature,this.isTransient);if(r.debugFuncInstall&&r.debugOut("FuncPtrAdapter installed",this,this.contextKey(n,i),"@"+e,t),a){if(a[1]){r.debugFuncInstall&&r.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(n,i),"@"+a[1],t);try{s.scopedAlloc[s.scopedAlloc.length-1].push(a[1])}catch(e){}}a[0]=t,a[1]=e}return e}if(e.isPtr(t)||null==t){if(a&&a[1]&&a[1]!==t){r.debugFuncInstall&&r.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(n,i),"@"+a[1],t);try{s.scopedAlloc[s.scopedAlloc.length-1].push(a[1])}catch(e){}a[0]=a[1]=0|t}return t||0}throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},f.FuncPtrAdapter.warnOnUse=!1,f.FuncPtrAdapter.debugFuncInstall=!1,f.FuncPtrAdapter.debugOut=console.debug.bind(console),f.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const b=e=>f.get(e)||t("Argument adapter not found:",e),y=e=>p.get(e)||t("Result adapter not found:",e);s.xWrap.convertArg=(e,...t)=>b(e)(...t),s.xWrap.convertArgNoCheck=(e,...t)=>f.get(e)(...t),s.xWrap.convertResult=(e,t)=>null===e?t:e?y(e)(t):void 0,s.xWrap.convertResultNoCheck=(e,t)=>null===e?t:e?p.get(e)(t):void 0,e.xWrap=function(r,n,...i){3===arguments.length&&Array.isArray(arguments[2])&&(i=arguments[2]),e.isPtr(r)&&(r=e.functionEntry(r)||t("Function pointer not found in WASM function table."));const o=r instanceof Function,a=o?r:e.xGet(r);if(o&&(r=a.name||"unnamed function"),i.length!==a.length&&d(r,a.length),null===n&&0===a.length)return a;null!=n&&y(n);for(const e of i)e instanceof g?f.set(e,((...t)=>e.convertArg(...t))):b(e);const l=s.xWrap;return 0===a.length?(...e)=>e.length?d(r,a.length):l.convertResult(n,a.call(null)):function(...t){t.length!==a.length&&d(r,a.length);const s=e.scopedAllocPush();try{for(const e in t)t[e]=l.convertArgNoCheck(i[e],t[e],t,e);return l.convertResultNoCheck(n,a.apply(null,t))}finally{e.scopedAllocPop(s)}}};const q=function(e,r,n,s,i,o){if("string"==typeof n){if(1===r)return o.get(n);if(2===r)return s?(s instanceof Function||t(i,"requires a function argument."),o.set(n,s),e):(o.get(n),e)}t("Invalid arguments to",i)};return e.xWrap.resultAdapter=function e(t,r){return q(e,arguments.length,t,r,"resultAdapter()",p)},e.xWrap.argAdapter=function e(t,r){return q(e,arguments.length,t,r,"argAdapter()",f)},e.xWrap.FuncPtrAdapter=f.FuncPtrAdapter,e.xCallWrapped=function(t,r,n,...s){return Array.isArray(arguments[3])&&(s=arguments[3]),e.xWrap(t,r,n||[]).apply(null,s||[])},e.xWrap.testConvertArg=s.xWrap.convertArg,e.xWrap.testConvertResult=s.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const t=()=>fetch(e.uri,{credentials:"same-origin"}),r=this,n=function(t){if(e.wasmUtilTarget){const n=(...e)=>{throw new Error(e.join(" "))},s=e.wasmUtilTarget;if(s.module=t.module,s.instance=t.instance,s.instance.exports.memory||(s.memory=e.imports&&e.imports.env&&e.imports.env.memory||n("Missing 'memory' object!")),!s.alloc&&t.instance.exports.malloc){const e=t.instance.exports;s.alloc=function(t){return e.malloc(t)||n("Allocation of",t,"bytes failed.")},s.dealloc=function(t){e.free(t)}}r(s)}return e.onload&&e.onload(t,e),t};return WebAssembly.instantiateStreaming?function(){return WebAssembly.instantiateStreaming(t(),e.imports||{}).then(n)}:function(){return t().then((e=>e.arrayBuffer())).then((t=>WebAssembly.instantiate(t,e.imports||{}))).then(n)}}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=function e(t){const r=(...e)=>{throw new Error(e.join(" "))};t.heap instanceof WebAssembly.Memory||t.heap instanceof Function||r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach((function(e){t[e]instanceof Function||r("Config option '"+e+"' must be a function.")}));const n=e,s=t.heap instanceof Function?t.heap:()=>new Uint8Array(t.heap.buffer),i=t.alloc,o=t.dealloc,a=t.log||console.log.bind(console),l=t.memberPrefix||"",c=t.memberSuffix||"",_=void 0===t.bigIntEnabled?!!globalThis.BigInt64Array:!!t.bigIntEnabled,u=globalThis.BigInt,d=globalThis.BigInt64Array,f=t.ptrSizeof||4,p=t.ptrIR||"i32";n.debugFlags||(n.__makeDebugFlags=function(e=null){e&&e.__flags&&(e=e.__flags);const t=function e(t){return 0===arguments.length?e.__flags:(t<0?(delete e.__flags.getter,delete e.__flags.setter,delete e.__flags.alloc,delete e.__flags.dealloc):(e.__flags.getter=!!(1&t),e.__flags.setter=!!(2&t),e.__flags.alloc=!!(4&t),e.__flags.dealloc=!!(8&t)),e._flags)};return Object.defineProperty(t,"__flags",{iterable:!1,writable:!1,value:Object.create(e)}),e||t(0),t},n.debugFlags=n.__makeDebugFlags());const m=function(){const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}(),h=e=>(e=>"("===e[1])(e)?"p":e[0],g=function(e){switch(h(e)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return p;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",e)},b=d?()=>!0:()=>r("BigInt64Array is not available."),y=(e,t)=>e+"::"+t,q=new WeakMap,v="(pointer-is-external)",w=function(e,t,r){if(r||(r=q.get(t)),r){if(q.delete(t),Array.isArray(t.ondispose)){let n;for(;n=t.ondispose.shift();)try{n instanceof Function?n.call(t):n instanceof D?n.dispose():"number"==typeof n&&o(n)}catch(t){console.warn("ondispose() for",e.structName,"@",r,"threw. NOT propagating it.",t)}}else if(t.ondispose instanceof Function)try{t.ondispose()}catch(t){console.warn("ondispose() for",e.structName,"@",r,"threw. NOT propagating it.",t)}delete t.ondispose,e.debugFlags.__flags.dealloc&&a("debug.dealloc:",t[v]?"EXTERNAL":"",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+r),t[v]||o(r)}},E=e=>({configurable:!1,writable:!1,iterable:!1,value:e}),S=function(e,t,n){let o=!n;n?Object.defineProperty(t,v,E(n)):(n=i(e.structInfo.sizeof))||r("Allocation of",e.structName,"structure failed.");try{e.debugFlags.__flags.alloc&&a("debug.alloc:",o?"":"EXTERNAL",e.structName,"instance:",e.structInfo.sizeof,"bytes @"+n),o&&s().fill(0,n,n+e.structInfo.sizeof),q.set(t,n)}catch(r){throw w(e,t,n),r}},A=E((e=>l+e+c)),x=function(e,t,n=!0){let s=e.members[t];if(!s&&(l||c)){for(const r of Object.values(e.members))if(r.key===t){s=r;break}!s&&n&&r(y(e.name,t),"is not a mapped struct member.")}return s},T=function e(t,r,n=!1){e._||(e._=e=>e.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const s=x(t.structInfo,r,!0);return n?e._(s.signature):s.signature},I={configurable:!1,enumerable:!1,get:function(){return q.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},k=E((function(){const e=[];for(const t of Object.keys(this.structInfo.members))e.push(this.memberKey(t));return e})),F=new TextDecoder("utf-8"),O=new TextEncoder,P="undefined"==typeof SharedArrayBuffer?function(){}:SharedArrayBuffer,L=function(e){"s"!==e.signature&&r("Invalid member type signature for C-string value:",JSON.stringify(e))},C=function(e,...t){e.ondispose?Array.isArray(e.ondispose)||(e.ondispose=[e.ondispose]):e.ondispose=[],e.ondispose.push(...t)},N=function(e){const t=O.encode(e),n=i(t.length+1);n||r("Allocation error while duplicating string:",e);const o=s();return o.set(t,n),o[n+t.length]=0,n},D=function(e,t){arguments[2]!==E&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:E(e),structInfo:E(t)})};D.prototype=Object.create(null,{dispose:E((function(){w(this.constructor,this)})),lookupMember:E((function(e,t=!0){return x(this.structInfo,e,t)})),memberToJsString:E((function(e){return function(e,t){const r=x(e.structInfo,t,!0);L(r);const n=e[r.key];if(!n)return null;let i=n;const o=s();for(;0!==o[i];++i);return n===i?"":(a=o,l=n,c=i,F.decode(a.buffer instanceof P?a.slice(l,c):a.subarray(l,c)));var a,l,c}(this,e)})),memberIsString:E((function(e,t=!0){return function(e,t,r=!1){const n=x(e.structInfo,t,r);return!(!n||1!==n.signature.length||"s"!==n.signature[0])&&n}(this,e,t)})),memberKey:A,memberKeys:k,memberSignature:E((function(e,t=!1){return T(this,e,t)})),memoryDump:E((function(){const e=this.pointer;return e?new Uint8Array(s().slice(e,e+this.structInfo.sizeof)):null})),pointer:I,setMemberCString:E((function(e,t){return function(e,t,r){const n=x(e.structInfo,t,!0);L(n);const s=N(r);return e[n.key]=s,C(e,s),e}(this,e,t)}))}),Object.assign(D.prototype,{addOnDispose:function(...e){return C(this,...e),this}}),Object.defineProperties(D,{allocCString:E(N),isA:E((e=>e instanceof D)),hasExternalPointer:E((e=>e instanceof D&&!!e[v])),memberKey:A});const R=e=>Number.isFinite(e)||e instanceof(u||Number),M=function e(t,n,i){if(!e._){e._={getters:{},setters:{},sw:{}};const t=["i","c","C","p","P","s","f","d","v()"];_&&t.push("j"),t.forEach((function(t){e._.getters[t]=function(e){switch(h(e)){case"p":case"P":case"s":switch(f){case 4:return"getInt32";case 8:return b()&&"getBigInt64"}break;case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return b()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",e)}(t),e._.setters[t]=function(e){switch(h(e)){case"p":case"P":case"s":switch(f){case 4:return"setInt32";case 8:return b()&&"setBigInt64"}break;case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return b()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",e)}(t),e._.sw[t]=function(e){switch(h(e)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return b()&&u;case"p":case"P":case"s":switch(f){case 4:return Number;case 8:return b()&&u}}r("Unhandled DataView set wrapper for signature:",e)}(t)}));const n=/^[ipPsjfdcC]$/,s=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;e.sigCheck=function(e,t,i,o){Object.prototype.hasOwnProperty.call(e,i)&&r(e.structName,"already has a property named",i+"."),n.test(o)||s.test(o)||r("Malformed signature for",y(e.structName,t)+":",o)}}const o=t.memberKey(n);e.sigCheck(t.prototype,n,o,i.signature),i.key=o,i.name=n;const l=h(i.signature),c=y(t.prototype.structName,o),d=t.prototype.debugFlags.__flags,p=Object.create(null);var q,v;p.configurable=!1,p.enumerable=!1,p.get=function(){d.getter&&a("debug.getter:",e._.getters[l],"for",g(l),c,"@",this.pointer,"+",i.offset,"sz",i.sizeof);let t=new DataView(s().buffer,this.pointer+i.offset,i.sizeof)[e._.getters[l]](0,m);return d.getter&&a("debug.getter:",c,"result =",t),t},i.readOnly?p.set=(q=t.prototype.structName,v=o,()=>r(y(q,v),"is read-only.")):p.set=function(t){if(d.setter&&a("debug.setter:",e._.setters[l],"for",g(l),c,"@",this.pointer,"+",i.offset,"sz",i.sizeof,t),this.pointer||r("Cannot set struct property on disposed instance."),null===t)t=0;else for(;!R(t);){if("P"===i.signature&&t instanceof D){t=t.pointer||0,d.setter&&a("debug.setter:",c,"resolved to",t);break}r("Invalid value for pointer-type",c+".")}new DataView(s().buffer,this.pointer+i.offset,i.sizeof)[e._.setters[l]](0,e._.sw[l](t),m)},Object.defineProperty(t.prototype,o,p)},j=function e(t,s){1===arguments.length?t=(s=t).name:s.name||(s.name=t),t||r("Struct name is required.");let i=!1;Object.keys(s.members).forEach((e=>{const n=s.members[e];n.sizeof?1===n.sizeof?"c"===n.signature||"C"===n.signature||r("Unexpected sizeof==1 member",y(s.name,e),"with signature",n.signature):(0!=n.sizeof%4&&(console.warn("Invalid struct member description =",n,"from",s),r(t,"member",e,"sizeof is not aligned. sizeof="+n.sizeof)),0!=n.offset%4&&(console.warn("Invalid struct member description =",n,"from",s),r(t,"member",e,"offset is not aligned. offset="+n.offset))):r(t,"member",e,"is missing sizeof."),(!i||i.offset<n.offset)&&(i=n)})),i?s.sizeof<i.offset+i.sizeof&&r("Invalid struct config:",t,"max member offset ("+i.offset+") ","extends past end of struct (sizeof="+s.sizeof+")."):r("No member property descriptions found.");const o=E(n.__makeDebugFlags(e.debugFlags)),a=function e(n){this instanceof e?arguments.length?((n!==(0|n)||n<=0)&&r("Invalid pointer value for",t,"constructor."),S(e,this,n)):S(e,this):r("The",t,"constructor may only be called via 'new'.")};return Object.defineProperties(a,{debugFlags:o,isA:E((e=>e instanceof a)),memberKey:A,memberKeys:k,methodInfoForKey:E((function(e){})),structInfo:E(s),structName:E(t)}),a.prototype=new D(t,s,E),Object.defineProperties(a.prototype,{debugFlags:o,constructor:E(a)}),Object.keys(s.members).forEach((e=>M(a,e,s.members[e]))),a};return j.StructType=D,j.config=t,j.allocCString=N,j.debugFlags||(j.debugFlags=n.__makeDebugFlags(n.debugFlags)),j},globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=(...e)=>{throw new Error(e.join(" "))},r=(e.SQLite3Error.toss,e.capi),n=e.wasm,s=e.util;if(globalThis.WhWasmUtilInstaller(n),delete globalThis.WhWasmUtilInstaller,n.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new n.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new n.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:e=>{let t;return(s,i,o,a)=>{try{const r=n.cArgvToJs(i,o);return t||(t=n.cArgvToJs(i,a)),0|e(r,t)}catch(e){return e.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new n.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:e=>e[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(e,t)=>e[0],callProxy:e=>(t,s,i,o,a,l)=>{try{return i=i&&n.cstrToJs(i),o=o&&n.cstrToJs(o),a=a&&n.cstrToJs(a),l=l&&n.cstrToJs(l),e(t,s,i,o,a,l)||0}catch(e){return e.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new n.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(e,t)=>e[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new n.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(e,t)=>e[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],n.exports.sqlite3_activate_see instanceof Function&&n.bindingSignatures.push(["sqlite3_key","int","sqlite3*","string","int"],["sqlite3_key_v2","int","sqlite3*","string","*","int"],["sqlite3_rekey","int","sqlite3*","string","int"],["sqlite3_rekey_v2","int","sqlite3*","string","*","int"],["sqlite3_activate_see",void 0,"string"]),n.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:e=>e[0],callProxy:e=>(t,r,s,i,o,a,l)=>{e(t,r,s,n.cstrToJs(i),n.cstrToJs(o),a,l)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:e=>e[0],callProxy:e=>(t,r,s,i,o)=>{e(t,r,n.cstrToJs(s),n.cstrToJs(i),o)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],n.bigIntEnabled&&n.exports.sqlite3changegroup_add){const e={signature:"i(ps)",callProxy:e=>(t,s)=>{try{return 0|e(t,n.cstrToJs(s))}catch(e){return e.resultCode||r.SQLITE_ERROR}}};n.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new n.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new n.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new n.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new n.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new n.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new n.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new n.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new n.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...e}),new n.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new n.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new n.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new n.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new n.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new n.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new n.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new n.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new n.xWrap.FuncPtrAdapter({name:"xFilter",...e,contextKey:(e,t)=>e[0]}),"*"]])}n.bindingSignatures.wasm=[["sqlite3_wasm_db_reset","int","sqlite3*"],["sqlite3_wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3_wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3_wasm_posix_create_file","int","string","*","int"],["sqlite3_wasm_vfs_unlink","int","sqlite3_vfs*","string"]],e.StructBinder=globalThis.Jaccwabyt({heap:n.heap8u,alloc:n.alloc,dealloc:n.dealloc,bigIntEnabled:n.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const i=n.xWrap.argAdapter("string");n.xWrap.argAdapter("string:flexible",(e=>i(s.flexibleString(e)))),n.xWrap.argAdapter("string:static",function(e){return n.isPtr(e)?e:this[e=""+e]||(this[e]=n.allocCString(e))}.bind(Object.create(null)));const o=n.xWrap.argAdapter("*"),a=function(){};n.xWrap.argAdapter("sqlite3_filename",o)("sqlite3_context*",o)("sqlite3_value*",o)("void*",o)("sqlite3_changegroup*",o)("sqlite3_changeset_iter*",o)("sqlite3_session*",o)("sqlite3_stmt*",(t=>o(t instanceof(e?.oo1?.Stmt||a)?t.pointer:t)))("sqlite3*",(t=>o(t instanceof(e?.oo1?.DB||a)?t.pointer:t)))("sqlite3_index_info*",(e=>o(e instanceof(r.sqlite3_index_info||a)?e.pointer:e)))("sqlite3_module*",(e=>o(e instanceof(r.sqlite3_module||a)?e.pointer:e)))("sqlite3_vfs*",(t=>"string"==typeof t?r.sqlite3_vfs_find(t)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",t):o(t instanceof(r.sqlite3_vfs||a)?t.pointer:t)));const l=n.xWrap.resultAdapter("*");n.xWrap.resultAdapter("sqlite3*",l)("sqlite3_context*",l)("sqlite3_stmt*",l)("sqlite3_value*",l)("sqlite3_vfs*",l)("void*",l),0===n.exports.sqlite3_step.length&&(n.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const e of n.bindingSignatures)r[e[0]]=n.xWrap.apply(null,e);for(const e of n.bindingSignatures.wasm)n[e[0]]=n.xWrap.apply(null,e);const c=function(e){return()=>t(e+"() is unavailable due to lack","of BigInt support in this build.")};for(const e of n.bindingSignatures.int64)r[e[0]]=n.bigIntEnabled?n.xWrap.apply(null,e):c(e[0]);if(delete n.bindingSignatures,n.exports.sqlite3_wasm_db_error){const t=n.xWrap("sqlite3_wasm_db_error","int","sqlite3*","int","string");s.sqlite3_wasm_db_error=function(n,s,i){return s instanceof e.WasmAllocError?(s=r.SQLITE_NOMEM,i=0):s instanceof Error&&(i=i||""+s,s=s.resultCode||r.SQLITE_ERROR),n?t(n,s,i):s}}else s.sqlite3_wasm_db_error=function(e,t,r){return console.warn("sqlite3_wasm_db_error() is not exported.",arguments),t}}{const i=n.xCall("sqlite3_wasm_enum_json");i||t("Maintenance required: increase sqlite3_wasm_enum_json()'s","static buffer size!"),n.ctype=JSON.parse(n.cstrToJs(i));const o=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];n.bigIntEnabled&&o.push("serialize","session","vtab");for(const e of o)for(const t of Object.entries(n.ctype[e]))r[t[0]]=t[1];n.functionEntry(r.SQLITE_WASM_DEALLOC)||t("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const a=Object.create(null);for(const e of["resultCodes"])for(const t of Object.entries(n.ctype[e]))a[t[1]]=t[0];r.sqlite3_js_rc_str=e=>a[e];const l=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!s.isUIThread(),sqlite3_index_info:!n.bigIntEnabled,sqlite3_index_constraint:!n.bigIntEnabled,sqlite3_index_orderby:!n.bigIntEnabled,sqlite3_index_constraint_usage:!n.bigIntEnabled});for(const t of n.ctype.structs)l[t.name]||(r[t.name]=e.StructBinder(t));if(r.sqlite3_index_info){for(const e of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[e]=r[e],delete r[e];r.sqlite3_vtab_config=n.xWrap("sqlite3_wasm_vtab_config","int",["sqlite3*","int","int"])}}const i=(e,t,n)=>s.sqlite3_wasm_db_error(e,r.SQLITE_MISUSE,t+"() requires "+n+" argument"+(1===n?"":"s")+"."),o=e=>s.sqlite3_wasm_db_error(e,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),a=e=>n.xWrap.argAdapter("sqlite3*")(e),l=e=>n.isPtr(e)?n.cstrToJs(e):e,c=function(e,t){e=a(e);let r=this.dbMap.get(e);return t?(!r&&t>0&&this.dbMap.set(e,r=Object.create(null)),r):(this.dbMap.delete(e),r)}.bind(Object.assign(Object.create(null),{dbMap:new Map}));c.addCollation=function(e,t){const r=c(e,1);r.collation||(r.collation=new Set),r.collation.add(l(t).toLowerCase())},c._addUDF=function(e,t,r,n){t=l(t).toLowerCase();let s=n.get(t);s||n.set(t,s=new Set),s.add(r<0?-1:r)},c.addFunction=function(e,t,r){const n=c(e,1);n.udf||(n.udf=new Map),this._addUDF(e,t,r,n.udf)},c.addWindowFunc=function(e,t,r){const n=c(e,1);n.wudf||(n.wudf=new Map),this._addUDF(e,t,r,n.wudf)},c.cleanup=function(e){const t=[e=a(e)];for(const e of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const s=n.exports[e];t.length=s.length;try{r[e](...t)}catch(r){console.warn("close-time call of",e+"(",t,") threw:",r)}}const s=c(e,0);if(!s)return;if(s.collation){for(const t of s.collation)try{r.sqlite3_create_collation_v2(e,t,r.SQLITE_UTF8,0,0,0)}catch(e){}delete s.collation}let i;for(i=0;i<2;++i){const t=i?s.wudf:s.udf;if(!t)continue;const n=i?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const s of t){const t=s[0],o=s[1],a=[e,t,0,r.SQLITE_UTF8,0,0,0,0,0];i&&a.push(0);for(const e of o)try{a[2]=e,n.apply(null,a)}catch(e){}o.clear()}t.clear()}delete s.udf,delete s.wudf};{const e=n.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(t){if(1!==arguments.length)return i(t,"sqlite3_close_v2",1);if(t)try{c.cleanup(t)}catch(e){}return e(t)}}if(r.sqlite3session_table_filter){const e=n.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(t){if(1!==arguments.length)return i(pDb,"sqlite3session_delete",1);t&&r.sqlite3session_table_filter(t,0,0),e(t)}}{const e=(e,t)=>"argv["+t+"]:"+e[0]+":"+n.cstrToJs(e[1]).toLowerCase(),t=n.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new n.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:e}),new n.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:e})]);r.sqlite3_create_collation_v2=function(e,n,a,l,_,u){if(6!==arguments.length)return i(e,"sqlite3_create_collation_v2",6);if(15&a){if(r.SQLITE_UTF8!==(15&a))return o(e)}else a|=r.SQLITE_UTF8;try{const r=t(e,n,a,l,_,u);return 0===r&&_ instanceof Function&&c.addCollation(e,n),r}catch(t){return s.sqlite3_wasm_db_error(e,t)}},r.sqlite3_create_collation=(e,t,n,s,o)=>5===arguments.length?r.sqlite3_create_collation_v2(e,t,n,s,o,0):i(e,"sqlite3_create_collation",5)}{const e=function(e,t){return e[0]+":"+(e[2]<0?-1:e[2])+":"+t+":"+n.cstrToJs(e[1]).toLowerCase()},t=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,n,s)=>{try{e(t,...r.sqlite3_values_to_js(n,s))}catch(e){r.sqlite3_result_error_js(t,e)}}},xFinalAndValue:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{r.sqlite3_result_js(t,e(t))}catch(e){r.sqlite3_result_error_js(t,e)}}},xFunc:{signature:"v(pip)",contextKey:e,callProxy:e=>(t,n,s)=>{try{r.sqlite3_result_js(t,e(t,...r.sqlite3_values_to_js(n,s)))}catch(e){r.sqlite3_result_error_js(t,e)}}},xDestroy:{signature:"v(p)",contextKey:e,callProxy:e=>t=>{try{e(t)}catch(e){console.error("UDF xDestroy method threw:",e)}}}}),a=n.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new n.xWrap.FuncPtrAdapter({name:"xFunc",...t.xFunc}),new n.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new n.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new n.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]),l=n.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new n.xWrap.FuncPtrAdapter({name:"xStep",...t.xInverseAndStep}),new n.xWrap.FuncPtrAdapter({name:"xFinal",...t.xFinalAndValue}),new n.xWrap.FuncPtrAdapter({name:"xValue",...t.xFinalAndValue}),new n.xWrap.FuncPtrAdapter({name:"xInverse",...t.xInverseAndStep}),new n.xWrap.FuncPtrAdapter({name:"xDestroy",...t.xDestroy})]);r.sqlite3_create_function_v2=function e(t,n,l,_,u,d,f,p,m){if(e.length!==arguments.length)return i(t,"sqlite3_create_function_v2",e.length);if(15&_){if(r.SQLITE_UTF8!==(15&_))return o(t)}else _|=r.SQLITE_UTF8;try{const e=a(t,n,l,_,u,d,f,p,m);return 0===e&&(d instanceof Function||f instanceof Function||p instanceof Function||m instanceof Function)&&c.addFunction(t,n,l),e}catch(e){return console.error("sqlite3_create_function_v2() setup threw:",e),s.sqlite3_wasm_db_error(t,e,"Creation of UDF threw: "+e)}},r.sqlite3_create_function=function e(t,n,s,o,a,l,c,_){return e.length===arguments.length?r.sqlite3_create_function_v2(t,n,s,o,a,l,c,_,0):i(t,"sqlite3_create_function",e.length)},r.sqlite3_create_window_function=function e(t,n,a,_,u,d,f,p,m,h){if(e.length!==arguments.length)return i(t,"sqlite3_create_window_function",e.length);if(15&_){if(r.SQLITE_UTF8!==(15&_))return o(t)}else _|=r.SQLITE_UTF8;try{const e=l(t,n,a,_,u,d,f,p,m,h);return 0===e&&(d instanceof Function||f instanceof Function||p instanceof Function||m instanceof Function||h instanceof Function)&&c.addWindowFunc(t,n,a),e}catch(e){return console.error("sqlite3_create_window_function() setup threw:",e),s.sqlite3_wasm_db_error(t,e,"Creation of UDF threw: "+e)}},r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const e=(e,t)=>("string"==typeof e?t=-1:s.isSQLableTypedArray(e)?(t=e.byteLength,e=s.typedArrayToString(e instanceof ArrayBuffer?new Uint8Array(e):e)):Array.isArray(e)&&(e=e.join(""),t=-1),[e,t]),t={basic:n.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:n.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=function n(o,a,l,c,_,u){if(n.length!==arguments.length)return i(o,"sqlite3_prepare_v3",n.length);const[d,f]=e(a,l);switch(typeof d){case"string":return t.basic(o,d,f,c,_,null);case"number":return t.full(o,d,f,c,_,u);default:return s.sqlite3_wasm_db_error(o,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},r.sqlite3_prepare_v2=function e(t,n,s,o,a){return e.length===arguments.length?r.sqlite3_prepare_v3(t,n,s,0,o,a):i(t,"sqlite3_prepare_v2",e.length)}}{const e=n.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),t=n.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=function t(o,a,l,c,_){if(t.length!==arguments.length)return i(r.sqlite3_db_handle(o),"sqlite3_bind_text",t.length);if(n.isPtr(l)||null===l)return e(o,a,l,c,_);let u,d;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(pMem)&&(l=pMem.join(""));try{if(s.isSQLableTypedArray(l))u=n.allocFromTypedArray(l),d=l.byteLength;else{if("string"!=typeof l)return s.sqlite3_wasm_db_error(r.sqlite3_db_handle(o),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");[u,d]=n.allocCString(l)}return e(o,a,u,d,r.SQLITE_WASM_DEALLOC)}catch(e){return n.dealloc(u),s.sqlite3_wasm_db_error(r.sqlite3_db_handle(o),e)}},r.sqlite3_bind_blob=function e(o,a,l,c,_){if(e.length!==arguments.length)return i(r.sqlite3_db_handle(o),"sqlite3_bind_blob",e.length);if(n.isPtr(l)||null===l)return t(o,a,l,c,_);let u,d;l instanceof ArrayBuffer?l=new Uint8Array(l):Array.isArray(l)&&(l=l.join(""));try{if(s.isBindableTypedArray(l))u=n.allocFromTypedArray(l),d=c>=0?c:l.byteLength;else{if("string"!=typeof l)return s.sqlite3_wasm_db_error(r.sqlite3_db_handle(o),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");[u,d]=n.allocCString(l)}return t(o,a,u,d,r.SQLITE_WASM_DEALLOC)}catch(e){return n.dealloc(u),s.sqlite3_wasm_db_error(r.sqlite3_db_handle(o),e)}}}r.sqlite3_config=function(e,...t){if(arguments.length<2)return r.SQLITE_MISUSE;switch(e){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return n.exports.sqlite3_wasm_config_i(e,t[0]);case r.SQLITE_CONFIG_LOOKASIDE:return n.exports.sqlite3_wasm_config_ii(e,t[0],t[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return n.exports.sqlite3_wasm_config_j(e,t[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const e=new Set;r.sqlite3_auto_extension=function(t){if(t instanceof Function)t=n.installFunction("i(ppp)",t);else if(1!==arguments.length||!n.isPtr(t))return r.SQLITE_MISUSE;const s=n.exports.sqlite3_auto_extension(t);return t!==arguments[0]&&(0===s?e.add(t):n.uninstallFunction(t)),s},r.sqlite3_cancel_auto_extension=function(e){return e&&1===arguments.length&&n.isPtr(e)?n.exports.sqlite3_cancel_auto_extension(e):0},r.sqlite3_reset_auto_extension=function(){n.exports.sqlite3_reset_auto_extension();for(const t of e)n.uninstallFunction(t);e.clear()}}const _=r.sqlite3_vfs_find("kvvfs");if(_)if(s.isUIThread()){const e=new r.sqlite3_kvvfs_methods(n.exports.sqlite3_wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const t=n.exports.sqlite3_wasm_kvvfsMakeKeyOnPstack,s=n.pstack,i=e=>115===n.peek(e)?sessionStorage:localStorage,o={xRead:(e,r,o,a)=>{const l=s.pointer,c=n.scopedAllocPush();try{const s=t(e,r);if(!s)return-3;const l=n.cstrToJs(s),c=i(e).getItem(l);if(!c)return-1;const _=c.length;if(a<=0)return _;if(1===a)return n.poke(o,0),_;const u=n.scopedAllocCString(c);return a>_+1&&(a=_+1),n.heap8u().copyWithin(o,u,u+a-1),n.poke(o+a-1,0),a-1}catch(e){return console.error("kvstorageRead()",e),-2}finally{s.restore(l),n.scopedAllocPop(c)}},xWrite:(e,o,a)=>{const l=s.pointer;try{const r=t(e,o);if(!r)return 1;const s=n.cstrToJs(r);return i(e).setItem(s,n.cstrToJs(a)),0}catch(e){return console.error("kvstorageWrite()",e),r.SQLITE_IOERR}finally{s.restore(l)}},xDelete:(e,o)=>{const a=s.pointer;try{const r=t(e,o);return r?(i(e).removeItem(n.cstrToJs(r)),0):1}catch(e){return console.error("kvstorageDelete()",e),r.SQLITE_IOERR}finally{s.restore(a)}}};for(const t of Object.keys(o))e[e.memberKey(t)]=n.installFunction(e.memberSignature(t),o[t])}else r.sqlite3_vfs_unregister(_);n.xWrap.FuncPtrAdapter.warnOnUse=!0})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){e.version={libVersion:"3.44.2",libVersionNumber:3044002,sourceId:"2023-11-24 11:41:44 ebead0e7230cd33bcec9f95d2183069565b9e709bf745c9b5db65cc0cbf92c0f",downloadVersion:3440200}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=(...t)=>{throw new e.SQLite3Error(...t)},r=e.capi,n=e.wasm,s=e.util,i=new WeakMap,o=new WeakMap,a=(e,t,r)=>{const n=Object.getOwnPropertyDescriptor(e,t);return n?n.value:r},l=function(e,n){return n&&(e instanceof d&&(e=e.pointer),t(n,"sqlite3 result code",n+":",e?r.sqlite3_errmsg(e):r.sqlite3_errstr(n))),arguments[0]},c=n.installFunction("i(ippp)",function(e,t,s,i){r.SQLITE_TRACE_STMT===e&&console.log("SQL TRACE #"+ ++this.counter+" via sqlite3@"+t+":",n.cstrToJs(i))}.bind({counter:0})),_=Object.create(null),u=function s(...a){if(!s._name2vfs){s._name2vfs=Object.create(null);const e="function"==typeof importScripts&&(e=>t("The VFS for",e,"is only available in the main window thread."));s._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:e||(()=>"local")},s._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:e||(()=>"session")}}const u=s.normalizeArgs(...a);let d=u.filename,f=u.vfs,p=u.flags;("string"!=typeof d&&"number"!=typeof d||"string"!=typeof p||f&&"string"!=typeof f&&"number"!=typeof f)&&(e.config.error("Invalid DB ctor args",u,arguments),t("Invalid arguments for DB constructor."));let m="number"==typeof d?n.cstrToJs(d):d;const h=s._name2vfs[m];h&&(f=h.vfs,d=m=h.filename(m));let g,b=0;p.indexOf("c")>=0&&(b|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),p.indexOf("w")>=0&&(b|=r.SQLITE_OPEN_READWRITE),0===b&&(b|=r.SQLITE_OPEN_READONLY),b|=r.SQLITE_OPEN_EXRESCODE;const y=n.pstack.pointer;try{const e=n.pstack.allocPtr();let t=r.sqlite3_open_v2(d,e,b,f||0);g=n.peekPtr(e),l(g,t),r.sqlite3_extended_result_codes(g,1),p.indexOf("t")>=0&&r.sqlite3_trace_v2(g,r.SQLITE_TRACE_STMT,c,g)}catch(e){throw g&&r.sqlite3_close_v2(g),e}finally{n.pstack.restore(y)}this.filename=m,i.set(this,g),o.set(this,Object.create(null));try{const n=r.sqlite3_js_db_vfs(g);n||t("Internal error: cannot get VFS for new db handle.");const s=_[n];s instanceof Function?s(this,e):s&&l(g,r.sqlite3_exec(g,s,0,0,0))}catch(e){throw this.close(),e}};u.setVfsPostOpenSql=function(e,t){_[e]=t},u.normalizeArgs=function(e=":memory:",t="c",r=null){const n={};return 1===arguments.length&&arguments[0]&&"object"==typeof arguments[0]?(Object.assign(n,arguments[0]),void 0===n.flags&&(n.flags="c"),void 0===n.vfs&&(n.vfs=null),void 0===n.filename&&(n.filename=":memory:")):(n.filename=e,n.flags=t,n.vfs=r),n};const d=function(...e){u.apply(this,e)};d.dbCtorHelper=u;const f={null:1,number:2,string:3,boolean:4,blob:5};f[void 0],f.null,n.bigIntEnabled&&(f.bigint=f.number);const p=function(){f!==arguments[2]&&t(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],i.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},m=function(e){return e.pointer||t("DB has been closed."),e},h=function(e,r){return(r!==(0|r)||r<0||r>=e.columnCount)&&t("Column index",r,"is out of range."),e},g=(e,t,r,...n)=>{const s=e.prepare(t);try{const e=s.bind(r).step()?s.get(...n):void 0;return s.reset(),e}finally{s.finalize()}},b=(e,t,r,n)=>e.exec({sql:t,bind:r,rowMode:n,returnValue:"resultRows"});d.checkRc=(e,t)=>l(e,t),d.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return m(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch(e){}const e=this.pointer;if(Object.keys(o.get(this)).forEach(((e,t)=>{if(t&&t.pointer)try{t.finalize()}catch(e){}})),i.delete(this),o.delete(this),r.sqlite3_close_v2(e),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch(e){}delete this.filename}},changes:function(e=!1,t=!1){const n=m(this).pointer;return e?t?r.sqlite3_total_changes64(n):r.sqlite3_total_changes(n):t?r.sqlite3_changes64(n):r.sqlite3_changes(n)},dbFilename:function(e="main"){return r.sqlite3_db_filename(m(this).pointer,e)},dbName:function(e=0){return r.sqlite3_db_name(m(this).pointer,e)},dbVfsName:function(e=0){let t;const s=r.sqlite3_js_db_vfs(m(this).pointer,e);if(s){const e=new r.sqlite3_vfs(s);try{t=n.cstrToJs(e.$zName)}finally{e.dispose()}}return t},prepare:function(e){m(this);const s=n.pstack.pointer;let i,a;try{i=n.pstack.alloc(8),d.checkRc(this,r.sqlite3_prepare_v2(this.pointer,e,-1,i,null)),a=n.peekPtr(i)}finally{n.pstack.restore(s)}a||t("Cannot prepare empty SQL.");const l=new p(this,a,f);return o.get(this)[a]=l,l},exec:function(){m(this);const e=function(e,n){const i=Object.create(null);switch(i.opt=Object.create(null),n.length){case 1:"string"==typeof n[0]||s.isSQLableTypedArray(n[0])||Array.isArray(n[0])?i.sql=n[0]:n[0]&&"object"==typeof n[0]&&(i.opt=n[0],i.sql=i.opt.sql);break;case 2:i.sql=n[0],i.opt=n[1];break;default:t("Invalid argument count for exec().")}i.sql=s.flexibleString(i.sql),"string"!=typeof i.sql&&t("Missing SQL argument or unsupported SQL value type.");const o=i.opt;switch(o.returnValue){case"resultRows":o.resultRows||(o.resultRows=[]),i.returnVal=()=>o.resultRows;break;case"saveSql":o.saveSql||(o.saveSql=[]),i.returnVal=()=>o.saveSql;break;case void 0:case"this":i.returnVal=()=>e;break;default:t("Invalid returnValue value:",o.returnValue)}if(o.callback||o.returnValue||void 0===o.rowMode||(o.resultRows||(o.resultRows=[]),i.returnVal=()=>o.resultRows),o.callback||o.resultRows)switch(void 0===o.rowMode?"array":o.rowMode){case"object":i.cbArg=e=>e.get(Object.create(null));break;case"array":i.cbArg=e=>e.get([]);break;case"stmt":Array.isArray(o.resultRows)&&t("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),i.cbArg=e=>e;break;default:if(s.isInt32(o.rowMode)){i.cbArg=e=>e.get(o.rowMode);break}if("string"==typeof o.rowMode&&o.rowMode.length>1&&"$"===o.rowMode[0]){const e=o.rowMode.substr(1);i.cbArg=n=>{const s=n.get(Object.create(null))[e];return void 0===s?t(r.SQLITE_NOTFOUND,"exec(): unknown result column:",e):s};break}t("Invalid rowMode:",o.rowMode)}return i}(this,arguments);if(!e.sql)return t("exec() requires an SQL string.");const i=e.opt,o=i.callback,a=Array.isArray(i.resultRows)?i.resultRows:void 0;let l,c=i.bind,_=!!(e.cbArg||i.columnNames||a);const u=n.scopedAllocPush(),h=Array.isArray(i.saveSql)?i.saveSql:void 0;try{const t=s.isSQLableTypedArray(e.sql);let u=t?e.sql.byteLength:n.jstrlen(e.sql);const m=n.scopedAlloc(2*n.ptrSizeof+(u+1)),g=m+n.ptrSizeof;let b=g+n.ptrSizeof;const y=b+u;for(t?n.heap8().set(e.sql,b):n.jstrcpy(e.sql,n.heap8(),b,u,!1),n.poke(b+u,0);b&&n.peek(b,"i8");){n.pokePtr([m,g],0),d.checkRc(this,r.sqlite3_prepare_v3(this.pointer,b,u,0,m,g));const t=n.peekPtr(m);if(b=n.peekPtr(g),u=y-b,t){if(h&&h.push(r.sqlite3_sql(t).trim()),l=new p(this,t,f),c&&l.parameterCount&&(l.bind(c),c=null),_&&l.columnCount){let t=Array.isArray(i.columnNames)?0:1;if(_=!1,e.cbArg||a){for(;l.step();l._lockedByExec=!1){0==t++&&l.getColumnNames(i.columnNames),l._lockedByExec=!0;const r=e.cbArg(l);if(a&&a.push(r),o&&!1===o.call(i,r,l))break}l._lockedByExec=!1}0===t&&l.getColumnNames(i.columnNames)}else l.step();l.reset().finalize(),l=null}}}finally{n.scopedAllocPop(u),l&&(delete l._lockedByExec,l.finalize())}return e.returnVal()},createFunction:function(e,n,i){const o=e=>e instanceof Function;switch(arguments.length){case 1:e=(i=e).name,n=i.xFunc||0;break;case 2:o(n)||(n=(i=n).xFunc||0)}i||(i={}),"string"!=typeof e&&t("Invalid arguments: missing function name.");let l=i.xStep||0,c=i.xFinal||0;const _=i.xValue||0,u=i.xInverse||0;let f;o(n)?(f=!1,(o(l)||o(c))&&t("Ambiguous arguments: scalar or aggregate?"),l=c=null):o(l)?(o(c)||t("Missing xFinal() callback for aggregate or window UDF."),n=null):o(c)?t("Missing xStep() callback for aggregate or window UDF."):t("Missing function-type properties."),!1===f?(o(_)||o(u))&&t("xValue and xInverse are not permitted for non-window UDFs."):o(_)?(o(u)||t("xInverse must be provided if xValue is."),f=!0):o(u)&&t("xValue must be provided if xInverse is.");const p=i.pApp;null==p||"number"==typeof p&&s.isInt32(p)||t("Invalid value for pApp property. Must be a legal WASM pointer value.");const m=i.xDestroy||0;m&&!o(m)&&t("xDestroy property must be a function.");let h=0;a(i,"deterministic")&&(h|=r.SQLITE_DETERMINISTIC),a(i,"directOnly")&&(h|=r.SQLITE_DIRECTONLY),a(i,"innocuous")&&(h|=r.SQLITE_INNOCUOUS),e=e.toLowerCase();const g=n||l,b=a(i,"arity"),y="number"==typeof b?b:g.length?g.length-1:0;let q;return q=f?r.sqlite3_create_window_function(this.pointer,e,y,r.SQLITE_UTF8|h,p||0,l,c,_,u,m):r.sqlite3_create_function_v2(this.pointer,e,y,r.SQLITE_UTF8|h,p||0,n,l,c,m),d.checkRc(this,q),this},selectValue:function(e,t,r){return g(this,e,t,0,r)},selectValues:function(e,t,r){const n=this.prepare(e),s=[];try{for(n.bind(t);n.step();)s.push(n.get(0,r));n.reset()}finally{n.finalize()}return s},selectArray:function(e,t){return g(this,e,t,[])},selectObject:function(e,t){return g(this,e,t,{})},selectArrays:function(e,t){return b(this,e,t,"array")},selectObjects:function(e,t){return b(this,e,t,"object")},openStatementCount:function(){return this.pointer?Object.keys(o.get(this)).length:0},transaction:function(e){let n="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&t(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),n+=" "+arguments[0],e=arguments[1]),m(this).exec(n);try{const t=e(this);return this.exec("COMMIT"),t}catch(e){throw this.exec("ROLLBACK"),e}},savepoint:function(e){m(this).exec("SAVEPOINT oo1");try{const t=e(this);return this.exec("RELEASE oo1"),t}catch(e){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),e}},checkRc:function(e){return l(this,e)}};const y=function(e){return e.pointer||t("Stmt has been closed."),e},q=function(e){return function(e){let t=f[null==e?"null":typeof e];switch(t){case f.boolean:case f.null:case f.number:case f.string:return t;case f.bigint:if(n.bigIntEnabled)return t;default:return s.isBindableTypedArray(e)?f.blob:void 0}}(e)||t("Unsupported bind() argument type:",typeof e)},v=function(e,r){return e._lockedByExec&&t("Operation is illegal when statement is locked:",r),e},w=function i(o,a,l,c){v(y(o),"bind()"),i._||(i._tooBigInt=e=>t("BigInt value is too big to store without precision loss:",e),i._={string:function(e,t,s,i){const[o,a]=n.allocCString(s,!0);return(i?r.sqlite3_bind_blob:r.sqlite3_bind_text)(e.pointer,t,o,a,r.SQLITE_WASM_DEALLOC)}}),q(c),a=function(e,n){const i="number"==typeof n?n:r.sqlite3_bind_parameter_index(e.pointer,n);return 0!==i&&s.isInt32(i)?(i<1||i>e.parameterCount)&&t("Bind index",n,"is out of range."):t("Invalid bind() parameter name: "+n),i}(o,a);let _=0;switch(null==c?f.null:l){case f.null:_=r.sqlite3_bind_null(o.pointer,a);break;case f.string:_=i._.string(o,a,c,!1);break;case f.number:{let e;s.isInt32(c)?e=r.sqlite3_bind_int:"bigint"==typeof c?s.bigIntFits64(c)?n.bigIntEnabled?e=r.sqlite3_bind_int64:s.bigIntFitsDouble(c)?(c=Number(c),e=r.sqlite3_bind_double):i._tooBigInt(c):i._tooBigInt(c):(c=Number(c),e=n.bigIntEnabled&&Number.isInteger(c)?r.sqlite3_bind_int64:r.sqlite3_bind_double),_=e(o.pointer,a,c);break}case f.boolean:_=r.sqlite3_bind_int(o.pointer,a,c?1:0);break;case f.blob:{if("string"==typeof c){_=i._.string(o,a,c,!0);break}c instanceof ArrayBuffer?c=new Uint8Array(c):s.isBindableTypedArray(c)||t("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const e=n.alloc(c.byteLength||1);n.heap8().set(c.byteLength?c:[0],e),_=r.sqlite3_bind_blob(o.pointer,a,e,c.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",c),t("Unsupported bind() argument type: "+typeof c)}return _&&d.checkRc(o.db.pointer,_),o._mayGet=!1,o};p.prototype={finalize:function(){if(this.pointer){v(this,"finalize()");const e=r.sqlite3_finalize(this.pointer);return delete o.get(this.db)[this.pointer],i.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,e}},clearBindings:function(){return v(y(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(e){v(this,"reset()"),e&&this.clearBindings();const t=r.sqlite3_reset(y(this).pointer);return this._mayGet=!1,l(this.db,t),this},bind:function(){let e,r;switch(y(this),arguments.length){case 1:e=1,r=arguments[0];break;case 2:e=arguments[0],r=arguments[1];break;default:t("Invalid bind() arguments.")}return void 0===r?this:(this.parameterCount||t("This statement has no bindable parameters."),this._mayGet=!1,null===r?w(this,e,f.null,r):Array.isArray(r)?(1!==arguments.length&&t("When binding an array, an index argument is not permitted."),r.forEach(((e,t)=>w(this,t+1,q(e),e))),this):(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),"object"!=typeof r||s.isBindableTypedArray(r)?w(this,e,q(r),r):(1!==arguments.length&&t("When binding an object, an index argument is not permitted."),Object.keys(r).forEach((e=>w(this,e,q(r[e]),r[e]))),this)))},bindAsBlob:function(e,r){y(this),1===arguments.length&&(r=e,e=1);const n=q(r);return f.string!==n&&f.blob!==n&&f.null!==n&&t("Invalid value type for bindAsBlob()"),w(this,e,f.blob,r)},step:function(){v(this,"step()");const t=r.sqlite3_step(y(this).pointer);switch(t){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",t,r.sqlite3_js_rc_str(t),"SQL =",r.sqlite3_sql(this.pointer)),d.checkRc(this.db.pointer,t)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const e=this.step();return this.reset(),e}finally{try{this.finalize()}catch(e){}}},get:function(e,i){if(y(this)._mayGet||t("Stmt.step() has not (recently) returned true."),Array.isArray(e)){let t=0;const r=this.columnCount;for(;t<r;)e[t]=this.get(t++);return e}if(e&&"object"==typeof e){let t=0;const n=this.columnCount;for(;t<n;)e[r.sqlite3_column_name(this.pointer,t)]=this.get(t++);return e}switch(h(this,e),void 0===i?r.sqlite3_column_type(this.pointer,e):i){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(n.bigIntEnabled){const t=r.sqlite3_column_int64(this.pointer,e);return t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER?Number(t).valueOf():t}{const n=r.sqlite3_column_double(this.pointer,e);return(n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)&&t("Integer is out of range for JS integer range: "+n),s.isInt32(n)?0|n:n}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,e);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,e);case r.SQLITE_BLOB:{const t=r.sqlite3_column_bytes(this.pointer,e),s=r.sqlite3_column_blob(this.pointer,e),i=new Uint8Array(t);return t&&i.set(n.heap8u().slice(s,s+t),0),t&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(i.buffer),i}default:t("Don't know how to translate","type of result column #"+e+".")}t("Not reached.")},getInt:function(e){return this.get(e,r.SQLITE_INTEGER)},getFloat:function(e){return this.get(e,r.SQLITE_FLOAT)},getString:function(e){return this.get(e,r.SQLITE_TEXT)},getBlob:function(e){return this.get(e,r.SQLITE_BLOB)},getJSON:function(e){const t=this.get(e,r.SQLITE_STRING);return null===t?t:JSON.parse(t)},getColumnName:function(e){return r.sqlite3_column_name(h(y(this),e).pointer,e)},getColumnNames:function(e=[]){h(y(this),0);const t=this.columnCount;for(let n=0;n<t;++n)e.push(r.sqlite3_column_name(this.pointer,n));return e},getParamIndex:function(e){return y(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,e):void 0}};{const e={enumerable:!0,get:function(){return i.get(this)},set:()=>t("The pointer property is read-only.")};Object.defineProperty(p.prototype,"pointer",e),Object.defineProperty(d.prototype,"pointer",e)}if(Object.defineProperty(p.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>t("The columnCount property is read-only.")}),e.oo1={DB:d,Stmt:p},s.isUIThread()){e.oo1.JsStorageDb=function(e="session"){"session"!==e&&"local"!==e&&t("JsStorageDb db name must be one of 'session' or 'local'."),u.call(this,{filename:e,flags:"c",vfs:"kvvfs"})};const n=e.oo1.JsStorageDb;n.prototype=Object.create(d.prototype),n.clearStorage=r.sqlite3_js_kvvfs_clear,n.prototype.clearStorage=function(){return n.clearStorage(m(this).filename)},n.storageSize=r.sqlite3_js_kvvfs_size,n.prototype.storageSize=function(){return n.storageSize(m(this).filename)}}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){e.initWorker1API=function(){const e=(...e)=>{throw new Error(e.join(" "))};globalThis.WorkerGlobalScope instanceof Function||e("initWorker1API() must be run from a Worker thread.");const t=this.sqlite3||e("Missing this.sqlite3 object."),r=t.oo1.DB,n=function(e){let t=s.idMap.get(e);return t||(t="db#"+ ++s.idSeq+"@"+e.pointer,s.idMap.set(e,t),t)},s={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(e){const t=new r(e);return this.dbs[n(t)]=t,this.dbList.indexOf(t)<0&&this.dbList.push(t),t},close:function(e,r){if(e){delete this.dbs[n(e)];const s=e.filename,i=t.wasm.sqlite3_wasm_db_vfs(e.pointer,0);e.close();const o=this.dbList.indexOf(e);o>=0&&this.dbList.splice(o,1),r&&s&&i&&t.wasm.sqlite3_wasm_vfs_unlink(i,s)}},post:function(e,t){t&&t.length?(globalThis.postMessage(e,Array.from(t)),t.length=0):globalThis.postMessage(e)},dbs:Object.create(null),getDb:function(t,r=!0){return this.dbs[t]||(r?e("Unknown (or closed) DB ID:",t):void 0)}},i=function(t,r=!0){const n=s.getDb(t.dbId,!1)||s.dbList[0];return r?function(t=s.dbList[0]){return t&&t.pointer?t:e("DB is not opened.")}(n):n},o={open:function(r){const i=Object.create(null),o=r.args||Object.create(null);o.simulateError&&e("Throwing because of simulateError flag.");const a=Object.create(null);let l,c;var _;if(i.vfs=o.vfs,""===(_=o.filename)||":"===_[0]?i.filename=o.filename||"":(i.filename=o.filename,l=o.byteArray,l&&(c=function(e){const r=/^file:.+(vfs=(\w+))/.exec(e);return t.capi.sqlite3_vfs_find(r?r[2]:0)}(o.filename))),c){let e;try{e=t.wasm.allocFromTypedArray(l);const r=t.wasm.sqlite3_wasm_vfs_create_file(c,i.filename,e,l.byteLength);r&&t.SQLite3Error.toss(r)}catch(e){throw new t.SQLite3Error(e.name+" creating "+o.filename+": "+e.message,{cause:e})}finally{e&&t.wasm.dealloc(e)}}const u=s.open(i);return a.filename=u.filename,a.persistent=!!t.capi.sqlite3_js_db_uses_vfs(u.pointer,"opfs"),a.dbId=n(u),a.vfs=u.dbVfsName(),a},close:function(e){const t=i(e,!1),r={filename:t&&t.filename};if(t){const r=!(!e.args||"object"!=typeof e.args||!e.args.unlink);s.close(t,r)}return r},exec:function(t){const r="string"==typeof t.args?{sql:t.args}:t.args||Object.create(null);"stmt"===r.rowMode?e("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):r.sql||e("'exec' requires input SQL.");const n=i(t);(r.callback||Array.isArray(r.resultRows))&&(n._blobXfer=s.xfer);const o=r.callback;let a=0;const l=!!r.columnNames;"string"==typeof o&&(l||(r.columnNames=[]),r.callback=function(e,t){s.post({type:o,columnNames:r.columnNames,rowNumber:++a,row:e},s.xfer)});try{const e=r.countChanges?n.changes(!0,64===r.countChanges):void 0;n.exec(r),void 0!==e&&(r.changeCount=n.changes(!0,64===r.countChanges)-e),r.callback instanceof Function&&(r.callback=o,s.post({type:o,columnNames:r.columnNames,rowNumber:null,row:void 0}))}finally{delete n._blobXfer,r.callback&&(r.callback=o)}return r},"config-get":function(){const e=Object.create(null),r=t.config;return["bigIntEnabled"].forEach((function(t){Object.getOwnPropertyDescriptor(r,t)&&(e[t]=r[t])})),e.version=t.version,e.vfsList=t.capi.sqlite3_js_vfs_list(),e.opfsEnabled=!!t.opfs,e},export:function(e){const r=i(e),n={byteArray:t.capi.sqlite3_js_db_export(r.pointer),filename:r.filename,mimetype:"application/x-sqlite3"};return s.xfer.push(n.byteArray.buffer),n},toss:function(t){e("Testing worker exception")},"opfs-tree":async function(r){return t.opfs||e("OPFS support is unavailable."),await t.opfs.treeList()}};globalThis.onmessage=async function(t){let r,i=(t=t.data).dbId,a=t.type;const l=performance.now();try{o.hasOwnProperty(a)&&o[a]instanceof Function?r=await o[a](t):e("Unknown db worker message type:",t.type)}catch(e){a="error",r={operation:t.type,message:e.message,errorClass:e.name,input:t},e.stack&&(r.stack="string"==typeof e.stack?e.stack.split(/\n\s*/):e.stack)}i||(i=r.dbId||s.dbList[0]&&n(s.dbList[0])),s.post({type:a,dbId:i,messageId:t.messageId,workerReceivedTime:l,workerRespondTime:performance.now(),departureTime:t.departureTime,result:r},s.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.wasm,r=e.capi,n=e.util.toss3,s=Object.create(null),i=Object.create(null),o=e.StructBinder;e.vfs=s,e.vtab=i;const a=r.sqlite3_index_info;a.prototype.nthConstraint=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const r=this.$aConstraint+a.sqlite3_index_constraint.structInfo.sizeof*e;return t?r:new a.sqlite3_index_constraint(r)},a.prototype.nthConstraintUsage=function(e,t=!1){if(e<0||e>=this.$nConstraint)return!1;const r=this.$aConstraintUsage+a.sqlite3_index_constraint_usage.structInfo.sizeof*e;return t?r:new a.sqlite3_index_constraint_usage(r)},a.prototype.nthOrderBy=function(e,t=!1){if(e<0||e>=this.$nOrderBy)return!1;const r=this.$aOrderBy+a.sqlite3_index_orderby.structInfo.sizeof*e;return t?r:new a.sqlite3_index_orderby(r)};const l=function e(r,s,i,a=e.installMethodArgcCheck){if(r instanceof o.StructType?i instanceof Function||t.isPtr(i)||n("Usage errror: expecting a Function or WASM pointer to one."):n("Usage error: target object is-not-a StructType."),1===arguments.length)return(t,n)=>e(r,t,n,a);e.argcProxy||(e.argcProxy=function(e,t,r,s){return function(...i){return r.length!==arguments.length&&n("Argument mismatch for",e.structInfo.name+"::"+t+": Native signature is:",s),r.apply(this,i)}},e.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach(((e,r)=>{if("number"==typeof e)try{t.uninstallFunction(e)}catch(e){}})),delete this.ondispose.__removeFuncList)});const l=r.memberSignature(s);l.length<2&&n("Member",s,"does not have a function pointer signature:",l);const c=r.memberKey(s),_=a&&!t.isPtr(i)?e.argcProxy(r,c,i,l):i;if(t.isPtr(_))_&&!t.functionEntry(_)&&n("Pointer",_,"is not a WASM function table entry."),r[c]=_;else{const n=t.installFunction(_,r.memberSignature(s,!0));r[c]=n,r.ondispose&&r.ondispose.__removeFuncList||(r.addOnDispose("ondispose.__removeFuncList handler",e.removeFuncList),r.ondispose.__removeFuncList=[]),r.ondispose.__removeFuncList.push(c,n)}return(t,n)=>e(r,t,n,a)};l.installMethodArgcCheck=!1;const c=function(e,t,r=l.installMethodArgcCheck){const n=new Map;for(const s of Object.keys(t)){const i=t[s],o=n.get(i);if(o){const t=e.memberKey(s);e[t]=e[e.memberKey(o)]}else l(e,s,i,r),n.set(i,s)}return e};o.StructType.prototype.installMethod=function(e,t,r=l.installMethodArgcCheck){return arguments.length<3&&e&&"object"==typeof e?c(this,...arguments):l(this,...arguments)},o.StructType.prototype.installMethods=function(e,t=l.installMethodArgcCheck){return c(this,e,t)},r.sqlite3_vfs.prototype.registerVfs=function(t=!1){this instanceof e.capi.sqlite3_vfs||n("Expecting a sqlite3_vfs-type argument.");const s=r.sqlite3_vfs_register(this,t?1:0);return s&&n("sqlite3_vfs_register(",this,") failed with rc",s),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&n("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},s.installVfs=function(e){let r=0;const s=["io","vfs"];for(const n of s){const s=e[n];s&&(++r,c(s.struct,s.methods,!!s.applyArgcCheck),"vfs"===n&&(s.struct.$zName||"string"!=typeof s.name||s.struct.addOnDispose(s.struct.$zName=t.allocCString(s.name)),s.struct.registerVfs(!!s.asDefault)))}return r||n("Misuse: installVfs() options object requires at least","one of:",s),this};const _=function(r,n){const s=function(r,n){return function(s,i=!1){if(0===arguments.length&&(s=new n),s instanceof n)return this.set(s.pointer,s),s;t.isPtr(s)||e.SQLite3Error.toss("Invalid argument to",r+"()");let o=this.get(s);return i&&this.delete(s),o}.bind(new Map)}(r,n);return Object.assign(Object.create(null),{StructType:n,create:e=>{const r=s();return t.pokePtr(e,r.pointer),r},get:e=>s(e),unget:e=>s(e,!0),dispose:e=>{const t=s(e,!0);t&&t.dispose()}})};i.xVtab=_("xVtab",r.sqlite3_vtab),i.xCursor=_("xCursor",r.sqlite3_vtab_cursor),i.xIndexInfo=e=>new r.sqlite3_index_info(e),i.xError=function t(n,s,i){if(t.errorReporter instanceof Function)try{t.errorReporter("sqlite3_module::"+n+"(): "+s.message)}catch(e){}let o;return s instanceof e.WasmAllocError?o=r.SQLITE_NOMEM:arguments.length>2?o=i:s instanceof e.SQLite3Error&&(o=s.resultCode),o||r.SQLITE_ERROR},i.xError.errorReporter=console.error.bind(console),i.xRowid=(e,r)=>t.poke(e,r,"i64"),i.setupModule=function(s){let o=!1;const a=this instanceof r.sqlite3_module?this:s.struct||(o=new r.sqlite3_module);try{const r=s.methods||n("Missing 'methods' object.");for(const e of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const t=e[0],n=e[1];!0===r[t]?r[t]=r[n]:!0===r[n]&&(r[n]=r[t])}if(s.catchExceptions){const n=function(r,n){return["xConnect","xCreate"].indexOf(r)>=0?function(s,o,a,l,c,_){try{return n(...arguments)||0}catch(n){return n instanceof e.WasmAllocError||(t.dealloc(t.peekPtr(_)),t.pokePtr(_,t.allocCString(n.message))),i.xError(r,n)}}:function(...e){try{return n(...e)||0}catch(e){return i.xError(r,e)}}},s=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],o=Object.create(null);for(const e of s){const t=r[e];t instanceof Function&&("xConnect"===e&&r.xCreate===t?o[e]=r.xCreate:"xCreate"===e&&r.xConnect===t?o[e]=r.xConnect:o[e]=n(e,t))}c(a,o,!1)}else c(a,r,!!s.applyArgcCheck);if(0===a.$iVersion){let e;e="number"==typeof s.iVersion?s.iVersion:a.$xShadowName?3:a.$xSavePoint||a.$xRelease||a.$xRollbackTo?2:1,a.$iVersion=e}}catch(e){throw o&&o.dispose(),e}return a},r.sqlite3_module.prototype.setupModule=function(e){return i.setupModule.call(this,e)}})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=function t(n){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if("undefined"==typeof WorkerGlobalScope)return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!(globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory))return Promise.reject(new Error("Missing required OPFS APIs."));n&&"object"==typeof n||(n=Object.create(null));const s=new URL(globalThis.location.href).searchParams;if(s.has("opfs-disable"))return Promise.resolve(e);void 0===n.verbose&&(n.verbose=s.has("opfs-verbose")?+s.get("opfs-verbose")||2:1),void 0===n.sanityChecks&&(n.sanityChecks=s.has("opfs-sanity-check")),void 0===n.proxyUri&&(n.proxyUri=t.defaultProxyUri),"function"==typeof n.proxyUri&&(n.proxyUri=n.proxyUri());const i=new Promise((function(t,s){const i=[e.config.error,e.config.warn,e.config.log],o=(e,...t)=>{n.verbose>e&&i[e]("OPFS syncer:",...t)},a=(...e)=>o(2,...e),l=(...e)=>o(1,...e),c=(...e)=>o(0,...e),_=e.util.toss,u=e.capi,d=e.util,f=e.wasm,p=u.sqlite3_vfs,m=u.sqlite3_file,h=u.sqlite3_io_methods,g=Object.create(null);g.metrics={dump:function(){let t,r=0,n=0,s=0;for(t in x.opIds){const e=T[t];r+=e.count,n+=e.time,s+=e.wait,e.avgTime=e.count&&e.time?e.time/e.count:0,e.avgWait=e.count&&e.wait?e.wait/e.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",T,"\nTotal of",r,"op(s) for",n,"ms (incl. "+s+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",T.s11n),E.postMessage({type:"opfs-async-metrics"})},reset:function(){let e;for(e in x.opIds)(t=T[e]=Object.create(null)).count=t.time=t.wait=0;var t;let r=T.s11n=Object.create(null);r=r.serialize=Object.create(null),r.count=r.time=0,r=T.s11n.deserialize=Object.create(null),r.count=r.time=0}};const b=new h,y=(new p).addOnDispose((()=>b.dispose()));let q;const v=e=>(q=!0,y.dispose(),s(e)),w=()=>(q=!1,t(e)),E=new Worker(new URL(r.p+r.u(892),r.b));setTimeout((()=>{void 0===q&&v(new Error("Timeout while waiting for OPFS async proxy worker."))}),4e3),E._originalOnError=E.onerror,E.onerror=function(e){c("Error initializing OPFS asyncer:",e),v(new Error("Loading OPFS async Worker failed for unknown reasons."))};const S=u.sqlite3_vfs_find(null),A=S?new p(S):null;b.$iVersion=1,y.$iVersion=2,y.$szOsFile=u.sqlite3_file.structInfo.sizeof,y.$mxPathname=1024,y.$zName=f.allocCString("opfs"),y.$xDlOpen=y.$xDlError=y.$xDlSym=y.$xDlClose=null,y.addOnDispose("$zName",y.$zName,"cleanup default VFS wrapper",(()=>A?A.dispose():null));const x=Object.create(null);x.verbose=n.verbose,x.littleEndian=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),x.asyncIdleWaitTime=150,x.asyncS11nExceptions=1,x.fileBufferSize=65536,x.sabS11nOffset=x.fileBufferSize,x.sabS11nSize=2*y.$mxPathname,x.sabIO=new SharedArrayBuffer(x.fileBufferSize+x.sabS11nSize),x.opIds=Object.create(null);const T=Object.create(null);{let e=0;x.opIds.whichOp=e++,x.opIds.rc=e++,x.opIds.xAccess=e++,x.opIds.xClose=e++,x.opIds.xDelete=e++,x.opIds.xDeleteNoWait=e++,x.opIds.xFileSize=e++,x.opIds.xLock=e++,x.opIds.xOpen=e++,x.opIds.xRead=e++,x.opIds.xSleep=e++,x.opIds.xSync=e++,x.opIds.xTruncate=e++,x.opIds.xUnlock=e++,x.opIds.xWrite=e++,x.opIds.mkdir=e++,x.opIds["opfs-async-metrics"]=e++,x.opIds["opfs-async-shutdown"]=e++,x.opIds.retry=e++,x.sabOP=new SharedArrayBuffer(4*e),g.metrics.reset()}x.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach((e=>{void 0===(x.sq3Codes[e]=u[e])&&_("Maintenance required: not found:",e)})),x.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,defaultUnlockAsap:!1});const I=(e,...t)=>{const r=x.opIds[e]||_("Invalid op ID:",e);x.s11n.serialize(...t),Atomics.store(x.sabOPView,x.opIds.rc,-1),Atomics.store(x.sabOPView,x.opIds.whichOp,r),Atomics.notify(x.sabOPView,x.opIds.whichOp);const n=performance.now();Atomics.wait(x.sabOPView,x.opIds.rc,-1);const s=Atomics.load(x.sabOPView,x.opIds.rc);if(T[e].wait+=performance.now()-n,s&&x.asyncS11nExceptions){const t=x.s11n.deserialize();t&&c(e+"() async error:",...t)}return s};g.debug={asyncShutdown:()=>{l("Shutting down OPFS async listener. The OPFS VFS will no longer work."),I("opfs-async-shutdown")},asyncRestart:()=>{l("Attempting to restart OPFS VFS async listener. Might work, might not."),E.postMessage({type:"opfs-async-restart"})}};const k=function e(t=16){e._chars||(e._n=(e._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789").length);const r=[];let n=0;for(;n<t;++n){const t=Math.random()*(64*e._n)%e._n|0;r[n]=e._chars[t]}return r.join("")},F=Object.create(null),O=Object.create(null);O.op=void 0,O.start=void 0;const P=e=>{O.start=performance.now(),O.op=e,++T[e].count},L=()=>T[O.op].time+=performance.now()-O.start,C={xCheckReservedLock:function(e,t){const r=F[e];return f.poke(t,r.lockType?1:0,"i32"),0},xClose:function(e){P("xClose");let t=0;const r=F[e];return r&&(delete F[e],t=I("xClose",e),r.sq3File&&r.sq3File.dispose()),L(),t},xDeviceCharacteristics:function(e){return u.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,r){return u.SQLITE_NOTFOUND},xFileSize:function(e,t){P("xFileSize");let r=I("xFileSize",e);if(0==r)try{const e=x.s11n.deserialize()[0];f.poke(t,e,"i64")}catch(e){c("Unexpected error reading xFileSize() result:",e),r=x.sq3Codes.SQLITE_IOERR}return L(),r},xLock:function(e,t){P("xLock");const r=F[e];let n=0;return r.lockType?r.lockType=t:(n=I("xLock",e,t),0===n&&(r.lockType=t)),L(),n},xRead:function(e,t,r,n){P("xRead");const s=F[e];let i;try{i=I("xRead",e,r,Number(n)),0!==i&&u.SQLITE_IOERR_SHORT_READ!==i||f.heap8u().set(s.sabView.subarray(0,r),t)}catch(e){c("xRead(",arguments,") failed:",e,s),i=u.SQLITE_IOERR_READ}return L(),i},xSync:function(e,t){P("xSync"),++T.xSync.count;const r=I("xSync",e,t);return L(),r},xTruncate:function(e,t){P("xTruncate");const r=I("xTruncate",e,Number(t));return L(),r},xUnlock:function(e,t){P("xUnlock");const r=F[e];let n=0;return u.SQLITE_LOCK_NONE===t&&r.lockType&&(n=I("xUnlock",e,t)),0===n&&(r.lockType=t),L(),n},xWrite:function(e,t,r,n){P("xWrite");const s=F[e];let i;try{s.sabView.set(f.heap8u().subarray(t,t+r)),i=I("xWrite",e,r,Number(n))}catch(e){c("xWrite(",arguments,") failed:",e,s),i=u.SQLITE_IOERR_WRITE}return L(),i}},N={xAccess:function(e,t,r,n){P("xAccess");const s=I("xAccess",f.cstrToJs(t));return f.poke(n,s?0:1,"i32"),L(),0},xCurrentTime:function(e,t){return f.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return f.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,r){P("xDelete");const n=I("xDelete",f.cstrToJs(t),r,!1);return L(),n},xFullPathname:function(e,t,r,n){return f.cstrncpy(n,t,r)<r?0:u.SQLITE_CANTOPEN},xGetLastError:function(e,t,r){return l("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:function(e,t,r,n,s){P("xOpen");let i=0;0===t?t=k():"number"==typeof t&&(u.sqlite3_uri_boolean(t,"opfs-unlock-asap",0)&&(i|=x.opfsFlags.OPFS_UNLOCK_ASAP),t=f.cstrToJs(t));const o=Object.create(null);o.fid=r,o.filename=t,o.sab=new SharedArrayBuffer(x.fileBufferSize),o.flags=n;const a=I("xOpen",r,t,n,i);return a||(o.readOnly&&f.poke(s,u.SQLITE_OPEN_READONLY,"i32"),F[r]=o,o.sabView=x.sabFileBufView,o.sq3File=new m(r),o.sq3File.$pMethods=b.pointer,o.lockType=u.SQLITE_LOCK_NONE),L(),a}};if(A&&(y.$xRandomness=A.$xRandomness,y.$xSleep=A.$xSleep),y.$xRandomness||(N.xRandomness=function(e,t,r){const n=f.heap8u();let s=0;for(;s<t;++s)n[r+s]=255e3*Math.random()&255;return s}),y.$xSleep||(N.xSleep=function(e,t){return Atomics.wait(x.sabOPView,x.opIds.xSleep,0,t),0}),g.getResolvedPath=function(e,t){const r=new URL(e,"file://irrelevant").pathname;return t?r.split("/").filter((e=>!!e)):r},g.getDirForFilename=async function(e,t=!1){const r=g.getResolvedPath(e,!0),n=r.pop();let s=g.rootDirectory;for(const e of r)e&&(s=await s.getDirectoryHandle(e,{create:!!t}));return[s,n]},g.mkdir=async function(e){try{return await g.getDirForFilename(e+"/filepart",!0),!0}catch(e){return!1}},g.entryExists=async function(e){try{const[t,r]=await g.getDirForFilename(e);return await t.getFileHandle(r),!0}catch(e){return!1}},g.randomFilename=k,g.registerVfs=(e=!1)=>f.exports.sqlite3_vfs_register(y.pointer,e?1:0),g.treeList=async function(){const e=Object.create(null);return await async function e(t,r){r.name=t.name,r.dirs=[],r.files=[];for await(const n of t.values())if("directory"===n.kind){const t=Object.create(null);r.dirs.push(t),await e(n,t)}else r.files.push(n.name)}(g.rootDirectory,e),e},g.rmfr=async function(){const e=g.rootDirectory,t={recurse:!0};for await(const r of e.values())e.removeEntry(r.name,t)},g.unlink=async function(e,t=!1,r=!1){try{const[r,n]=await g.getDirForFilename(e,!1);return await r.removeEntry(n,{recursive:t}),!0}catch(e){if(r)throw new Error("unlink(",arguments[0],") failed: "+e.message,{cause:e});return!1}},g.traverse=async function(e){const t={recursive:!0,directory:g.rootDirectory};"function"==typeof e&&(e={callback:e}),async function t(r,n){for await(const s of r.values()){if(!1===e.callback(s,r,n))return!1;if(e.recursive&&"directory"===s.kind&&!1===await t(s,n+1))break}}((e=Object.assign(t,e||{})).directory,0)},g.importDb=async function(e,t){if(t instanceof Function)return async function(e,t){const[r,n]=await g.getDirForFilename(e,!0),s=await r.getFileHandle(n,{create:!0});let i,o=await s.createSyncAccessHandle(),a=0,l=!1;try{for(o.truncate(0);void 0!==(i=await t());)i instanceof ArrayBuffer&&(i=new Uint8Array(i)),0===a&&i.byteLength>=15&&(d.affirmDbHeader(i),l=!0),o.write(i,{at:a}),a+=i.byteLength;if((a<512||0!=a%512)&&_("Input size",a,"is not correct for an SQLite database."),!l){const e=new Uint8Array(20);o.read(e,{at:0}),d.affirmDbHeader(e)}return o.write(new Uint8Array([1,1]),{at:18}),a}catch(e){throw await o.close(),o=void 0,await r.removeEntry(n).catch((()=>{})),e}finally{o&&await o.close()}}(e,t);t instanceof ArrayBuffer&&(t=new Uint8Array(t)),d.affirmIsDb(t);const r=t.byteLength,[n,s]=await g.getDirForFilename(e,!0);let i,o=0;try{const e=await n.getFileHandle(s,{create:!0});return i=await e.createSyncAccessHandle(),i.truncate(0),o=i.write(t,{at:0}),o!=r&&_("Expected to write "+r+" bytes but wrote "+o+"."),i.write(new Uint8Array([1,1]),{at:18}),o}catch(e){throw i&&(await i.close(),i=void 0),await n.removeEntry(s).catch((()=>{})),e}finally{i&&await i.close()}},e.oo1){const t=function(...t){const r=e.oo1.DB.dbCtorHelper.normalizeArgs(...t);r.vfs=y.$zName,e.oo1.DB.dbCtorHelper.call(this,r)};t.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=t,t.importDb=g.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(y.pointer,(function(e,t){t.capi.sqlite3_busy_timeout(e,1e4),t.capi.sqlite3_exec(e,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)}))}E.onmessage=function({data:t}){switch(t.type){case"opfs-unavailable":v(new Error(t.payload.join(" ")));break;case"opfs-async-loaded":E.postMessage({type:"opfs-async-init",args:x});break;case"opfs-async-inited":if(!0===q)break;try{e.vfs.installVfs({io:{struct:b,methods:C},vfs:{struct:y,methods:N}}),x.sabOPView=new Int32Array(x.sabOP),x.sabFileBufView=new Uint8Array(x.sabIO,0,x.fileBufferSize),x.sabS11nView=new Uint8Array(x.sabIO,x.sabS11nOffset,x.sabS11nSize),(()=>{if(x.s11n)return x.s11n;const e=new TextDecoder,t=new TextEncoder("utf-8"),r=new Uint8Array(x.sabIO,x.sabS11nOffset,x.sabS11nSize),n=new DataView(x.sabIO,x.sabS11nOffset,x.sabS11nSize);x.s11n=Object.create(null);const s=Object.create(null);s.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},s.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},s.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},s.string={id:4};const i=e=>s[typeof e]||_("Maintenance required: this value type cannot be serialized.",e),o=e=>{switch(e){case s.number.id:return s.number;case s.bigint.id:return s.bigint;case s.boolean.id:return s.boolean;case s.string.id:return s.string;default:_("Invalid type ID:",e)}};x.s11n.deserialize=function(t=!1){++T.s11n.deserialize.count;const s=performance.now(),i=r[0],a=i?[]:null;if(i){const t=[];let s,l,c,_=1;for(s=0;s<i;++s,++_)t.push(o(r[_]));for(s=0;s<i;++s){const i=t[s];i.getter?(c=n[i.getter](_,x.littleEndian),_+=i.size):(l=n.getInt32(_,x.littleEndian),_+=4,c=e.decode(r.slice(_,_+l)),_+=l),a.push(c)}}return t&&(r[0]=0),T.s11n.deserialize.time+=performance.now()-s,a},x.s11n.serialize=function(...e){const s=performance.now();if(++T.s11n.serialize.count,e.length){const s=[];let o=0,a=1;for(r[0]=255&e.length;o<e.length;++o,++a)s.push(i(e[o])),r[a]=s[o].id;for(o=0;o<e.length;++o){const i=s[o];if(i.setter)n[i.setter](a,e[o],x.littleEndian),a+=i.size;else{const s=t.encode(e[o]);n.setInt32(a,s.byteLength,x.littleEndian),a+=4,r.set(s,a),a+=s.byteLength}}}else r[0]=0;T.s11n.serialize.time+=performance.now()-s},x.s11n})(),n.sanityChecks&&(l("Running sanity checks because of opfs-sanity-check URL arg..."),function(){const e=f.scopedAllocPush(),t=new m;try{const e=t.pointer,r=u.SQLITE_OPEN_CREATE|u.SQLITE_OPEN_READWRITE|u.SQLITE_OPEN_MAIN_DB,n=f.scopedAlloc(8),s="/sanity/check/file"+k(8),i=f.scopedAllocCString(s);let o;if(x.s11n.serialize("This is  string."),o=x.s11n.deserialize(),a("deserialize() says:",o),"This is  string."!==o[0]&&_("String d13n error."),N.xAccess(y.pointer,i,0,n),o=f.peek(n,"i32"),a("xAccess(",s,") exists ?=",o),o=N.xOpen(y.pointer,i,e,r,n),a("open rc =",o,"state.sabOPView[xOpen] =",x.sabOPView[x.opIds.xOpen]),0!==o)return void c("open failed with code",o);N.xAccess(y.pointer,i,0,n),o=f.peek(n,"i32"),o||_("xAccess() failed to detect file."),o=C.xSync(t.pointer,0),o&&_("sync failed w/ rc",o),o=C.xTruncate(t.pointer,1024),o&&_("truncate failed w/ rc",o),f.poke(n,0,"i64"),o=C.xFileSize(t.pointer,n),o&&_("xFileSize failed w/ rc",o),a("xFileSize says:",f.peek(n,"i64")),o=C.xWrite(t.pointer,i,10,1),o&&_("xWrite() failed!");const d=f.scopedAlloc(16);o=C.xRead(t.pointer,d,6,2),f.poke(d+6,0);let p=f.cstrToJs(d);a("xRead() got:",p),"sanity"!==p&&_("Unexpected xRead() value."),N.xSleep&&(a("xSleep()ing before close()ing..."),N.xSleep(y.pointer,2e3),a("waking up from xSleep()")),o=C.xClose(e),a("xClose rc =",o,"sabOPView =",x.sabOPView),a("Deleting file:",s),N.xDelete(y.pointer,i,4660),N.xAccess(y.pointer,i,0,n),o=f.peek(n,"i32"),o&&_("Expecting 0 from xAccess(",s,") after xDelete()."),l("End of OPFS sanity checks.")}finally{t.dispose(),f.scopedAllocPop(e)}}()),globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory?navigator.storage.getDirectory().then((t=>{E.onerror=E._originalOnError,delete E._originalOnError,e.opfs=g,g.rootDirectory=t,a("End of OPFS sqlite3_vfs setup.",y),w()})).catch(v):w()}catch(e){c(e),v(e)}break;default:{const e="Unexpected message from the OPFS async worker: "+JSON.stringify(t);c(e),v(new Error(e));break}}}}));return i};t.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push((async e=>{try{let r=t.defaultProxyUri;return e.scriptInfo.sqlite3Dir&&(t.defaultProxyUri=e.scriptInfo.sqlite3Dir+r),t().catch((t=>{e.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",t.message)}))}catch(t){return e.config.error("installOpfsVfs() exception:",t),Promise.reject(t)}}))})),globalThis.sqlite3ApiBootstrap.initializers.push((function(e){const t=e.util.toss,r=e.util.toss3,n=Object.create(null),s=e.capi,i=e.util,o=e.wasm,a=4096,l=s.SQLITE_OPEN_MAIN_DB|s.SQLITE_OPEN_MAIN_JOURNAL|s.SQLITE_OPEN_SUPER_JOURNAL|s.SQLITE_OPEN_WAL,c=".opaque",_=()=>Math.random().toString(36).slice(2),u=new TextDecoder,d=new TextEncoder,f=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),p=[e.config.error,e.config.warn,e.config.log],m=(e.config.log,e.config.warn),h=(e.config.error,new Map),g=e=>h.get(e),b=(e,t)=>{t?h.set(e,t):h.delete(e)},y=new Map,q=e=>y.get(e),v=(e,t)=>{t?y.set(e,t):y.delete(e)},w={xCheckReservedLock:function(e,t){const r=q(e);return r.log("xCheckReservedLock"),r.storeErr(),o.poke32(t,1),0},xClose:function(e){const t=q(e);t.storeErr();const r=t.getOFileForS3File(e);if(r)try{t.log(`xClose ${r.path}`),t.mapS3FileToOFile(e,!1),r.sah.flush(),r.flags&s.SQLITE_OPEN_DELETEONCLOSE&&t.deletePath(r.path)}catch(e){return t.storeErr(e,s.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(e){return s.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(e,t,r){return s.SQLITE_NOTFOUND},xFileSize:function(e,t){const r=q(e);r.log("xFileSize");const n=r.getOFileForS3File(e).sah.getSize()-a;return o.poke64(t,BigInt(n)),0},xLock:function(e,t){const r=q(e);return r.log(`xLock ${t}`),r.storeErr(),r.getOFileForS3File(e).lockType=t,0},xRead:function(e,t,r,n){const i=q(e);i.storeErr();const l=i.getOFileForS3File(e);i.log(`xRead ${l.path} ${r} @ ${n}`);try{const e=l.sah.read(o.heap8u().subarray(t,t+r),{at:a+Number(n)});return e<r?(o.heap8u().fill(0,t+e,t+r),s.SQLITE_IOERR_SHORT_READ):0}catch(e){return i.storeErr(e,s.SQLITE_IOERR)}},xSectorSize:function(e){return 4096},xSync:function(e,t){const r=q(e);r.log(`xSync ${t}`),r.storeErr();const n=r.getOFileForS3File(e);try{return n.sah.flush(),0}catch(e){return r.storeErr(e,s.SQLITE_IOERR)}},xTruncate:function(e,t){const r=q(e);r.log(`xTruncate ${t}`),r.storeErr();const n=r.getOFileForS3File(e);try{return n.sah.truncate(a+Number(t)),0}catch(e){return r.storeErr(e,s.SQLITE_IOERR)}},xUnlock:function(e,t){const r=q(e);return r.log("xUnlock"),r.getOFileForS3File(e).lockType=t,0},xWrite:function(e,r,n,i){const l=q(e);l.storeErr();const c=l.getOFileForS3File(e);l.log(`xWrite ${c.path} ${n} ${i}`);try{return n===c.sah.write(o.heap8u().subarray(r,r+n),{at:a+Number(i)})?0:t("Unknown write() failure.")}catch(e){return l.storeErr(e,s.SQLITE_IOERR)}}},E=new s.sqlite3_io_methods;E.$iVersion=1,e.vfs.installVfs({io:{struct:E,methods:w}});const S={xAccess:function(e,t,r,n){const s=g(e);s.storeErr();try{const e=s.getPath(t);o.poke32(n,s.hasFilename(e)?1:0)}catch(e){o.poke32(n,0)}return 0},xCurrentTime:function(e,t){return o.poke(t,2440587.5+(new Date).getTime()/864e5,"double"),0},xCurrentTimeInt64:function(e,t){return o.poke(t,21086676e7+(new Date).getTime(),"i64"),0},xDelete:function(e,t,r){const n=g(e);n.log(`xDelete ${o.cstrToJs(t)}`),n.storeErr();try{return n.deletePath(n.getPath(t)),0}catch(e){return n.storeErr(e),s.SQLITE_IOERR_DELETE}},xFullPathname:function(e,t,r,n){return o.cstrncpy(n,t,r)<r?0:s.SQLITE_CANTOPEN},xGetLastError:function(e,t,r){const n=g(e),i=n.popErr();if(n.log(`xGetLastError ${t} e =`,i),i){const e=o.scopedAllocPush();try{const[e,n]=o.scopedAllocCString(i.message,!0);o.cstrncpy(r,e,t),n>t&&o.poke8(r+t-1,0)}catch(i){return s.SQLITE_NOMEM}finally{o.scopedAllocPop(e)}}return i?i.sqlite3Rc||s.SQLITE_IOERR:0},xOpen:function(e,r,n,i,a){const l=g(e);try{l.log(`xOpen ${o.cstrToJs(r)} ${i}`);const e=r&&o.peek8(r)?l.getPath(r):_();let c=l.getSAHForPath(e);!c&&i&s.SQLITE_OPEN_CREATE&&(l.getFileCount()<l.getCapacity()?(c=l.nextAvailableSAH(),l.setAssociatedPath(c,e,i)):t("SAH pool is full. Cannot create file",e)),c||t("file not found:",e);const u={path:e,flags:i,sah:c};l.mapS3FileToOFile(n,u),u.lockType=s.SQLITE_LOCK_NONE;const d=new s.sqlite3_file(n);return d.$pMethods=E.pointer,d.dispose(),o.poke32(a,i),0}catch(e){return l.storeErr(e),s.SQLITE_CANTOPEN}}};class A{vfsDir;#e;#t;#r;#n=new Map;#s=new Map;#i=new Set;#o=new Map;#a=new Uint8Array(516);#l;#c;#_;constructor(t=Object.create(null)){this.#_=t.verbosity??f.verbosity,this.vfsName=t.name||f.name,this.#c=function(t){e.capi.sqlite3_vfs_find(t)&&r("VFS name is already registered:",t);const n=new s.sqlite3_vfs,i=s.sqlite3_vfs_find(null),a=i?new s.sqlite3_vfs(i):null;return n.$iVersion=2,n.$szOsFile=s.sqlite3_file.structInfo.sizeof,n.$mxPathname=512,n.addOnDispose(n.$zName=o.allocCString(t),(()=>b(n.pointer,0))),a&&(n.$xRandomness=a.$xRandomness,n.$xSleep=a.$xSleep,a.dispose()),n.$xRandomness||S.xRandomness||(S.xRandomness=function(e,t,r){const n=o.heap8u();let s=0;for(;s<t;++s)n[r+s]=255e3*Math.random()&255;return s}),n.$xSleep||S.xSleep||(S.xSleep=(e,t)=>0),e.vfs.installVfs({vfs:{struct:n,methods:S}}),n}(this.vfsName),b(this.#c.pointer,this),this.vfsDir=t.directory||"."+this.vfsName,this.#l=new DataView(this.#a.buffer,this.#a.byteOffset),this.isReady=this.reset(!!(t.clearOnInit??f.clearOnInit)).then((()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(t.initialCapacity||f.initialCapacity)}))}#u(e,...t){this.#_>e&&p[e](this.vfsName+":",...t)}log(...e){this.#u(2,...e)}warn(...e){this.#u(1,...e)}error(...e){this.#u(0,...e)}getVfs(){return this.#c}getCapacity(){return this.#n.size}getFileCount(){return this.#s.size}getFileNames(){const e=[],t=this.#s.keys();for(const r of t)e.push(r);return e}async addCapacity(e){for(let t=0;t<e;++t){const e=_(),t=await this.#t.getFileHandle(e,{create:!0}),r=await t.createSyncAccessHandle();this.#n.set(r,e),this.setAssociatedPath(r,"",0)}return this.getCapacity()}async reduceCapacity(e){let t=0;for(const r of Array.from(this.#i)){if(t===e||this.getFileCount()===this.getCapacity())break;const n=this.#n.get(r);r.close(),await this.#t.removeEntry(n),this.#n.delete(r),this.#i.delete(r),++t}return t}releaseAccessHandles(){for(const e of this.#n.keys())e.close();this.#n.clear(),this.#s.clear(),this.#i.clear()}async acquireAccessHandles(e){const t=[];for await(const[e,r]of this.#t)"file"===r.kind&&t.push([e,r]);return Promise.all(t.map((async([t,r])=>{try{const n=await r.createSyncAccessHandle();if(this.#n.set(n,t),e)n.truncate(a),this.setAssociatedPath(n,"",0);else{const e=this.getAssociatedPath(n);e?this.#s.set(e,n):this.#i.add(n)}}catch(e){throw this.storeErr(e),this.releaseAccessHandles(),e}})))}getAssociatedPath(e){e.read(this.#a,{at:0});const t=this.#l.getUint32(512);if(this.#a[0]&&(t&s.SQLITE_OPEN_DELETEONCLOSE||!(t&l)))return m(`Removing file with unexpected flags ${t.toString(16)}`,this.#a),this.setAssociatedPath(e,"",0),"";const r=new Uint32Array(2);e.read(r,{at:516});const n=this.computeDigest(this.#a);if(r.every(((e,t)=>e===n[t]))){const t=this.#a.findIndex((e=>0===e));return 0===t&&e.truncate(a),t?u.decode(this.#a.subarray(0,t)):""}return m("Disassociating file with bad digest."),this.setAssociatedPath(e,"",0),""}setAssociatedPath(e,r,n){const s=d.encodeInto(r,this.#a);512<=s.written+1&&t("Path too long:",r),this.#a.fill(0,s.written,512),this.#l.setUint32(512,n);const i=this.computeDigest(this.#a);e.write(this.#a,{at:0}),e.write(i,{at:516}),e.flush(),r?(this.#s.set(r,e),this.#i.delete(e)):(e.truncate(a),this.#i.add(e))}computeDigest(e){let t=3735928559,r=1103547991;for(const n of e)t=31*t+307*n,r=31*r+307*n;return new Uint32Array([t>>>0,r>>>0])}async reset(e){await this.isReady;let t,r=await navigator.storage.getDirectory();for(const e of this.vfsDir.split("/"))e&&(t=r,r=await r.getDirectoryHandle(e,{create:!0}));return this.#e=r,this.#r=t,this.#t=await this.#e.getDirectoryHandle(c,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(e)}getPath(e){return o.isPtr(e)&&(e=o.cstrToJs(e)),(e instanceof URL?e:new URL(e,"file://localhost/")).pathname}deletePath(e){const t=this.#s.get(e);return t&&(this.#s.delete(e),this.setAssociatedPath(t,"",0)),!!t}storeErr(e,t){return e&&(e.sqlite3Rc=t||s.SQLITE_IOERR,this.error(e)),this.$error=e,t}popErr(){const e=this.$error;return this.$error=void 0,e}nextAvailableSAH(){const[e]=this.#i.keys();return e}getOFileForS3File(e){return this.#o.get(e)}mapS3FileToOFile(e,t){t?(this.#o.set(e,t),v(e,this)):(this.#o.delete(e),v(e,!1))}hasFilename(e){return this.#s.has(e)}getSAHForPath(e){return this.#s.get(e)}async removeVfs(){if(!this.#c.pointer||!this.#t)return!1;s.sqlite3_vfs_unregister(this.#c.pointer),this.#c.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(c,{recursive:!0}),this.#t=void 0,await this.#r.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#r=void 0}catch(t){e.config.error(this.vfsName,"removeVfs() failed:",t)}return!0}exportFile(e){const r=this.#s.get(e)||t("File not found:",e),n=r.getSize()-a,s=new Uint8Array(n>0?n:0);if(n>0){const e=r.read(s,{at:a});e!=n&&t("Expected to read "+n+" bytes but read "+e+".")}return s}async importDbChunked(e,r){const n=this.#s.get(e)||this.nextAvailableSAH()||t("No available handles to import to.");n.truncate(0);let o,l=0,c=!1;try{for(;void 0!==(o=await r());)o instanceof ArrayBuffer&&(o=new Uint8Array(o)),0===l&&o.byteLength>=15&&(i.affirmDbHeader(o),c=!0),n.write(o,{at:a+l}),l+=o.byteLength;if((l<512||0!=l%512)&&t("Input size",l,"is not correct for an SQLite database."),!c){const e=new Uint8Array(20);n.read(e,{at:0}),i.affirmDbHeader(e)}n.write(new Uint8Array([1,1]),{at:4114})}catch(e){throw this.setAssociatedPath(n,"",0),e}return this.setAssociatedPath(n,e,s.SQLITE_OPEN_MAIN_DB),l}importDb(e,r){if(r instanceof ArrayBuffer)r=new Uint8Array(r);else if(r instanceof Function)return this.importDbChunked(e,r);const n=this.#s.get(e)||this.nextAvailableSAH()||t("No available handles to import to."),i=r.byteLength;(i<512||i%512!=0)&&t("Byte array size is invalid for an SQLite db.");for(let e=0;e<15;++e)"SQLite format 3".charCodeAt(e)!==r[e]&&t("Input does not contain an SQLite database header.");const o=n.write(r,{at:a});return o!=i?(this.setAssociatedPath(n,"",0),t("Expected to write "+i+" bytes but wrote "+o+".")):(n.write(new Uint8Array([1,1]),{at:4114}),this.setAssociatedPath(n,e,s.SQLITE_OPEN_MAIN_DB)),o}}class x{#d;constructor(e){this.#d=e,this.vfsName=e.vfsName}async addCapacity(e){return this.#d.addCapacity(e)}async reduceCapacity(e){return this.#d.reduceCapacity(e)}getCapacity(){return this.#d.getCapacity(this.#d)}getFileCount(){return this.#d.getFileCount()}getFileNames(){return this.#d.getFileNames()}async reserveMinimumCapacity(e){const t=this.#d.getCapacity();return t<e?this.#d.addCapacity(e-t):t}exportFile(e){return this.#d.exportFile(e)}importDb(e,t){return this.#d.importDb(e,t)}async wipeFiles(){return this.#d.reset(!0)}unlink(e){return this.#d.deletePath(e)}async removeVfs(){return this.#d.removeVfs()}}e.installOpfsSAHPoolVfs=async function(r=Object.create(null)){const s=r.name||f.name;return n[s]?n[s]:globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory?n[s]=(async()=>{const e=await navigator.storage.getDirectory(),r=".opfs-sahpool-sync-check-"+_(),n=await e.getFileHandle(r,{create:!0}),s=(await n.createSyncAccessHandle()).close();return await s,await e.removeEntry(r),s?.then&&t("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0})().then((async function(){if(r.$testThrowInInit)throw r.$testThrowInInit;const t=new A(r);return t.isReady.then((async()=>{const r=new x(t);if(e.oo1){const n=e.oo1,s=t.getVfs(),i=function(...e){const t=n.DB.dbCtorHelper.normalizeArgs(...e);t.vfs=s.$zName,n.DB.dbCtorHelper.call(this,t)};i.prototype=Object.create(n.DB.prototype),r.OpfsSAHPoolDb=i,n.DB.dbCtorHelper.setVfsPostOpenSql(s.pointer,(function(e,t){t.capi.sqlite3_exec(e,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)}))}return t.log("VFS initialized."),r})).catch((async e=>(await t.removeVfs().catch((()=>{})),e)))})).catch((e=>n[s]=Promise.reject(e))):n[s]=Promise.reject(new Error("Missing required OPFS APIs."))}})),void 0!==e){const t=Object.assign(Object.create(null),{exports:void 0===Re?e.asm:Re,memory:e.wasmMemory},globalThis.sqlite3ApiConfig||{});let r;globalThis.sqlite3ApiConfig=t;try{r=globalThis.sqlite3ApiBootstrap()}catch(e){throw console.error("sqlite3ApiBootstrap() error:",e),e}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}e.sqlite3=r}else console.warn("This is not running in an Emscripten module context, so","globalThis.sqlite3ApiBootstrap() is _not_ being called due to lack","of config info for the WASM environment.","It must be called manually.")})),t.ready});const n=function(){const e=t;if(!e)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const r=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:"undefined"!=typeof WorkerGlobalScope,location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(r.debugModule=r.urlParams.has("sqlite3.debugModule")?(...e)=>console.warn("sqlite3.debugModule:",...e):()=>{},r.urlParams.has("sqlite3.dir"))r.sqlite3Dir=r.urlParams.get("sqlite3.dir")+"/";else if(r.moduleScript){const e=r.moduleScript.src.split("/");e.pop(),r.sqlite3Dir=e.join("/")+"/"}if(globalThis.sqlite3InitModule=function t(...n){return e(...n).then((e=>{const n=e.sqlite3;n.scriptInfo=r,t.__isUnderTest&&(n.__isUnderTest=!0);const s=n.asyncPostInit;return delete n.asyncPostInit,s()})).catch((e=>{throw console.error("Exception loading sqlite3 module:",e),e}))},globalThis.sqlite3InitModule.ready=e.ready,globalThis.sqlite3InitModuleState.moduleScript){const e=globalThis.sqlite3InitModuleState;let t=e.moduleScript.src.split("/");t.pop(),e.scriptDir=t.join("/")+"/"}return r.debugModule("sqlite3InitModuleState =",r),globalThis.sqlite3InitModule}();(t=n)().then((e=>e.initWorker1API()))})()})();