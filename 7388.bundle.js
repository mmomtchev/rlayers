"use strict";(self.webpackChunkrlayers=self.webpackChunkrlayers||[]).push([[7388],{7388:(e,t,r)=>{r.r(t),r.d(t,{default:()=>F});var n=r(7294),o=r(6414),a=r(188),l=r(1090),u=r(2450),c=r(2083),i=r(3475),s=r(9515);function f(e,t,r,n,o,a){var l,u;void 0!==o?(l=o,u=void 0!==a?a:0):(l=[],u=0);for(var c=t;c<r;){var i=e[c++];l[u++]=e[c++],l[u++]=i;for(var s=2;s<n;++s)l[u++]=e[c++]}return l.length=u,l}var m,h=r(2967),p=r(9241),g=r(9646),y=(m=function(e,t){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},m(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function v(e){for(var t,r="";e>=32;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+String.fromCharCode(t)}const d=function(e){function t(t){var r=e.call(this)||this,n=t||{};return r.dataProjection=(0,o.U2)("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:u.Z.XY,r}return y(t,e),t.prototype.readFeatureFromText=function(e,t){var r=this.readGeometryFromText(e,t);return new l.Z(r)},t.prototype.readFeaturesFromText=function(e,t){return[this.readFeatureFromText(e,t)]},t.prototype.readGeometryFromText=function(e,t){var r=(0,h.tP)(this.geometryLayout_),n=function(e,t,r){var n,o=r||1e5,a=new Array(t);for(n=0;n<t;++n)a[n]=0;for(var l=function(e,t){for(var r=t||1e5,n=function(e){for(var t=function(e){for(var t=[],r=0,n=0,o=0,a=e.length;o<a;++o){var l=e.charCodeAt(o)-63;r|=(31&l)<<n,l<32?(t.push(r),r=0,n=0):n+=5}return t}(e),r=0,n=t.length;r<n;++r){var o=t[r];t[r]=1&o?~(o>>1):o>>1}return t}(e),o=0,a=n.length;o<a;++o)n[o]/=r;return n}(e,o),u=0,c=l.length;u<c;)for(n=0;n<t;++n,++u)a[n]+=l[u],l[u]=a[n];return l}(e,r,this.factor_);f(n,0,n.length,r,n);var o=(0,p.Ml)(n,0,n.length,r),a=new c.Z(o,this.geometryLayout_);return(0,g.fI)(a,!1,this.adaptOptions(t))},t.prototype.writeFeatureText=function(e,t){var r=e.getGeometry();return r?this.writeGeometryText(r,t):((0,s.h)(!1,40),"")},t.prototype.writeFeaturesText=function(e,t){return this.writeFeatureText(e[0],t)},t.prototype.writeGeometryText=function(e,t){var r=(e=(0,g.fI)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),n=e.getStride();return f(r,0,r.length,n,r),function(e,t,r){var n,o=r||1e5,a=new Array(t);for(n=0;n<t;++n)a[n]=0;for(var l=0,u=e.length;l<u;)for(n=0;n<t;++n,++l){var c=e[l],i=c-a[n];a[n]=c,e[l]=i}return function(e,t){for(var r=t||1e5,n=0,o=e.length;n<o;++n)e[n]=Math.round(e[n]*r);return function(e){for(var t=0,r=e.length;t<r;++t){var n=e[t];e[t]=n<0?~(n<<1):n<<1}return function(e){for(var t="",r=0,n=e.length;r<n;++r)t+=v(e[r]);return t}(e)}(e)}(e,o)}(r,n,this.factor_)},t}(i.Z);r(2031);var E=r(739),S=r(8004);function T(e){if(null===e)return Promise.resolve("");const t=(0,o.vs)(e.getCoordinates(),"EPSG:3857","EPSG:4326"),r=`https://nominatim.openstreetmap.org/reverse?format=json&lon=${t[0]}&lat=${t[1]}`;return fetch(r).then((e=>e.json())).then((e=>e.display_name)).catch((e=>e.message))}const w=new d;function F(){const[e,t]=n.useState(null),[r,l]=n.useState(null);let u;!function(e){e[e.START=0]="START",e[e.FINISH=1]="FINISH"}(u||(u={}));const[c,i]=n.useState(u.START),[s,f]=n.useState(""),[m,h]=n.useState(""),[p,g]=n.useState(null);return n.useEffect((()=>{T(e).then((e=>f(e)))}),[e]),n.useEffect((()=>{T(r).then((e=>h(e)))}),[r]),n.useEffect((()=>{(function(e,t){if(null===e||null===t)return Promise.resolve(null);const r=(0,o.vs)(e.getCoordinates(),"EPSG:3857","EPSG:4326"),n=(0,o.vs)(t.getCoordinates(),"EPSG:3857","EPSG:4326"),a=`https://router.project-osrm.org/route/v1/driving/${r[0]},${r[1]};${n[0]},${n[1]}`;return fetch(a).then((e=>e.json())).then((e=>function(e){if(e&&e.length>0){const t=w.readFeature(e[0].geometry);return t.getGeometry().transform("EPSG:4326","EPSG:3857"),t.getGeometry()}return null}(e.routes)))})(e,r).then((e=>g(e)))}),[e,r]),n.createElement(n.Fragment,null,n.createElement(E.rO,{className:"example-map",initial:{center:(0,o.mi)([2.364,48.82]),zoom:11},onClick:e=>{const r=e.map.getCoordinateFromPixel(e.pixel);c===u.START?(l(null),t(new a.Z(r)),i(u.FINISH)):(l(new a.Z(r)),i(u.START))}},n.createElement(E.H3,null),n.createElement(E.jh,null,n.createElement(S.P_,null,n.createElement(S.Au,{radius:6},n.createElement(S.X3,{color:"blue"}))),n.createElement(E.j$,{key:0,geometry:e}),n.createElement(E.j$,{key:1,geometry:r}),n.createElement(E.j$,{key:2,geometry:p},n.createElement(S.P_,null,n.createElement(S.c5,{width:3,color:"darkgreen"}))))),n.createElement("div",{className:"mx-0 mt-0 mb-3 p-1 w-100 jumbotron shadow shadow"},n.createElement("p",null,n.createElement("strong",null,"Select ",c===u.START?"START":"FINISH"," point")),n.createElement("div",{className:"d-flex mt-2 justify-content-between"},0==s.length?null:n.createElement("div",null,n.createElement("strong",null,"From: "),n.createElement("em",null,s)),0==m.length?null:n.createElement("div",null,n.createElement("strong",null,"To: "),n.createElement("em",null,m)))))}}}]);